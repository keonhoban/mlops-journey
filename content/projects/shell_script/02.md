+++
date = '2025-04-24T23:20:08+09:00'
draft = false
title = '[ì…¸ ìŠ¤í¬ë¦½íŠ¸] 02. Data Processing'
categories = 'Linux'
+++

# âœ… ì˜¤ëž˜ëœ ë¡œê·¸ ì •ë¦¬ ë° ë³´ê´€

## 1. ðŸŽ¯ ëª©í‘œ

> ì§€ì •í•œ ê²½ë¡œì˜ ì˜¤ëž˜ëœ ë¡œê·¸ íŒŒì¼ì„ ì‚­ì œí•˜ê±°ë‚˜, ì••ì¶• ë³´ê´€í•˜ëŠ”
> 
> 
> **ëª¨ë“œ ê¸°ë°˜ ìžë™í™” ìŠ¤í¬ë¦½íŠ¸**ìž…ë‹ˆë‹¤.
> 

---

## 2. ðŸ§  íë¦„ ìš”ì•½

```
ìž…ë ¥: [ëª¨ë“œ] [ê²½ë¡œ] [ë¡œê·¸ ìœ„ì¹˜] [ê¸°ì¤€ ë‚ ì§œ]
â†“
[clean] â†’ ì˜¤ëž˜ëœ ë¡œê·¸ ì‚­ì œ + ë¡œê·¸ ê¸°ë¡
[archive] â†’ ì˜¤ëž˜ëœ ë¡œê·¸ ì••ì¶• ë°±ì—…
```

---

## 3. ðŸ”§ ì „ì²´ ì½”ë“œ

```bash
#!/usr/bin/env bash
set -euo pipefail

# ì¸ìž ì²˜ë¦¬
MODE=${1:-"clean"}
TARGET_PATH=${2:-"/var/log"}
LOG_DIR=${3:-"/backup/logs"}
DAYS_OLD=${4:-30}
DATE=$(date '+%F')

mkdir -p "$LOG_DIR"

if [[ "$MODE" == "clean" ]]; then
    find "$TARGET_PATH" -type f -mtime +$DAYS_OLD -exec ls -lh {} \; > "$LOG_DIR/cleaned_$DATE.log"
    find "$TARGET_PATH" -type f -mtime +$DAYS_OLD -delete
    echo "[CLEAN] Done: $DATE"

elif [[ "$MODE" == "archive" ]]; then
    ARCHIVE="$LOG_DIR/logs_${DAYS_OLD}days_$DATE.tar.gz"
    find "$TARGET_PATH" -type f -name "*.log" -mtime +$DAYS_OLD -print | tar czf "$ARCHIVE" -T - || echo "No logs to archive"
    echo "[ARCHIVE] Done: $ARCHIVE"

else
    echo "Usage: $0 [clean|archive] [path] [log_dir] [days]"
    exit 1
fi
```

---

## 4. ðŸ’¡ ì£¼ìš” ê¸°ëŠ¥ ì„¤ëª…

| ê¸°ëŠ¥ | ì„¤ëª… |
| --- | --- |
| `MODE` ì¸ìž | clean / archive ëª¨ë“œ ë¶„ê¸° â†’ ë©€í‹° ìš©ë„ ìŠ¤í¬ë¦½íŠ¸ |
| `tar -T -` | `find` ê²°ê³¼ë¥¼ ì•ˆì „í•˜ê²Œ ë°”ë¡œ ì••ì¶• |
| `ls -lh` â†’ ë¡œê·¸ ë³´ê´€ | ì‚­ì œ ì „ íŒŒì¼ ëª©ë¡ì„ ë³´ê´€ â†’ ê°ì‚¬ ë¡œê·¸ |
| `Usage` ì¶œë ¥ | ìž˜ëª»ëœ ì¸ìž ëŒ€ì‘ â†’ ì‹¤ì „ ìš´ì˜ ìŠ¤í¬ë¦½íŠ¸ ê¸°ì¤€ ì¶©ì¡± |

---

## 5. ðŸ› ï¸ ì‹¤ë¬´ í™œìš© & í™•ìž¥ í¬ì¸íŠ¸

| í™•ìž¥ | ë°©ë²• |
| --- | --- |
| crontab ìžë™í™” | `0 1 * * * /path/cleaner.sh clean /var/log /backup/logs 30` |
| í™•ìž¥ìž ë‹¤ì–‘í™” | `-name "*.log" -o -name "*.out"` ë“±ìœ¼ë¡œ í™•ìž¥ |
| ì••ì¶• í›„ ì—…ë¡œë“œ | `aws s3 cp "$ARCHIVE" s3://log-backup-bucket/` |
| logrotateì™€ ì—°ë™ | `/etc/logrotate.d` â†’ ì¼ì • ì£¼ê¸° log ì •ë¦¬ í›„ ì´ ìŠ¤í¬ë¦½íŠ¸ ì‚¬ìš© |

---

## 6. ðŸ”§ MLOps ì‹¤ë¬´ ì—°ê²°

| íë¦„ | ì ìš© ì˜ˆì‹œ |
| --- | --- |
| ML í•™ìŠµ ë¡œê·¸ ì •ë¦¬ | `/opt/ml/logs` í´ë” ì£¼ê¸°ì  clean |
| ëª¨ë¸ ê¸°ë¡ ì •ë¦¬ | `mlruns/` ë‚´ ì˜¤ëž˜ëœ run data ë³´ê´€ |
| Kubeflow pipeline ë¡œê·¸ ì •ë¦¬ | `/var/log/kubeflow/*` ì••ì¶• ë³´ê´€ |

---

## 7. âœ… ì •ë¦¬

> ë‹¨ìˆœí•œ ë¡œê·¸ ì •ë¦¬ê°€ ì•„ë‹ˆë¼,
> 
> 
> **ì„ íƒ ê°€ëŠ¥í•œ ëª¨ë“œ, ìžë™ ë°±ì—…, ìœ ì—°í•œ ì¸ìž ì²˜ë¦¬, í™•ìž¥ì„±**ì— ì§‘ì¤‘í–ˆìŠµë‹ˆë‹¤.
> 

---

## ðŸ“Ž GitHub ë§í¬

> ðŸ‘‰ [GitHub: log_cleaner.sh](https://github.com/keonhoban/shell-scripts)
>
