+++
date = '2025-04-24T23:19:56+09:00'
draft = false
title = '[ì…¸ ìŠ¤í¬ë¦½íŠ¸] 01. Backup'
categories = 'Linux'
+++

# âœ… í•˜ë£¨ í•œ ë²ˆ, ìžë™ ë°±ì—…

## 1. ðŸŽ¯ ëª©í‘œ

> ì„œë²„ì—ì„œ íŠ¹ì • ë””ë ‰í† ë¦¬ë¥¼ ë§¤ì¼ ìžë™ìœ¼ë¡œ ë°±ì—…í•˜ê³ ,
> 
> 
> ë¡œê·¸ê¹Œì§€ ë‚¨ê¸°ëŠ” **ì•ˆì •ì ì¸ ìžë™í™” ìŠ¤í¬ë¦½íŠ¸**ë¥¼ ìž‘ì„±í•©ë‹ˆë‹¤.
> 

---

## 2. ðŸ§  ì „ì²´ íë¦„ ìš”ì•½

```
[ë°±ì—…í•  ê²½ë¡œ] â†’ [ì••ì¶• tar.gz ìƒì„±] â†’ [ë¡œê·¸ ê¸°ë¡] â†’ [ì €ìž¥ ê²½ë¡œ ì´ë™]
```

---

## 3. ðŸ”§ ì „ì²´ ìŠ¤í¬ë¦½íŠ¸ (ì£¼ì„ í¬í•¨)

```bash
#!/usr/bin/env bash
set -euo pipefail

# ë°±ì—…í•  ê²½ë¡œì™€ ì €ìž¥ ê²½ë¡œ (ì¸ìž or ê¸°ë³¸ê°’)
SRC_PATH=${1:-"/home/ubuntu"}
DST_PATH=${2:-"/backup/ubuntu_backup"}

# ì˜¤ëŠ˜ ë‚ ì§œ ê¸°ì¤€ íŒŒì¼ëª… ìƒì„±
ARCHIVE_NAME="$(date '+%F').tar.gz"
LOG_FILE="$DST_PATH/backup.log"

# ì‹¤íŒ¨ ì‹œ ë¡œê·¸ì— ë‚¨ê¸°ê¸°
trap 'echo "[ERROR] Backup failed!" >> $LOG_FILE' ERR

# ë°±ì—… ê²½ë¡œ ë¯¸ì¡´ìž¬ ì‹œ ìƒì„±
mkdir -p "$DST_PATH"

# ì‹¤ì œ ë°±ì—… ìˆ˜í–‰
if [[ -d "$SRC_PATH" ]]; then
    echo "[INFO] Backup started at $(date)" >> "$LOG_FILE"
    tar -czf "$DST_PATH/$ARCHIVE_NAME" -C "$SRC_PATH" . || exit 1
    echo "[INFO] Backup success: $ARCHIVE_NAME" >> "$LOG_FILE"
else
    echo "[ERROR] Source path not found: $SRC_PATH" >> "$LOG_FILE"
    exit 1
fi
```

---

## 4. ðŸ’¡ í•µì‹¬ ì„¤ê³„ í¬ì¸íŠ¸

| ìš”ì†Œ | ì„¤ê³„ ì´ìœ  |
| --- | --- |
| `set -euo pipefail` | ì˜ˆì™¸ ë°œìƒ ì¦‰ì‹œ ì¢…ë£Œ + ì˜ˆì¸¡ ë¶ˆê°€ëŠ¥í•œ ì˜¤ë¥˜ ë°©ì§€ |
| `${1:-}` | ì¸ìž ì—†ì„ ì‹œ ê¸°ë³¸ê°’ìœ¼ë¡œ ë™ìž‘ â†’ ìž¬ì‚¬ìš©ì„± ê°•í™” |
| `trap '...' ERR` | ì‹¤íŒ¨ ì‹œ ë¡œê·¸ ìžë™ ê¸°ë¡ â†’ ë””ë²„ê¹… íŽ¸ì˜ |
| `tar -czf` | í‘œì¤€ ì••ì¶• í¬ë§·ìœ¼ë¡œ ë°±ì—… |
| `mkdir -p` | ì‹¤í–‰ ì‹œ í´ë” ë¯¸ì¡´ìž¬ ë¬¸ì œ ì˜ˆë°© |

---

## 5. ðŸ› ï¸ ì‹¤ë¬´ ì ìš© & í™•ìž¥ ì•„ì´ë””ì–´

| í™•ìž¥ | ë°©ë²• |
| --- | --- |
| ë§¤ì¼ ìžë™ ì‹¤í–‰ | `crontab -e` â†’ `0 2 * * * /path/to/script.sh` |
| ë°±ì—… í›„ ì—…ë¡œë“œ | `aws s3 cp $ARCHIVE_NAME s3://bucket/path/` |
| í™˜ê²½ ì„¤ì • ë¶„ë¦¬ | `.env` íŒŒì¼ì—ì„œ SRC/DST ì„¤ì • ë¶ˆëŸ¬ì˜¤ê¸° |
| ë°±ì—… ì•Œë¦¼ | `mail` or ìŠ¬ëž™ ì•Œë¦¼ ì—°ë™ |

---

## 6. ðŸ”§ MLOps ì‹¤ì „ ì—°ê²° í¬ì¸íŠ¸

| íë¦„ | ì ìš© ì˜ˆì‹œ |
| --- | --- |
| í•™ìŠµ ê²°ê³¼ ìžë™ ë°±ì—… | ëª¨ë¸ checkpoint ìžë™ ì €ìž¥ |
| ì‹¤í—˜ ë¡œê·¸ ë³´ì¡´ | `~/mlruns` ë””ë ‰í† ë¦¬ ë°±ì—… |
| í™˜ê²½ ë³µì› ëŒ€ë¹„ | `Dockerfile`, `.env` ë°±ì—… |

---

## 7. âœ… ì •ë¦¬

> ìž‘ì€ ìžë™í™”ì§€ë§Œ, ì´ ìŠ¤í¬ë¦½íŠ¸ í•˜ë‚˜ë¡œ
> 
> 
> **ë°±ì—… ìžë™í™” + ì˜ˆì™¸ ì²˜ë¦¬ + ë¡œê·¸ ì¶”ì **ì´ ê°€ëŠ¥í•©ë‹ˆë‹¤.
> 

---

## ðŸ“Ž GitHub ë§í¬

> ðŸ‘‰ [GitHub: daily_backup.sh](https://github.com/keonhoban/shell-scripts)
>
