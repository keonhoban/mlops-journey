+++
date = '2026-01-17T16:23:10+12:00'
draft = false
title = '[Feature Store & Feast - ê²€ì¦(Proof)]'
categories = ['MLOps Pipeline', 'GitOps(ArgoCD)', 'Airflow', 'Proof of Feature Store & Feast'] 
+++

### GitOpsë¡œ ê³„ì•½ ë°°í¬ + Airflow ë²„ì „í™”/Latest ì €ì¥ + Feast ì¡°íšŒê¹Œì§€ E2E ì¦ëª…

---

## ğŸ§­ ëª©ì°¨

| êµ¬ë¶„ | ì¦ëª… í¬ì¸íŠ¸ |
| --- | --- |
| **A. GitOps ë¶„ë¦¬** | devÂ·prod ë…ë¦½ ë°°í¬ + ìƒíƒœ ê³ ì •(Synced/Healthy) |
| **B. Contract ê³ ì •** | ê³„ì•½(schema / repo)ì„ ìš´ì˜ ë¦¬ì†ŒìŠ¤ë¡œ ë°°í¬Â·ë§ˆìš´íŠ¸ |
| **C. íŒŒì´í”„ë¼ì¸** | Airflow DAG E2E ì„±ê³µ |
| **D. ì €ì¥ ì •ì±…** | S3 version 1ë‹¨ + latest ë™ì‹œ ìœ ì§€ |
| **E. ì¬í˜„ì„±** | schema_hashÂ·metadataë¡œ ìƒì„± ì¡°ê±´ ê¸°ë¡ |
| **F. Feast ê²€ì¦** | s3fs â†’ materialize â†’ online ì¡°íšŒ ì„±ê³µ |

> ì´ ê¸€ì€ ì„¤ëª…ì´ ì•„ë‹ˆë¼ ì¦ê±°(Proof)ë§Œ ë‚¨ê¹ë‹ˆë‹¤.
> 
> 
> ê° ì„¹ì…˜ì€
> 
> **ìº¡ì²˜ â†’ í™•ì¸ í¬ì¸íŠ¸ â†’ ê²°ë¡ ** êµ¬ì¡°ë¡œ ê³ ì •ë˜ì–´ ìˆìœ¼ë©°,
> 
> ë…ìê°€ ìº¡ì²˜ë§Œ ë´ë„ ì‹œìŠ¤í…œ ìƒíƒœë¥¼ íŒë‹¨í•  ìˆ˜ ìˆë„ë¡ êµ¬ì„±í–ˆìŠµë‹ˆë‹¤.
> 

---

# A. GitOps & Dev/Prod ë¶„ë¦¬

## A-1) ArgoCD Applications ìƒíƒœ ì¦ëª…

![proof-fs-01-argocd-applications.png](/mlops-journey/images/proof-fs-01-argocd-applications.png)

ğŸ“¸ **proof-fs-01-argocd-applications.png**

- ArgoCD Applications í™”ë©´ì—ì„œ
    
    `feature-store-dev`, `feature-store-prod`
    
    (ë° Feast ê´€ë ¨ Application) í™•ì¸
    
- Status: **Synced / Healthy**

**í™•ì¸ í¬ì¸íŠ¸**

- dev/prodê°€ **ì„œë¡œ ë‹¤ë¥¸ Application**ìœ¼ë¡œ ì¡´ì¬
- Git ë³€ê²½ì´ ì—†ì„ ë•Œ **idempotent ìƒíƒœ ìœ ì§€**
- namespace ê¸°ì¤€ìœ¼ë¡œ ìš´ì˜ ê²½ê³„ê°€ ëª…í™•

**ğŸ‘‰ ê²°ë¡ **

Feature Store êµ¬ì„±ì€ GitOps ê¸°ì¤€ìœ¼ë¡œ dev/prodê°€ ì™„ì „íˆ ë¶„ë¦¬ë˜ì–´ ìˆìœ¼ë©°,

ì˜ë„í•˜ì§€ ì•Šì€ ë³€ê²½ ì—†ì´ Synced/Healthy ìƒíƒœê°€ ìœ ì§€ë¨ì´ í™•ì¸ë©ë‹ˆë‹¤.

---

# B. Contract(ê³„ì•½) ìš´ì˜ ë¦¬ì†ŒìŠ¤í™” & ë§ˆìš´íŠ¸ ê²€ì¦

## B-1) Feature Schema / Metadata ê³„ì•½ ë°°í¬ ì¦ëª…

![proof-fs-02-01-configmap-schema.png](/mlops-journey/images/proof-fs-02-01-configmap-schema.png)

ğŸ“¸ **proof-fs-02-01-configmap-schema.png**

- ConfigMap: `feature-store-resources`
- í¬í•¨ íŒŒì¼:
    - `user_features.schema.json`
    - `metadata.json.j2`

**í™•ì¸ í¬ì¸íŠ¸**

- ê³„ì•½ì´ ì½”ë“œê°€ ì•„ë‹ˆë¼ **ìš´ì˜ ë¦¬ì†ŒìŠ¤(ConfigMap)**ë¡œ ë°°í¬ë¨
- dev/prodì— **ë™ì¼í•œ ê³„ì•½**ì´ ì ìš©ë¨

**ğŸ‘‰ ê²°ë¡ **

Feature ê³„ì•½ì€ GitOpsë¡œ ê´€ë¦¬ë˜ë©°,

íŒŒì´í”„ë¼ì¸ ì½”ë“œëŠ” ê³„ì•½ì„ **ì½ê¸°ë§Œ í•˜ëŠ” êµ¬ì¡°**ë¡œ ê³ ì •ë©ë‹ˆë‹¤.

---

## B-2) Airflow Pod ê³„ì•½ ë§ˆìš´íŠ¸ ì¦ëª…

![proof-fs-02-02-airflow-mount.png](/mlops-journey/images/proof-fs-02-02-airflow-mount.png)

ğŸ“¸ **proof-fs-02-02-airflow-mount.png**

- Airflow Pod ë‚´ë¶€ì—ì„œ íŒŒì¼ í™•ì¸:
    - `/opt/airflow/feature-store/user_features.schema.json`
    - `/opt/airflow/feature-store/metadata.json.j2`

**í™•ì¸ í¬ì¸íŠ¸**

- mountPathê°€ **í‘œì¤€í™”**ë˜ì–´ ìˆìŒ
- dev/prod ì‹¤í–‰ í™˜ê²½ì´ ë™ì¼í•˜ê²Œ ì¬í˜„ ê°€ëŠ¥

**ğŸ‘‰ ê²°ë¡ **

AirflowëŠ” GitOpsë¡œ ë°°í¬ëœ ê³„ì•½ì„

**ë™ì¼í•œ ê²½ë¡œë¡œ ë§ˆìš´íŠ¸**ë°›ì•„ ì‹¤í–‰ ì¡°ê±´ì´ ê³ ì •ë©ë‹ˆë‹¤.

---

## B-3) Feast Repo ê³„ì•½(subPath) ë§ˆìš´íŠ¸ ì¦ëª…

![proof-fs-02-03-feast-subpath.png](/mlops-journey/images/proof-fs-02-03-feast-subpath.png)

ğŸ“¸ **proof-fs-02-03-feast-subpath.png**

- ConfigMap: `feast-repo`
- `subPath`ë¡œ íŒŒì¼ ë‹¨ìœ„ ë§ˆìš´íŠ¸:
    - `/feast-repo/feature_store.yaml`
    - `/feast-repo/repo.py`

**í™•ì¸ í¬ì¸íŠ¸**

- ConfigMap ì „ì²´ mount ì‹œ ë°œìƒí•˜ëŠ” íŒŒì¼ êµ¬ì¡° ì´ìŠˆ ì°¨ë‹¨
- Feast repo ìì²´ê°€ **ìš´ì˜ ê³„ì•½**ìœ¼ë¡œ ì•ˆì •ì ìœ¼ë¡œ ê³ ì •

**ğŸ‘‰ ê²°ë¡ **

Feast ê³„ì•½(repo)ì€ GitOps + subPath ë§ˆìš´íŠ¸ ë°©ì‹ìœ¼ë¡œ

ìš´ì˜ ì¤‘ ë³€í˜•ë˜ì§€ ì•ŠëŠ” í˜•íƒœë¡œ í‘œì¤€í™”ë©ë‹ˆë‹¤.

---

# C. Airflow íŒŒì´í”„ë¼ì¸ E2E ê²€ì¦

## C-1) DAG Graph View ì„±ê³µ ì¦ëª…

![proof-fs-03-01-airflow-dag-graph.png](/mlops-journey/images/proof-fs-03-01-airflow-dag-graph.png)

ğŸ“¸ **proof-fs-03-01-airflow-dag-graph.png**

- DAG: `data_pipeline_daily_dev_v4` (ë˜ëŠ” `v5`)
- Task íë¦„:
    
    `extract_raw_data â†’ validate_data â†’ build_features â†’ store_features â†’ summarize_run`
    

**í™•ì¸ í¬ì¸íŠ¸**

- DAGëŠ” **ì—°ê²°ë§Œ ë‹´ë‹¹**
- ì‹¤ì œ ë¡œì§ì€ `mlops_lib/dp/*`ë¡œ ë¶„ë¦¬
- ë§ˆì§€ë§‰ taskì—ì„œ **prefix / version / uri**ê°€ ë‚¨ìŒ

**ğŸ‘‰ ê²°ë¡ **

ê³„ì•½ ê¸°ë°˜ Feature Store íŒŒì´í”„ë¼ì¸ì´ E2Eë¡œ ì‹¤í–‰ë˜ì–´ ì‚°ì¶œë¬¼ì´ ì €ì¥ë¨ì´ ì¦ëª…ë©ë‹ˆë‹¤.

DAGëŠ” íë¦„ë§Œ ì •ì˜í•˜ë©°, **Feature ìƒì„± ë¡œì§ì€ ì½”ë“œ ë ˆë²¨ì—ì„œ ì¬ì‚¬ìš©Â·í…ŒìŠ¤íŠ¸ ê°€ëŠ¥í•˜ë„ë¡ ë¶„ë¦¬**ë˜ì—ˆìŠµë‹ˆë‹¤.

---

# D. S3 ì €ì¥ ì •ì±… ì¦ëª… (Version + Latest)

## D-1) Version prefix ìƒì„± ì¦ëª…

![proof-fs-04-01-s3-version-prefix.png](/mlops-journey/images/proof-fs-04-01-s3-version-prefix.png)

ğŸ“¸ **proof-fs-04-01-s3-version-prefix.png**

- ìƒì„± ê·œì¹™:
    - `s3://<feature_base>/<feature_set>/v_YYYYMMDDTHHMMSS/`
- ë™ì¼ prefixì—:
    - `features.csv`
    - `schema.json`
    - `metadata.json`

**ğŸ‘‰ ê²°ë¡ **

ë²„ì „ì€ depthê°€ ì•„ë‹ˆë¼ **ìš´ì˜ í‘œì¤€(1ë‹¨)**ìœ¼ë¡œ ê³ ì •ë˜ì–´

ì¬í˜„ì„±ì„ ë³´ì¥í•©ë‹ˆë‹¤.

---

## D-2) Version + Latest ë™ì‹œ ìœ ì§€ ì¦ëª…

![proof-fs-04-02-s3-version-latest.png](/mlops-journey/images/proof-fs-04-02-s3-version-latest.png)

ğŸ“¸ **proof-fs-04-02-s3-version-latest.png**

- version ìœ ì§€:
    - `.../<feature_set>/v_YYYY.../`
- latest overwrite:
    - `.../<feature_set>/latest/`
- ë™ì¼ êµ¬ì¡°ë¡œ:
    - `features.parquet`
    - `features.csv`
    - `schema.json`
    - `metadata.json`

**ğŸ‘‰ ê²°ë¡ **

ì¬í˜„ì„±(version)ê³¼ ìš´ì˜ í¸ì˜(latest)ê°€ ë™ì‹œì— ì¶©ì¡±ë˜ì–´,

í•˜ìœ„ ì‹œìŠ¤í…œì€ **latest ê¸°ì¤€ìœ¼ë¡œ ë‹¨ìˆœí•˜ê²Œ ì†Œë¹„**í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

---

# E. ì¬í˜„ì„±(Operational Reproducibility) ì¦ëª…

## E-1) metadata.json ê¸°ë¡ ì¦ëª…

![proof-fs-05-01-metadata-json.png](/mlops-journey/images/proof-fs-05-01-metadata-json.png)

ğŸ“¸ **proof-fs-05-01-metadata-json.png**

- `metadata.json` í•„ë“œ:
    - `schema_hash`
    - `generated_at`
    - `feature_uri`
    - `source`
    - `pipeline`

**ğŸ‘‰ ê²°ë¡ **

â€œì˜¤ëŠ˜ ë§Œë“  feature.csvâ€ê°€ ì•„ë‹ˆë¼,

**ì–¸ì œ / ë¬´ìŠ¨ ê³„ì•½ìœ¼ë¡œ / ì–´ë–¤ ì†ŒìŠ¤ì—ì„œ ìƒì„±ëëŠ”ì§€**ê°€

ì‹œìŠ¤í…œì´ í•´ì„ ê°€ëŠ¥í•œ í˜•íƒœë¡œ ë‚¨ìŠµë‹ˆë‹¤.

---

# F. Feast ìš´ì˜ ê²€ì¦

## F-1) s3fs í¬í•¨ ì´ë¯¸ì§€ ì¦ëª…

![proof-fs-06-01-feast-s3fs-version.png](/mlops-journey/images/proof-fs-06-01-feast-s3fs-version.png)

ğŸ“¸ **proof-fs-06-01-feast-s3fs-version.png**

- Feast ì„œë²„ì—ì„œ `s3fs version: 2026.1.0` ì¶œë ¥

**ğŸ‘‰ ê²°ë¡ **

Feast ì„œë²„ëŠ”

S3 parquet ì ‘ê·¼ì„ ìœ„í•œ í•„ìˆ˜ ì˜ì¡´ì„±ì„ í¬í•¨í•œ ìƒíƒœë¡œ ìš´ì˜ë©ë‹ˆë‹¤.

---

## F-2) materialize ì„±ê³µ ì¦ëª…

![proof-fs-06-02-feast-materialize.png](/mlops-journey/images/proof-fs-06-02-feast-materialize.png)

ğŸ“¸ **proof-fs-06-02-feast-materialize.png**

- ë¡œê·¸:
    - `Materializing 1 feature views`
    - `into the redis online store`

**ğŸ‘‰ ê²°ë¡ **

Offline(S3 parquet) â†’ Online(Redis) ì ì¬ê°€

ì‹¤ì œë¡œ ë™ì‘í•¨ì´ í™•ì¸ë©ë‹ˆë‹¤.

---

## F-3) online(redis) ì¡°íšŒ ì„±ê³µ ì¦ëª…

![proof-fs-06-03-feast-online-query.png](/mlops-journey/images/proof-fs-06-03-feast-online-query.png)

ğŸ“¸ **proof-fs-06-03-feast-online-query.png**

**ğŸ‘‰ ê²°ë¡ **

Feature StoreëŠ” â€œì €ì¥â€ì—ì„œ ëë‚˜ì§€ ì•Šê³ ,

**í•™ìŠµÂ·ì„œë¹™ì—ì„œ ë™ì¼í•œ Feature ì •ì˜ë¥¼ ì‚¬ìš©í•˜ëŠ” ì¡°íšŒ ê°€ëŠ¥í•œ í”¼ì²˜ í”Œë«í¼**ìœ¼ë¡œ ì™„ì„±ë˜ì—ˆìŠµë‹ˆë‹¤.

---

# ğŸ ì •ë¦¬

- GitOpsë¡œ dev/prodê°€ ë¶„ë¦¬ ë°°í¬ë˜ê³ 
- Feature ê³„ì•½ì´ ìš´ì˜ ë¦¬ì†ŒìŠ¤ë¡œ ê³ ì •ë˜ì–´ íŒŒì´í”„ë¼ì¸ì€ ì½ê¸°ë§Œ í•˜ë©°
- Airflow íŒŒì´í”„ë¼ì¸ì€ E2Eë¡œ ì‹¤í–‰ë˜ì–´ S3ì— ë²„ì „í™” ì‚°ì¶œë¬¼ì´ ì €ì¥ë˜ê³ 
- Version + Latest ì •ì±…ìœ¼ë¡œ ì†Œë¹„ ê³„ì¸µì´ ë‹¨ìˆœí™”ë˜ë©°
- Feastë¥¼ í†µí•´ offline/online ì¡°íšŒê°€ ì‹¤ì œë¡œ ë™ì‘í•¨ì´ ì¦ëª…ë˜ì—ˆìŠµë‹ˆë‹¤.

ì´ ê²€ì¦ì„ í†µí•´ Feature Store ì‹œë¦¬ì¦ˆëŠ”

**ì„¤ê³„ ì„¤ëª…ì´ ì•„ë‹Œ, ìš´ì˜ ê°€ëŠ¥í•œ ìƒíƒœê°€ ì¦ëª…ëœ êµ¬í˜„**ìœ¼ë¡œ ì™„ê²°ë©ë‹ˆë‹¤.
