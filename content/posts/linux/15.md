+++
date = '2025-04-21T20:23:58+09:00'
draft = false
title = '[리눅스] 15장. 셸 스크립트 기초'
categories = 'Linux'
+++

### 🧠 결정적 지식 요약

| 개념 | 핵심 요약 |
| --- | --- |
| **스크립트 구조** | 명령어 나열 + 흐름 제어 (`if`, `for`, `case`) |
| **변수** | `name=값`, `"${var}"`, `${var:-기본값}` |
| **인자 처리** | `$1`, `$#`, `"$@"`, `getopts` |
| **조건문** | `[[ 조건 ]]` 권장 (`==`, `&&`, `=~`, `-n`, `-z` 등 지원) |
| **고급 문법** | `trap`, `IFS`, `while read`, 산술 for문 등 |

---

### 🖼️ 실행 흐름 도식화

```
[스크립트 기본 실행 구조]

입력 인자 → 변수 저장 → 조건문/반복문 실행 → 출력 or 파일 처리 → 종료 시 cleanup(trap)
```

---

### 🔍 실전 흐름 예시

| 상황 | 스크립트 흐름 요약 |
| --- | --- |
| **인자 부족 시 종료** | `[ "$#" -lt 1 ] → echo 사용법 → exit 1` |
| **로그 자동 백업** | `cp log.txt log_$(date +%F_%H%M).bak` |
| **CLI 옵션 처리** | `getopts`로 `-e`, `-l` 등 파라미터 받기 |
| **비정상 종료 처리** | `trap "정리작업" EXIT` |
| **CSV 반복 처리** | `while IFS=',' read ... done < file.csv` |

---

### ✅ 실전 체크리스트

- `#!/usr/bin/env bash` 사용 여부 ✅
- 인자 유효성 검사 (`$#`, `$1`) ✅
- `[[ ]]`로 조건문 통일 ✅
- 쿼팅 필수: `"${var}"`, `"$@"` ✅
- `trap`, `getopts`, `IFS` 사용 경험 ✅

---

### ⚠️ 실수 방지 포인트

| 항목 | 주의 설명 |
| --- | --- |
| `"${@}"` vs `"${*}"` | `"${@}"`는 각 인자 개별 처리 (정확한 전달) |
| `[[ ... ]]` 추천 이유 | `=~`, `&&`, ` |
| `trap` 미사용 시 문제 | 임시 파일/세션 정리 누락 가능성 |
| `getopts` 한계 | `--long-option` 지원 안 됨 → 직접 파싱 필요 |

---

### 🛠️ MLOps 실전 연결

| 시나리오 | 적용 예시 |
| --- | --- |
| **학습 파라미터 전달** | `./train.sh -e 50 -l 0.001` → `getopts` |
| **로그 백업** | `mv log.txt log_$(date +%F_%H%M).txt` |
| **임시 파일 정리** | `trap "rm -f /tmp/*.log" EXIT` |
| **대량 CSV 처리** | `for file in data/*.csv; do ... done` |
| **오류 요약 출력** | `grep ERROR train.log > error.log` |

---

### 🏁 마무리

> 셸 스크립트는 실무의 반복작업을 자동화하고,
> 
> 
> **빠르고 유연한 제어**를 가능하게 해준다.
>
