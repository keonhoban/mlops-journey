+++
date = '2025-04-22T18:37:48+09:00'
draft = false
title = '[리눅스] 16장. 셸 스크립트 활용'
categories = 'Linux'
+++

### 📌 핵심 개념 요약

> 반복되는 작업을 자동화하고, 예외 상황에서도 안정적이고 빠르게 처리할 수 있는 경량화된 자동화 도구
> 

---

### 🧠 결정적 핵심 요약

| 항목 | 설명 |
| --- | --- |
| **주요 기능** | 파일 처리, 로그 분석, 인자 제어, 오류 감지 및 정리 |
| **성능 개선 팁** | `egrep`, `awk`, `xargs -0`, `trap` 등 실전 활용 명령어 중심 |
| **스크립트 안정화 요소** | `usage 함수`, `local`, `IFS`, `set -euo pipefail`, `trap` 활용 |
| **공백 파일 안전 처리** | `IFS=$'\n'`, `find -print0 |

---

### 🧪 도구 비교 요약

| 작업 | 추천 도구 | 이유 |
| --- | --- | --- |
| 여러 단어 포함된 줄 필터링 | `egrep` | 가장 빠름. 단순 검색 최적 |
| 조건 + 계산 or 포맷 | `awk` | 필터링 + 후처리까지 한 번에 |
| 안전한 파일 루프 | `find -print0` + `xargs -0` | 공백 포함 파일 안전 처리 |

---

### 🖼️ 스크립트 구조 흐름

```
[기본 구조]
1. 인자 검사: usage 안내
2. 핵심 함수: 변수는 local
3. 파일 처리: find + xargs + grep/awk
4. 에러 출력: 1>&2
5. 종료 처리: trap 'cleanup' EXIT
```

---

### 💡 실전 팁 모음

| 항목 | 요약 |
| --- | --- |
| `local` | 함수 내 변수 범위 제한 |
| `trap` | 종료 시 임시 파일/자원 정리 |
| `IFS=$'\n'` | 줄바꿈만 기준 → 공백 포함 파일 처리 안전 |
| `rm -rf "${DIR:?}/*"` | `:?`로 빈 변수 삭제 방지 |
| `read -r -d ''` | null 문자 기준 루프 (safe loop) |

---

### 🔧 실무 예시 요약

| 스크립트 | 역할 |
| --- | --- |
| `diary.sh` | 날짜별 일기 자동 생성 + 열기 |
| `tree.sh` | 디렉터리 트리 구조 출력 |
| `findgrep.sh` | 키워드 검색 + 에러 출력 분리 |
| `deploy.sh` | 인자 기반 배포 스크립트 (with usage, trap) |

---

### 🛠️ MLOps 실전 연결

| 상황 | 스크립트 활용 예시 |
| --- | --- |
| **학습 자동화** | `train.sh --epochs 100` 구조로 CLI 설계 |
| **로그 분석** | `awk '/error/{print NR": "$0}' log.txt` |
| **서버 초기화** | `trap` 활용하여 `/opt/ml` 정리 |
| **CSV 필터링** | `while IFS=, read` → 메타데이터 추출 |
| **배포 파이프라인** | `deploy.sh -e staging -v v1.2` 식으로 확장 |

---

### ⚠️ 오해 방지

| 항목 | 주의 사항 |
| --- | --- |
| `$(ls)` | 공백/개행 포함 시 오류 위험 |
| `grep` 반복 | 프로세스 다수 → 느림 |
| `trap` 생략 | Ctrl+C 종료 시 자원 누수 |
| `getopts` | 긴 옵션 (`--long-option`) 직접 파싱 필요 |

---

### 🏁 마무리

> 셸 스크립트는 작지만 강력한 자동화 도구다.
> 
> 
> 성능과 안전을 고려한 설계는 **자동화 파이프라인의 핵심 기반**
>
