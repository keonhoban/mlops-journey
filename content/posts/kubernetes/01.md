+++
date = '2025-06-05T20:06:36+09:00'
draft = false
title = '[Kubernetes ì‹¤ìŠµ - 1ë‹¨ê³„ : Deployment & Service]'
categories = 'Kubernetes'
+++

## â˜¸ï¸ Kubernetes ì‹¤ìŠµ â‘  â€“ Minikube + Nginx ë°°í¬

> ëª©í‘œ: ë¡œì»¬ Minikube í´ëŸ¬ìŠ¤í„° êµ¬ì„± â†’ Nginx Deployment & Service ìƒì„± â†’ kubectl ëª…ë ¹ì–´ ì²´ë“
> 

ğŸ‘‰ ì‹¤ìŠµ ì½”ë“œëŠ” [ğŸ”— GitHub (Deployment_and_Service)](https://github.com/keonhoban/mlops-infra-labs/tree/main/k8s-basic/01_Deployment_and_Service) ì—ì„œ í™•ì¸ ê°€ëŠ¥

---

## ğŸ§­ ì „ì²´ íë¦„ ìš”ì•½

```
â‘  Minikube ì„¤ì¹˜ ë° í´ëŸ¬ìŠ¤í„° ì‹œì‘
â‘¡ kubectl ëª…ë ¹ì–´ ì‹¤ìŠµ
â‘¢ Nginx Deployment + Service ë°°í¬
â‘£ ìƒíƒœ í™•ì¸ / íŒŒë“œ ì ‘ì† / ë¡œê·¸ í™•ì¸ / ìˆ˜í‰ í™•ì¥
â‘¤ ë¸”ë¡œê·¸ ì •ë¦¬
```

---

## âš™ï¸ 1ë‹¨ê³„ â€“ Minikube & kubectl ì„¤ì¹˜

### ğŸ”¹ Docker ì„¤ì¹˜ & ê¶Œí•œ ë¶€ì—¬

```bash
sudo apt update && sudo apt install -y docker.io
sudo usermod -aG docker $USER
```

> âš ï¸ ì„¤ì¹˜ í›„ logout â†’ login ë˜ëŠ” newgrp docker ì‹¤í–‰ í•„ìš”
> 

---

### ğŸ”¹ Minikube & kubectl ì„¤ì¹˜

```bash
# Minikube
curl -LO https://storage.googleapis.com/minikube/releases/latest/minikube-linux-amd64
sudo install minikube-linux-amd64 /usr/local/bin/minikube

# kubectl (v1.30 ê¸°ì¤€)
curl -LO "https://dl.k8s.io/release/$(curl -Ls https://dl.k8s.io/release/stable.txt)/bin/linux/amd64/kubectl"
chmod +x kubectl && sudo mv kubectl /usr/local/bin/
```

---

### ğŸš€ í´ëŸ¬ìŠ¤í„° ì‹œì‘ & í™•ì¸

```bash
inikube start --driver=docker
kubectl get nodes
```

---

## ğŸ§± 2ë‹¨ê³„ â€“ Nginx ë°°í¬ íŒŒì¼ ì‘ì„±

### ğŸ“„ `nginx-deployment.yaml`

```yaml
apiVersion: apps/v1
kind: Deployment
metadata:
  name: nginx-deployment
spec:
  replicas: 2
  selector:
    matchLabels:
      app: nginx
  template:
    metadata:
      labels:
        app: nginx
    spec:
      containers:
      - name: nginx
        image: nginx:1.25.3
        ports:
        - containerPort: 80
```

### ğŸ“„ `nginx-service.yaml`

```yaml
apiVersion: v1
kind: Service
metadata:
  name: nginx-service
spec:
  type: NodePort
  selector:
    app: nginx
  ports:
    - port: 80
      targetPort: 80
      nodePort: 30080
```

---

## ğŸ§ª 3ë‹¨ê³„ â€“ ë°°í¬ ë° í™•ì¸

```bash
kubectl apply -f nginx-deployment.yaml
kubectl apply -f nginx-service.yaml
kubectl get all
```

---

## ğŸ” 4ë‹¨ê³„ â€“ íŒŒë“œ í™•ì¸ & ëª…ë ¹ì–´ ì‹¤ìŠµ

```bash
kubectl describe pod <pod-name>
kubectl logs <pod-name>
kubectl exec -it <pod-name> -- bash
kubectl scale deployment nginx-deployment --replicas=4
```

---

## ğŸŒ 5ë‹¨ê³„ â€“ Nginx ì ‘ì† í…ŒìŠ¤íŠ¸

```bash
# ë¸Œë¼ìš°ì € ì—´ê¸°
minikube service nginx-service

# ë˜ëŠ” curlë¡œ í™•ì¸
curl $(minikube ip):30080
```

---

## ğŸ“‚ ì‹¤ìŠµ ë””ë ‰í† ë¦¬ ì˜ˆì‹œ

```
k8s-basic/
â”œâ”€â”€ nginx-deployment.yaml
â”œâ”€â”€ nginx-service.yaml
â””â”€â”€ README.md
```

---

## ğŸ§© ì‹¤ë¬´ íŒ

- `kubectl scale`ì€ ì‹¤ë¬´ í™˜ê²½ì—ì„œë„ **ë¹ ë¥¸ í™•ì¥/ì¶•ì†Œ í…ŒìŠ¤íŠ¸**ì— ìœ ìš©
- YAML íŒŒì¼ë¡œ ê´€ë¦¬í•˜ë©´ **GitOps**, **CI/CD ìë™í™”**ì— ë°”ë¡œ ì—°ê³„ ê°€ëŠ¥
- `NodePort`ëŠ” ì™¸ë¶€ ì ‘ê·¼ì„ í—ˆìš©í•˜ì§€ë§Œ, ì‹¤ë¬´ì—ì„  **Ingress**ë‚˜ **LoadBalancer** íƒ€ì…ì„ ìì£¼ í™œìš©í•¨

---

## ğŸ”§ MLOps ì‹¤ì „ ì—°ê²°

- **ëª¨ë¸ ì„œë¹™** (ex. Triton, FastAPI) ì‹œ Deployment + Service êµ¬ì¡°ê°€ ë™ì¼
- MinikubeëŠ” **Kubeflow, MLflow** í…ŒìŠ¤íŠ¸ í™˜ê²½ì—ë„ í™œìš© ê°€ëŠ¥
- `kubectl logs`, `describe`, `exec`ëŠ” **ë””ë²„ê¹… ë° ëª¨ë‹ˆí„°ë§ì˜ ê¸°ë³¸ê¸°**
