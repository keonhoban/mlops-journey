+++
date = '2025-06-05T20:06:41+09:00'
draft = false
title = '[Kubernetes ì‹¤ìŠµ - 4ë‹¨ê³„: Helm]'
categories = 'Kubernetes'
+++

## ğŸ—‚ï¸ Kubernetes ì‹¤ìŠµ â‘£ â€“ Helmìœ¼ë¡œ Nginx ë°°í¬ & ì»¤ìŠ¤í„°ë§ˆì´ì§•

> ëª©í‘œ
> 
> 1. Helm CLI ì„¤ì¹˜ ë° Chart ê°œë… ì´í•´
> 2. Nginxë¥¼ Helmìœ¼ë¡œ ë°°í¬ & ê¸°ì¡´ YAML ë°©ì‹ê³¼ ì°¨ì´ ì²´ê°
> 3. `values.yaml`ë¡œ ì„¤ì •ì„ ë°”ê¾¸ê³  ì¬ë°°í¬í•˜ëŠ” ë°©ë²• ìµíˆê¸°

ğŸ‘‰ ì‹¤ìŠµ ì½”ë“œëŠ” [ğŸ”— GitHub (Helm)](https://github.com/keonhoban/mlops-infra-labs/tree/main/k8s-basic/04_helm)

---

## ğŸ§­ ì „ì²´ íë¦„ ìš”ì•½

```
â‘  Helm ì„¤ì¹˜ ë° Chart ì €ì¥ì†Œ ë“±ë¡
â‘¡ bitnami/nginx Chart ê²€ìƒ‰ â†’ ì„¤ì¹˜
â‘¢ ê¸°ë³¸ ì„¤ì¹˜ ê²°ê³¼ í™•ì¸ (LoadBalancer â†’ Pending)
â‘£ values.yamlë¡œ NodePort ì„¤ì • ë³€ê²½
â‘¤ ì„¤ì • ì ìš©í•˜ì—¬ ì¬ì„¤ì¹˜ + í¬íŠ¸ ì ‘ì† í™•ì¸
```

---

## ğŸ“ ì‹¤ìŠµ ë””ë ‰í† ë¦¬ êµ¬ì„±

```
k8s-helm/
â”œâ”€â”€ values-nginx.yaml   # ì»¤ìŠ¤í„°ë§ˆì´ì§•ìš© ì„¤ì • íŒŒì¼
â””â”€â”€ README.md
```

---

## âš™ï¸ [1ë‹¨ê³„] Helm ì„¤ì¹˜

### ğŸ”§ Ubuntu ì„¤ì¹˜ ëª…ë ¹ì–´

```bash
curl https://raw.githubusercontent.com/helm/helm/main/scripts/get-helm-3 | bash
helm version
```

---

## ğŸ“¦ [2ë‹¨ê³„] Chart ì €ì¥ì†Œ ë“±ë¡ & ê²€ìƒ‰

```bash
helm repo add bitnami https://charts.bitnami.com/bitnami
helm repo update
helm search repo nginx
```

> helm search repoëŠ” Chart ëª©ë¡ì„ ê²€ìƒ‰í•˜ëŠ” ëª…ë ¹ì–´ì•¼
> 
> 
> Helm ChartëŠ” ë§í•˜ìë©´ **íŒ¨í‚¤ì§€í™”ëœ K8s ì•± í…œí”Œë¦¿**ì´ë¼ê³  ë³´ë©´ ë¼!
> 

---

## ğŸš€ [3ë‹¨ê³„] Nginx ê¸°ë³¸ ì„¤ì¹˜ (LoadBalancer ë°©ì‹)

```bash
helm install my-nginx bitnami/nginx
kubectl get all
```

```bash
# ê²°ê³¼ (ì¼ë¶€)
service/my-nginx  LoadBalancer  10.103.5.39  <pending>  80:31794/TCP,443:32036/TCP
```

> LoadBalancerëŠ” í´ë¼ìš°ë“œìš© ë°©ì‹ì´ë¼ Minikubeì—ì„œëŠ” <pending> ìƒíƒœë¡œ ì™¸ë¶€ ì ‘ì†ì´ ì•ˆ ë¼.
> 

---

## ğŸ› ï¸ [4ë‹¨ê³„] values.yamlë¡œ NodePort ì„¤ì • ë³€ê²½

### ğŸ”¹ values-nginx.yaml

```yaml
service:
  type: NodePort
  nodePorts:
    http: 30090
```

### ğŸ”„ ì¬ì„¤ì¹˜

```bash
helm uninstall my-nginx
helm install my-nginx bitnami/nginx -f values-nginx.yaml
kubectl get all
```

```bash
# ê²°ê³¼ (ì •ìƒ ë™ì‘)
service/my-nginx  NodePort  10.109.159.213  <none>  80:30090/TCP,443:32694/TCP
```

### ğŸ”— ì ‘ì† í…ŒìŠ¤íŠ¸

```bash
minikube ip         # IP í™•ì¸
curl http://<minikube-ip>:30090
```

> HTML ì‘ë‹µì´ ë‚˜ì˜¤ë©´ ì„±ê³µ ğŸ‰
> 
> 
> `Welcome to nginx!` ë¬¸êµ¬ê°€ ì¶œë ¥ë˜ë©´ ì •ìƒ!
> 

---

## ğŸ“Œ [5ë‹¨ê³„] ì£¼ìš” Helm ëª…ë ¹ì–´ ì •ë¦¬

| ëª…ë ¹ì–´ | ì„¤ëª… |
| --- | --- |
| `helm list` | ì„¤ì¹˜ëœ Helm ë¦´ë¦¬ì¦ˆ ëª©ë¡ í™•ì¸ |
| `helm uninstall <ì´ë¦„>` | Helm ë°°í¬ ì‚­ì œ |
| `helm get all <ì´ë¦„>` | ìƒì„±ëœ ëª¨ë“  ë¦¬ì†ŒìŠ¤ ìƒì„¸ ë³´ê¸° |
| `helm upgrade` | ì„¤ì •ê°’ ë³€ê²½ í›„ ì¬ë°°í¬ (`-f` ì‚¬ìš©) |

```bash
helm upgrade my-nginx bitnami/nginx -f values-nginx.yaml
```

---

## ğŸ¯ ì •ë¦¬ ìš”ì•½

| í•­ëª© | ì„¤ëª… |
| --- | --- |
| Helm | K8s ì•±ì„ íŒ¨í‚¤ì§•/ì„¤ì¹˜/ê´€ë¦¬í•˜ëŠ” ë„êµ¬ (Homebrew ë¹„ìŠ·í•œ ê°œë…) |
| Chart | ì—¬ëŸ¬ YAML íŒŒì¼ê³¼ ì„¤ì •ê°’ì„ ê°€ì§„ íŒ¨í‚¤ì§€ í…œí”Œë¦¿ |
| values.yaml | ì‚¬ìš©ì ì •ì˜ ì„¤ì •ê°’ (YAML í…œí”Œë¦¿ì˜ ë³€ìˆ˜ ëŒ€ì²´ìš©) |
| ê¸°ë³¸ ì„¤ì¹˜ ê²°ê³¼ | LoadBalancerë¡œ ì¸í•´ Minikubeì—ì„œëŠ” ì™¸ë¶€ ì ‘ì† ì–´ë ¤ì›€ |
| NodePort ì„¤ì • | ì»¤ìŠ¤í„°ë§ˆì´ì§•ìœ¼ë¡œ ì‹¤ìŠµ í™˜ê²½ì— ë§ê²Œ ì¡°ì • ê°€ëŠ¥ |

---

## ğŸ§© ì‹¤ë¬´ íŒ

- ë°˜ë³µ ë°°í¬ ì‹œ `helm upgrade`ë¡œ ë¬´ì¤‘ë‹¨ ë°°í¬ êµ¬í˜„ ê°€ëŠ¥
- `values.yaml`ì„ Gitìœ¼ë¡œ ê´€ë¦¬í•˜ë©´ GitOps êµ¬ì„±ì—ë„ í™œìš© ê°€ëŠ¥
- Helmì€ MLflow, ArgoCD, Prometheus ë“± MLOps ë„êµ¬ ì„¤ì¹˜ì—ë„ ìì£¼ ì“°ì„
- Helm ì„¤ì¹˜ ì‹œ, `-dry-run` ì˜µì…˜ìœ¼ë¡œ ë¦¬ì†ŒìŠ¤ ìƒì„± ì „ ê²°ê³¼ ë¯¸ë¦¬ë³´ê¸° ê°€ëŠ¥
