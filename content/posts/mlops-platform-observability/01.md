+++
date = '2025-10-14T17:10:21+09:00'
draft = false
title = '[MLOps í”Œë«í¼ Observability & Data Pipeline - 1ë‹¨ê³„ : kube-prometheus-stack + GitOps êµ¬ì¶•]'
categories = ['Observability', 'GitOps(ArgoCD)', 'Kubernetes', 'Monitoring Stack', 'Helm', 'NFS']
+++

## kube-prometheus-stack + GitOps êµ¬ì¶•

---

## ğŸ§  ì‹œë‚˜ë¦¬ì˜¤ ì„¤ëª…

> â€œëª¨ë‹ˆí„°ë§ì€ í•œ ë²ˆ ì„¸íŒ…í•´ë‘ê³  ëë‚˜ëŠ” ê²Œ ì•„ë‹ˆë¼,
> 
> 
> í´ëŸ¬ìŠ¤í„°ë¥¼ ê°ˆì•„ì—ì–´ë„ **ê°™ì€ ëª¨ìŠµìœ¼ë¡œ ë‹¤ì‹œ ì‚´ì•„ë‚˜ì•¼ í•˜ëŠ” ì¸í”„ë¼**ì…ë‹ˆë‹¤.â€
> 
> â€œê·¸ë˜ì„œ ì´ë²ˆ ë‹¨ê³„ì—ì„œëŠ” kube-prometheus-stackì„ dev/prodë¡œ ì™„ì „íˆ ë¶„ë¦¬í•˜ê³ ,
> 
> **ëª¨ë“  êµ¬ì„±ì„ YAML + GitOpsë¡œ ê³ ì •**í•´ì„œ
> 
> Observability ìŠ¤íƒì„ ì¬í˜„í•  ìˆ˜ ìˆëŠ” ë¼ˆëŒ€ë¥¼ ë¨¼ì € ë§Œë“¤ì—ˆìŠµë‹ˆë‹¤.â€
> 

---

### ğŸ¯ í•µì‹¬ ìš”ì•½

- **ëª©í‘œ**
    - `monitoring-dev / monitoring-prod` Observability ìŠ¤íƒì„
        **YAML + GitOpsë§Œìœ¼ë¡œ ê·¸ëŒ€ë¡œ ì¬í˜„**í•  ìˆ˜ ìˆëŠ” ìƒíƒœ ë§Œë“¤ê¸°
        
- **êµ¬ì„± ìš”ì†Œ**
    - `kube-prometheus-stack 65.5.0` (Prometheus + Alertmanager + Grafana)
    - `nfs-monitoring` StorageClass (NFS ê¸°ë°˜ ë™ì  í”„ë¡œë¹„ì €ë‹)
    - `nginx-ingress` ê¸°ë°˜ HTTPS Ingress
    - `ArgoCD Application` 2ê°œ (`monitoring-dev`, `monitoring-prod`)
- **ë³´ì•ˆ/ìš´ì˜ í¬ì¸íŠ¸**
    - Grafana admin ê³„ì •ì€ **Secretìœ¼ë¡œ ë¶„ë¦¬**
    - Alertmanager / Slack / TLS / SealedSecret ì„¸ë¶€ êµ¬ì„±ì€ **ì‹œë¦¬ì¦ˆ ë‹¨ê³„ë³„ë¡œ í™•ì¥**

---

## 1ï¸âƒ£ ì „ì²´ êµ¬ì¡° ê°œìš”

- Kubernetes ìœ„ì—
    - `monitoring-dev` ë„¤ì„ìŠ¤í˜ì´ìŠ¤
    - `monitoring-prod` ë„¤ì„ìŠ¤í˜ì´ìŠ¤
- ë‘ ë„¤ì„ìŠ¤í˜ì´ìŠ¤ë§ˆë‹¤
    - kube-prometheus-stack 1ê°œì”© ë°°í¬
    - Prometheus, Alertmanager, Grafana ê°ê° ë…ë¦½
- ëª¨ë“  ë§¤ë‹ˆí˜ìŠ¤íŠ¸ëŠ” Git ë¦¬í¬ì§€í† ë¦¬ì—ì„œ ê´€ë¦¬
    - `apps/monitoring-dev.yaml`
    - `apps/monitoring-prod.yaml`
    - ArgoCDê°€ **Auto Sync + SelfHeal** ë¡œ ê´€ë¦¬

### ğŸ§© ì•„í‚¤í…ì²˜ íë¦„

![mermaid-observability-01.png](/mlops-journey/images/mermaid-observability-01.png)

> Slack, TLS, Loki, FastAPI Metrics ë“±ì€ ë’¤í¸ì—ì„œ ì´ êµ¬ì¡° ìœ„ì— ë ˆì´ì–´ì²˜ëŸ¼ í•˜ë‚˜ì”© ì˜¬ë¦¬ëŠ” ë°©ì‹ìœ¼ë¡œ ê°‘ë‹ˆë‹¤.
> 

---

## 2ï¸âƒ£ ì‚¬ì „ ì¤€ë¹„ ì²´í¬ë¦¬ìŠ¤íŠ¸

### âœ… ì¸í”„ë¼ ì „ì œ

- [ ]  Kubernetes í´ëŸ¬ìŠ¤í„° (master + worker êµ¬ì¡°)
- [ ]  `kubectl` + `helm` ì‚¬ìš© ê°€ëŠ¥
- [ ]  `ArgoCD` ì„¤ì¹˜ ë° ë™ì‘ ì¤‘ (`argocd` ë„¤ì„ìŠ¤í˜ì´ìŠ¤)
- [ ]  `nginx-ingress` ì»¨íŠ¸ë¡¤ëŸ¬ ì„¤ì¹˜ ì™„ë£Œ
- [ ]  Git ë¦¬í¬ì§€í† ë¦¬ êµ¬ì¡°ì— `apps/` ë””ë ‰í„°ë¦¬ ì¡´ì¬

### âœ… NFS / Storage

- [ ]  NFS ì„œë²„ (ì˜ˆ: `192.168.18.141`)
- [ ]  `/mnt/nfs_share/mlops/monitoring` ë””ë ‰í„°ë¦¬ ìƒì„±
- [ ]  `nfs-monitoring` StorageClass (ë™ì  í”„ë¡œë¹„ì €ë„ˆ) ìƒì„±

> PrometheusëŠ” 1ì°¨ ë²„ì „ì—ì„œëŠ” NFS ìœ„ì— ì˜¬ë ¤ë‘ê³ ,
> 
> 
> ë‚˜ì¤‘ì— **local-path ê¸°ë°˜ TSDB ìµœì í™”**ë¡œ ë°”ê¿”ê°€ëŠ” ìŠ¤í† ë¦¬ë¡œ ì´ì–´ê°‘ë‹ˆë‹¤.
> 

---

## 3ï¸âƒ£ NFS ë° StorageClass êµ¬ì„±

### 3-1. NFS ì„œë²„ ì„¤ì •

NFS ì„œë²„(ì˜ˆ: 192.168.18.141)ì—ì„œ:

```bash
sudo mkdir -p /mnt/nfs_share/mlops/monitoring
sudo chmod -R 0777 /mnt/nfs_share/mlops/monitoring

```

`/etc/exports`:

```bash
/mnt/nfs_share/mlops/monitoring 192.168.18.0/24(rw,sync,no_subtree_check,no_root_squash)

```

ì ìš© & í™•ì¸:

```bash
sudo exportfs -ra
showmount -e 192.168.18.141
# /mnt/nfs_share/mlops/monitoring 192.168.18.0/24

```

### 3-2. NFS ë™ì  í”„ë¡œë¹„ì €ë„ˆ ì„¤ì¹˜

ê´€ë¦¬ê°€ í¸í•´ì•¼ í•˜ë‹ˆ, **nfs-subdir-external-provisioner**ë¡œ ë™ì  í”„ë¡œë¹„ì €ë‹ì„ ì”ë‹ˆë‹¤.

```bash
helm repo add nfs-subdir-external-provisioner https://kubernetes-sigs.github.io/nfs-subdir-external-provisioner/
helm repo update

kubectl create ns storage --dry-run=client -o yaml | kubectl apply -f -

helm upgrade --install nfs-monitoring \
  nfs-subdir-external-provisioner/nfs-subdir-external-provisioner \
  -n storage \
  --set nfs.server=192.168.18.141 \
  --set nfs.path=/mnt/nfs_share/mlops/monitoring \
  --set storageClass.name=nfs-monitoring \
  --set storageClass.defaultClass=false \
  --set storageClass.allowVolumeExpansion=true \
  --set storageClass.archiveOnDelete=true

```

í™•ì¸:

```bash
kubectl get sc
# NAME             PROVISIONER                                        DEFAULT
# nfs-monitoring   k8s-sigs.io/nfs-subdir-external-provisioner        no

```

> ì´í›„ì— ìƒì„±í•˜ëŠ” PVCì—ì„œ storageClassName: nfs-monitoringë§Œ ì§€ì •í•˜ë©´
> 
> 
> ìë™ìœ¼ë¡œ PV + í•˜ìœ„ ë””ë ‰í„°ë¦¬ê°€ ìƒì„±ë©ë‹ˆë‹¤.
> 

---

## 4ï¸âƒ£ Namespace & ê¸°ë³¸ Secret êµ¬ì„±

### 4-1. Namespace ìƒì„±

```bash
kubectl create ns monitoring-dev
kubectl create ns monitoring-prod

```

ì´ë¯¸ ìˆë‹¤ë©´ ì—ëŸ¬ê°€ ë‚˜ì™€ë„ ìƒê´€ ì—†ìŠµë‹ˆë‹¤.

### 4-2. Grafana Admin Secret

**ì´ˆê¸° ë¡œê·¸ì¸ìš© ê³„ì •**ì„ ë„¤ì„ìŠ¤í˜ì´ìŠ¤ë³„ë¡œ ë¶„ë¦¬í•©ë‹ˆë‹¤.

```bash
# dev
kubectl -n monitoring-dev create secret generic grafana-admin-secret-dev \
  --from-literal=admin-user=admin \
  --from-literal=admin-password='ChangeMe123!'

# prod
kubectl -n monitoring-prod create secret generic grafana-admin-secret-prod \
  --from-literal=admin-user=admin \
  --from-literal=admin-password='ChangeMe123!'

```

> ì‹¤ì œ í™˜ê²½ì—ì„œëŠ” ChangeMe123! ëŒ€ì‹ 
> 
> 
> ë³„ë„ íŒ¨ìŠ¤ì›Œë“œ ê´€ë¦¬ìì—ì„œ ê°€ì ¸ì˜¨ ê°’ì„ ì‚¬ìš©í•˜ê³ ,
> 
> ì´í›„ì—ëŠ” SealedSecretë¡œ ì „í™˜í•˜ëŠ” ê²ƒì„ ê°•í•˜ê²Œ ì¶”ì²œí•©ë‹ˆë‹¤.
> 

### â–¶ SealedSecret ë³€í™˜ ì˜ˆì‹œ(dev)

```bash
kubectl -n monitoring-dev create secret generic grafana-admin-secret-dev \
  --from-literal=admin-user=admin \
  --from-literal=admin-password='<ì‹¤ì œ_ê´€ë¦¬ì_íŒ¨ìŠ¤ì›Œë“œ>' \
  --dry-run=client -o yaml \
| kubeseal --controller-namespace=sealed-secrets \
           --controller-name=sealed-secrets \
           --format=yaml \
> sealed-secrets/grafana-admin-secret-dev.yaml

```

prodë„ ë™ì¼í•©ë‹ˆë‹¤.

---

## 5ï¸âƒ£ ArgoCD Application ì •ì˜ (kube-prometheus-stack)

ì´ì œ Git ë¦¬í¬ì§€í† ë¦¬ì˜ `apps/` ì•„ë˜ì—

`monitoring-dev`ì™€ `monitoring-prod` Applicationì„ ì •ì˜í•©ë‹ˆë‹¤.

### 5-1. monitoring-dev Application

`apps/monitoring-dev.yaml`:

```yaml
apiVersion: argoproj.io/v1alpha1
kind: Application
metadata:
  name: monitoring-dev
  namespace: argocd
  annotations:
    argocd.argoproj.io/sync-options: >
      SkipDryRunOnMissingResource=true,PruneLast=true,ServerSideApply=true
spec:
  project: dev
  destination:
    server: https://kubernetes.default.svc
    namespace: monitoring-dev
  source:
    repoURL: https://prometheus-community.github.io/helm-charts
    chart: kube-prometheus-stack
    targetRevision: 65.5.0
    helm:
      skipCrds: true
      values: |
        global:
          imageRegistry: ""

        grafana:
          admin:
            existingSecret: grafana-admin-secret-dev
            userKey: admin-user
            passwordKey: admin-password
          ingress:
            enabled: true
            ingressClassName: nginx
            hosts:
              - grafana-dev.local
            tls:
              - hosts: [grafana-dev.local]
                secretName: grafana-tls
          persistence:
            enabled: true
            storageClassName: nfs-monitoring
            size: 10Gi

        alertmanager:
          alertmanagerSpec:
            configSecret: alertmanager-config-dev   # A2ì—ì„œ SealedSecretë¡œ ì±„ì›€
            storage:
              volumeClaimTemplate:
                spec:
                  storageClassName: nfs-monitoring
                  accessModes: ["ReadWriteOnce"]
                  resources:
                    requests:
                      storage: 10Gi
          ingress:
            enabled: true
            ingressClassName: nginx
            hosts:
              - alert-dev.local
            tls:
              - hosts: [alert-dev.local]
                secretName: alertmanager-tls

        prometheus:
          ingress:
            enabled: true
            ingressClassName: nginx
            hosts:
              - prometheus-dev.local
            tls:
              - hosts: [prometheus-dev.local]
                secretName: prometheus-tls
          prometheusSpec:
            externalUrl: "https://prometheus-dev.local"
            serviceMonitorSelector:
              matchLabels:
                release: monitoring-dev
            podMonitorSelector:
              matchLabels:
                release: monitoring-dev
            ruleSelector:
              matchLabels:
                release: monitoring-dev
            storageSpec:
              volumeClaimTemplate:
                spec:
                  storageClassName: nfs-monitoring
                  accessModes: ["ReadWriteOnce"]
                  resources:
                    requests:
                      storage: 50Gi
            retention: 15d
            retentionSize: 30GiB

        kubeEtcd:
          enabled: false
        kubeControllerManager:
          enabled: false
        kubeScheduler:
          enabled: false
        kubeProxy:
          enabled: false
        coreDns:
          enabled: false

```

> ì—¬ê¸°ì„œëŠ” ì´ˆê¸° ë²„ì „ì´ë¼ Prometheusë„ NFSë¥¼ ì“°ê³  ìˆìŠµë‹ˆë‹¤.
> 
> 
> ë‚˜ì¤‘ì— ê³µì‹ë¬¸ì„œì—ì„œ ê¶Œì¥í•˜ëŠ”  â€œPrometheusë§Œ local-pathë¡œ ì˜®ê¸°ëŠ” ê³¼ì •â€ì„
> 
> ë³„ë„ ê¸€ë¡œ ë‹¤ë£¨ë©´ì„œ ì§„ì§œ ì‹¤ë¬´í˜• êµ¬ì¡°ë¡œ ì—…ê·¸ë ˆì´ë“œí•©ë‹ˆë‹¤.
> 

### 5-2. monitoring-prod Application

`apps/monitoring-prod.yaml`:

```yaml
apiVersion: argoproj.io/v1alpha1
kind: Application
metadata:
  name: monitoring-prod
  namespace: argocd
  annotations:
    argocd.argoproj.io/sync-options: >
      SkipDryRunOnMissingResource=true,PruneLast=true,ServerSideApply=true
spec:
  project: prod
  destination:
    server: https://kubernetes.default.svc
    namespace: monitoring-prod
  source:
    repoURL: https://prometheus-community.github.io/helm-charts
    chart: kube-prometheus-stack
    targetRevision: 65.5.0
    helm:
      skipCrds: true
      values: |
        global:
          imageRegistry: ""

        grafana:
          admin:
            existingSecret: grafana-admin-secret-prod
            userKey: admin-user
            passwordKey: admin-password
          ingress:
            enabled: true
            ingressClassName: nginx
            hosts:
              - grafana-prod.local
            tls:
              - hosts: [grafana-prod.local]
                secretName: grafana-tls
          persistence:
            enabled: true
            storageClassName: nfs-monitoring
            size: 10Gi

        alertmanager:
          alertmanagerSpec:
            configSecret: alertmanager-config-prod
            storage:
              volumeClaimTemplate:
                spec:
                  storageClassName: nfs-monitoring
                  accessModes: ["ReadWriteOnce"]
                  resources:
                    requests:
                      storage: 10Gi
          ingress:
            enabled: true
            ingressClassName: nginx
            hosts:
              - alert-prod.local
            tls:
              - hosts: [alert-prod.local]
                secretName: alertmanager-tls

        prometheus:
          ingress:
            enabled: true
            ingressClassName: nginx
            hosts:
              - prometheus-prod.local
            tls:
              - hosts: [prometheus-prod.local]
                secretName: prometheus-tls
          prometheusSpec:
            externalUrl: "https://prometheus-prod.local"
            serviceMonitorSelector:
              matchLabels:
                release: monitoring-prod
            podMonitorSelector:
              matchLabels:
                release: monitoring-prod
            ruleSelector:
              matchLabels:
                release: monitoring-prod
            storageSpec:
              volumeClaimTemplate:
                spec:
                  storageClassName: nfs-monitoring
                  accessModes: ["ReadWriteOnce"]
                  resources:
                    requests:
                      storage: 50Gi
            retention: 30d
            retentionSize: 50GiB

        kubeEtcd:
          enabled: false
        kubeControllerManager:
          enabled: false
        kubeScheduler:
          enabled: false
        kubeProxy:
          enabled: false
        coreDns:
          enabled: false

```

---

## 6ï¸âƒ£ ArgoCD Sync & ì²« ê¸°ë™ ê²€ì¦

### 6-1. Application ì ìš©

```bash
kubectl -n argocd apply -f apps/monitoring-dev.yaml
kubectl -n argocd apply -f apps/monitoring-prod.yaml

```

ArgoCD UI ë˜ëŠ” CLIì—ì„œ:

```bash
argocd app sync monitoring-dev
argocd app sync monitoring-prod

```

### 6-2. ë¦¬ì†ŒìŠ¤ ìƒíƒœ í™•ì¸

```bash
kubectl -n monitoring-dev get pods,svc,pvc
kubectl -n monitoring-prod get pods,svc,pvc

```

í™•ì¸ í¬ì¸íŠ¸:

- [ ]  `prometheus-...`, `alertmanager-...`, `grafana-...` Pod ëª¨ë‘ **Running**
- [ ]  `prometheus-kube-prometheus-stack-...`, `alertmanager-...`, `grafana` Service ì¡´ì¬
- [ ]  `nfs-monitoring` StorageClass ê¸°ë°˜ PVCê°€ **Bound** ìƒíƒœ

### 6-3. Ingress & /etc/hosts

ë¡œì»¬ PCì˜ `/etc/hosts` ì— ë‹¤ìŒì„ ì¶”ê°€í•©ë‹ˆë‹¤.

```
192.168.18.240 grafana-dev.local alert-dev.local prometheus-dev.local
192.168.18.240 grafana-prod.local alert-prod.local prometheus-prod.local

```

ì´í›„ ë¸Œë¼ìš°ì €ì—ì„œ:

- `https://grafana-dev.local`
- `https://grafana-prod.local`

ì´ˆê¸° ë¡œê·¸ì¸:

- ID: `admin`
- PW: `ChangeMe123!` (ì•ì—ì„œ Secretì— ë„£ì€ ê°’)

> TLS ì¸ì¦ì„œëŠ” A5ì—ì„œ SealedSecret + self-signed ë°œê¸‰ ê³¼ì •ì„ ìì„¸íˆ ì •ë¦¬í•©ë‹ˆë‹¤.
> 
> 
> ì—¬ê¸°ì„œëŠ” â€œIngress â†’ Service â†’ Podâ€ ê²½ë¡œê°€ ì •ìƒì¸ì§€ì—ë§Œ ì§‘ì¤‘í•˜ì…”ë„ ì¶©ë¶„í•©ë‹ˆë‹¤.
> 

---

## 7ï¸âƒ£ ì•„ì£¼ ê°„ë‹¨í•œ Smoke Check

Slack ì—°ë™ê¹Œì§€ëŠ” ë‹¤ìŒ ë‹¨ê³„ì—ì„œ ê¹Šê²Œ ë‹¤ë£° ì˜ˆì •ì´ê³ ,

ì—¬ê¸°ì„œëŠ” â€œPrometheusRule â†’ Prometheus â†’ Alertmanagerâ€ ê¸°ë³¸ ì—°ê²°ë§Œ í…ŒìŠ¤íŠ¸í•´ ë´…ë‹ˆë‹¤.

### 7-1. devìš© Smoke Rule

```bash
cat <<'EOF' | kubectl -n monitoring-dev apply -f -
apiVersion: monitoring.coreos.com/v1
kind: PrometheusRule
metadata:
  name: monitoring-smoke
  labels:
    release: monitoring-dev
spec:
  groups:
    - name: smoke.rules
      rules:
        - alert: Monitoring_Smoke_Dev
          expr: vector(1)
          for: 1m
          labels:
            severity: warning
            namespace: monitoring-dev
          annotations:
            summary: "Monitoring dev smoke alert"
            description: "kube-prometheus-stack(dev) ê²½ë¡œ ì ê²€ìš© í…ŒìŠ¤íŠ¸ ì•ŒëŒ"
EOF

```

### 7-2. ìƒíƒœ í™•ì¸

1ë¶„ í›„ ë‹¤ìŒ ëª…ë ¹ìœ¼ë¡œ í™•ì¸:

```bash
curl -sk https://prometheus-dev.local/api/v1/alerts \
| jq '.data.alerts[] | select(.labels.alertname=="Monitoring_Smoke_Dev") | {state:.state, labels:.labels}'

```

- `state: "firing"` ì´ ë‚˜ì˜¤ë©´,
    - PrometheusRule â†’ Prometheus í‰ê°€ê¹Œì§€ëŠ” ì •ìƒì…ë‹ˆë‹¤.
    - Alertmanager/Slack ë¼ìš°íŒ…ì€ A2ì—ì„œ ì´ì–´ì„œ êµ¬ì„±í•©ë‹ˆë‹¤.

í…ŒìŠ¤íŠ¸ê°€ ëë‚˜ë©´:

```bash
kubectl -n monitoring-dev delete prometheusrule monitoring-smoke

```

---

## ğŸ§© íŒ

- **kubeEtcd / kubeScheduler ë¹„í™œì„±í™”**
    
    ìì²´ ê´€ë¦¬í•˜ëŠ” ì»¨íŠ¸ë¡¤ í”Œë ˆì¸ + self-managed í´ëŸ¬ìŠ¤í„°ì¸ ê²½ìš°,
    
    êµ³ì´ etcd/ìŠ¤ì¼€ì¤„ëŸ¬ê¹Œì§€ ëª¨ë‹ˆí„°ë§í•˜ì§€ ì•Šì•„ë„ ì¶©ë¶„í•œ ê²½ìš°ê°€ ë§ìŠµë‹ˆë‹¤.
    
    ì²˜ìŒì—ëŠ” êº¼ë‘ê³ , ì •ë§ í•„ìš”í•  ë•Œë§Œ ì¼œëŠ” ê²Œ ë…¸ì´ì¦ˆ ê´€ë¦¬ì— ì¢‹ìŠµë‹ˆë‹¤.
    
- **ë¼ë²¨(`release=monitoring-{env}`)ì€ í‘œì¤€ì²˜ëŸ¼ ì‚¬ìš©**
    
    ë‚˜ì¤‘ì— ServiceMonitor/PodMonitor/PrometheusRuleì„ ì¶”ê°€í•  ë•Œ
    
    ì´ ë¼ë²¨ë§Œ ë§ì¶°ì£¼ë©´ dev/prod Prometheusì— ìì—°ìŠ¤ëŸ½ê²Œ ë¶™ìŠµë‹ˆë‹¤.
    
- **ìŠ¤í† ë¦¬í…”ë§ì„ ìœ„í•´ â€œì²˜ìŒì—” NFS â†’ ë‚˜ì¤‘ì— local-pathâ€ë„ ê´œì°®ìŠµë‹ˆë‹¤**
    
    ë¸”ë¡œê·¸ ì…ì¥ì—ì„œëŠ”, ì§€ê¸ˆì²˜ëŸ¼ NFS ê¸°ë°˜ìœ¼ë¡œ ë¨¼ì € ì•ˆì •ì ì¸ êµ¬ì¡°ë¥¼ ë§Œë“¤ê³ ,
    
    A4ì—ì„œ â€œì™œ PrometheusëŠ” local-pathê°€ ë‚˜ì€ì§€â€ë¥¼ ê·¼ê±°ì™€ í•¨ê»˜ ë³´ì—¬ì£¼ëŠ” ê²Œ
    
    ì½ëŠ” ì‚¬ëŒ ì…ì¥ì—ì„œ í›¨ì”¬ êµìœ¡ì ì¸ íë¦„ì´ ë©ë‹ˆë‹¤.
    

---

## ğŸ”§ MLOps ì‹¤ì „ ì—°ê²°

- ì´ Observability ìŠ¤íƒì€ **ë‹¨ìˆœ ëª¨ë‹ˆí„°ë§**ì´ ì•„ë‹ˆë¼,
    - Airflow, MLflow, FastAPI, Lokiê¹Œì§€ ë¶™ì–´ ìˆëŠ”
        
        **ML Platform ê´€ì¸¡ ë ˆì´ì–´ì˜ ê¸°ë°˜**ì´ ë©ë‹ˆë‹¤.
        
- ë‚˜ì¤‘ì—:
    - FastAPIì˜ `/metrics` â†’ ServiceMonitor
    - Airflow Exporter â†’ PodMonitor
    - MLflow ì„œë²„ ë©”íŠ¸ë¦­ â†’ ServiceMonitor
- ì´ëŸ° ê²ƒë“¤ì„ í•˜ë‚˜ì”© ì¶”ê°€í•˜ë©´ì„œ
    
    **â€œëª¨ë¸ í•™ìŠµ â†’ ë°°í¬ â†’ ì„œë¹™ â†’ ëª¨ë‹ˆí„°ë§ â†’ ì•ŒëŒ â†’ ë¡¤ë°±â€** ê¹Œì§€ ì´ì–´ì§€ëŠ”
    
    MLOps ì „ì²´ ê·¸ë¦¼ì„ ì™„ì„±í•´ ë‚˜ê°ˆ ì˜ˆì •ì…ë‹ˆë‹¤.
    

---

## ğŸ  ì •ë¦¬

| í•­ëª© | ìƒíƒœ |
| --- | --- |
| dev/prod Namespace | ë¶„ë¦¬ ì™„ë£Œ |
| kube-prometheus-stack | dev/prod ê°ê° ë°°í¬ |
| NFS ê¸°ë°˜ PVC | Prometheus/Grafana/Alertmanagerì— ì—°ê²° |
| ArgoCD GitOps | `apps/monitoring-{dev,prod}.yaml` ê¸°ì¤€ìœ¼ë¡œ ê´€ë¦¬ |
| Ingress | grafana/alertmanager/prometheus ë„ë©”ì¸ ë¶„ë¦¬ |
| ê°„ë‹¨ Smoke Rule | Prometheus í‰ê°€ê¹Œì§€ ê²€ì¦ ì™„ë£Œ |
