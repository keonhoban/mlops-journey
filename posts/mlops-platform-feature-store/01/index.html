<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>[Feature Store & Feast - Feature Store-lite] | ğŸ”ï¸ MLOps Journey</title>
<meta name=keywords content><meta name=description content="[Feature Store & Feast - Feature Store-lite]
GitOpsë¡œ ê³„ì•½ ë°°í¬í•˜ê³ , Airflowë¡œ ìŠ¤í‚¤ë§ˆ ê¸°ë°˜ í”¼ì²˜ë¥¼ ìƒì„±í•´ S3ì— â€œë²„ì „í™” + ì¬í˜„ì„± ë©”íƒ€â€ë¡œ ì €ì¥í•˜ê¸°

ğŸ§  ì‹œë‚˜ë¦¬ì˜¤
ì‹¤ë¬´ì—ì„œ Feature Storeì˜ ìŠ¹ë¶€ëŠ” â€œML ì„±ëŠ¥â€ì´ ì•„ë‹ˆë¼ ìš´ì˜ ì•ˆì •ì„±/ì¬í˜„ì„±ì—ì„œ ë¨¼ì € ê°ˆë¦½ë‹ˆë‹¤.
â€œì˜¤ëŠ˜ ë§Œë“  feature.csvâ€ê°€ ì•„ë‹ˆë¼, ì•„ë˜ê°€ ë°˜ë“œì‹œ ë‚¨ì•„ì•¼ ìš´ì˜ì´ ë©ë‹ˆë‹¤.

ì–¸ì œ ìƒì„±ëëŠ”ì§€ (generated_at)
ì–´ë–¤ ìŠ¤í‚¤ë§ˆ(ê³„ì•½)ë¡œ ìƒì„±ëëŠ”ì§€ (schema + schema_hash)
ì–´ë–¤ ì†ŒìŠ¤ì—ì„œ ìƒì„±ëëŠ”ì§€ (source)
ì–´ë–¤ ë²„ì „ìœ¼ë¡œ ì €ì¥ëëŠ”ì§€ (version)
ê²°ê³¼ë¬¼ì´ ì–´ë”” ìˆëŠ”ì§€ (feature_uri)

Feature Store ë„ì…ì„ ê³ ë¯¼í•˜ë©´ í”íˆ â€œFeastë¶€í„° ì¨ì•¼ í•˜ë‚˜?â€ê°€ ë¨¼ì € ë‚˜ì˜¤ëŠ”ë°,"><meta name=author content><link rel=canonical href=https://keonhoban.github.io/mlops-journey/posts/mlops-platform-feature-store/01/><link crossorigin=anonymous href=/mlops-journey/assets/css/stylesheet.f49d66caae9ea0fd43f21f29e71a8d3e284517ed770f2aa86fa012953ad3c9ef.css integrity="sha256-9J1myq6eoP1D8h8p5xqNPihFF+13Dyqob6ASlTrTye8=" rel="preload stylesheet" as=style><link rel=icon href=https://keonhoban.github.io/mlops-journey/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://keonhoban.github.io/mlops-journey/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://keonhoban.github.io/mlops-journey/favicon-32x32.png><link rel=apple-touch-icon href=https://keonhoban.github.io/mlops-journey/apple-touch-icon.png><link rel=mask-icon href=https://keonhoban.github.io/mlops-journey/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=en href=https://keonhoban.github.io/mlops-journey/posts/mlops-platform-feature-store/01/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:url" content="https://keonhoban.github.io/mlops-journey/posts/mlops-platform-feature-store/01/"><meta property="og:site_name" content="ğŸ”ï¸  MLOps Journey"><meta property="og:title" content="[Feature Store & Feast - Feature Store-lite]"><meta property="og:description" content="[Feature Store & Feast - Feature Store-lite] GitOpsë¡œ ê³„ì•½ ë°°í¬í•˜ê³ , Airflowë¡œ ìŠ¤í‚¤ë§ˆ ê¸°ë°˜ í”¼ì²˜ë¥¼ ìƒì„±í•´ S3ì— â€œë²„ì „í™” + ì¬í˜„ì„± ë©”íƒ€â€ë¡œ ì €ì¥í•˜ê¸° ğŸ§  ì‹œë‚˜ë¦¬ì˜¤ ì‹¤ë¬´ì—ì„œ Feature Storeì˜ ìŠ¹ë¶€ëŠ” â€œML ì„±ëŠ¥â€ì´ ì•„ë‹ˆë¼ ìš´ì˜ ì•ˆì •ì„±/ì¬í˜„ì„±ì—ì„œ ë¨¼ì € ê°ˆë¦½ë‹ˆë‹¤.
â€œì˜¤ëŠ˜ ë§Œë“  feature.csvâ€ê°€ ì•„ë‹ˆë¼, ì•„ë˜ê°€ ë°˜ë“œì‹œ ë‚¨ì•„ì•¼ ìš´ì˜ì´ ë©ë‹ˆë‹¤.
ì–¸ì œ ìƒì„±ëëŠ”ì§€ (generated_at) ì–´ë–¤ ìŠ¤í‚¤ë§ˆ(ê³„ì•½)ë¡œ ìƒì„±ëëŠ”ì§€ (schema + schema_hash) ì–´ë–¤ ì†ŒìŠ¤ì—ì„œ ìƒì„±ëëŠ”ì§€ (source) ì–´ë–¤ ë²„ì „ìœ¼ë¡œ ì €ì¥ëëŠ”ì§€ (version) ê²°ê³¼ë¬¼ì´ ì–´ë”” ìˆëŠ”ì§€ (feature_uri) Feature Store ë„ì…ì„ ê³ ë¯¼í•˜ë©´ í”íˆ â€œFeastë¶€í„° ì¨ì•¼ í•˜ë‚˜?â€ê°€ ë¨¼ì € ë‚˜ì˜¤ëŠ”ë°,"><meta property="og:locale" content="ko"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2026-01-14T17:10:21+09:00"><meta property="article:modified_time" content="2026-01-14T17:10:21+09:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="[Feature Store & Feast - Feature Store-lite]"><meta name=twitter:description content="[Feature Store & Feast - Feature Store-lite]
GitOpsë¡œ ê³„ì•½ ë°°í¬í•˜ê³ , Airflowë¡œ ìŠ¤í‚¤ë§ˆ ê¸°ë°˜ í”¼ì²˜ë¥¼ ìƒì„±í•´ S3ì— â€œë²„ì „í™” + ì¬í˜„ì„± ë©”íƒ€â€ë¡œ ì €ì¥í•˜ê¸°

ğŸ§  ì‹œë‚˜ë¦¬ì˜¤
ì‹¤ë¬´ì—ì„œ Feature Storeì˜ ìŠ¹ë¶€ëŠ” â€œML ì„±ëŠ¥â€ì´ ì•„ë‹ˆë¼ ìš´ì˜ ì•ˆì •ì„±/ì¬í˜„ì„±ì—ì„œ ë¨¼ì € ê°ˆë¦½ë‹ˆë‹¤.
â€œì˜¤ëŠ˜ ë§Œë“  feature.csvâ€ê°€ ì•„ë‹ˆë¼, ì•„ë˜ê°€ ë°˜ë“œì‹œ ë‚¨ì•„ì•¼ ìš´ì˜ì´ ë©ë‹ˆë‹¤.

ì–¸ì œ ìƒì„±ëëŠ”ì§€ (generated_at)
ì–´ë–¤ ìŠ¤í‚¤ë§ˆ(ê³„ì•½)ë¡œ ìƒì„±ëëŠ”ì§€ (schema + schema_hash)
ì–´ë–¤ ì†ŒìŠ¤ì—ì„œ ìƒì„±ëëŠ”ì§€ (source)
ì–´ë–¤ ë²„ì „ìœ¼ë¡œ ì €ì¥ëëŠ”ì§€ (version)
ê²°ê³¼ë¬¼ì´ ì–´ë”” ìˆëŠ”ì§€ (feature_uri)

Feature Store ë„ì…ì„ ê³ ë¯¼í•˜ë©´ í”íˆ â€œFeastë¶€í„° ì¨ì•¼ í•˜ë‚˜?â€ê°€ ë¨¼ì € ë‚˜ì˜¤ëŠ”ë°,"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://keonhoban.github.io/mlops-journey/posts/"},{"@type":"ListItem","position":2,"name":"[Feature Store \u0026 Feast - Feature Store-lite]","item":"https://keonhoban.github.io/mlops-journey/posts/mlops-platform-feature-store/01/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"[Feature Store \u0026 Feast - Feature Store-lite]","name":"[Feature Store \u0026 Feast - Feature Store-lite]","description":"[Feature Store \u0026amp; Feast - Feature Store-lite] GitOpsë¡œ ê³„ì•½ ë°°í¬í•˜ê³ , Airflowë¡œ ìŠ¤í‚¤ë§ˆ ê¸°ë°˜ í”¼ì²˜ë¥¼ ìƒì„±í•´ S3ì— â€œë²„ì „í™” + ì¬í˜„ì„± ë©”íƒ€â€ë¡œ ì €ì¥í•˜ê¸° ğŸ§  ì‹œë‚˜ë¦¬ì˜¤ ì‹¤ë¬´ì—ì„œ Feature Storeì˜ ìŠ¹ë¶€ëŠ” â€œML ì„±ëŠ¥â€ì´ ì•„ë‹ˆë¼ ìš´ì˜ ì•ˆì •ì„±/ì¬í˜„ì„±ì—ì„œ ë¨¼ì € ê°ˆë¦½ë‹ˆë‹¤.\nâ€œì˜¤ëŠ˜ ë§Œë“  feature.csvâ€ê°€ ì•„ë‹ˆë¼, ì•„ë˜ê°€ ë°˜ë“œì‹œ ë‚¨ì•„ì•¼ ìš´ì˜ì´ ë©ë‹ˆë‹¤.\nì–¸ì œ ìƒì„±ëëŠ”ì§€ (generated_at) ì–´ë–¤ ìŠ¤í‚¤ë§ˆ(ê³„ì•½)ë¡œ ìƒì„±ëëŠ”ì§€ (schema + schema_hash) ì–´ë–¤ ì†ŒìŠ¤ì—ì„œ ìƒì„±ëëŠ”ì§€ (source) ì–´ë–¤ ë²„ì „ìœ¼ë¡œ ì €ì¥ëëŠ”ì§€ (version) ê²°ê³¼ë¬¼ì´ ì–´ë”” ìˆëŠ”ì§€ (feature_uri) Feature Store ë„ì…ì„ ê³ ë¯¼í•˜ë©´ í”íˆ â€œFeastë¶€í„° ì¨ì•¼ í•˜ë‚˜?â€ê°€ ë¨¼ì € ë‚˜ì˜¤ëŠ”ë°,\n","keywords":[],"articleBody":"[Feature Store \u0026 Feast - Feature Store-lite] GitOpsë¡œ ê³„ì•½ ë°°í¬í•˜ê³ , Airflowë¡œ ìŠ¤í‚¤ë§ˆ ê¸°ë°˜ í”¼ì²˜ë¥¼ ìƒì„±í•´ S3ì— â€œë²„ì „í™” + ì¬í˜„ì„± ë©”íƒ€â€ë¡œ ì €ì¥í•˜ê¸° ğŸ§  ì‹œë‚˜ë¦¬ì˜¤ ì‹¤ë¬´ì—ì„œ Feature Storeì˜ ìŠ¹ë¶€ëŠ” â€œML ì„±ëŠ¥â€ì´ ì•„ë‹ˆë¼ ìš´ì˜ ì•ˆì •ì„±/ì¬í˜„ì„±ì—ì„œ ë¨¼ì € ê°ˆë¦½ë‹ˆë‹¤.\nâ€œì˜¤ëŠ˜ ë§Œë“  feature.csvâ€ê°€ ì•„ë‹ˆë¼, ì•„ë˜ê°€ ë°˜ë“œì‹œ ë‚¨ì•„ì•¼ ìš´ì˜ì´ ë©ë‹ˆë‹¤.\nì–¸ì œ ìƒì„±ëëŠ”ì§€ (generated_at) ì–´ë–¤ ìŠ¤í‚¤ë§ˆ(ê³„ì•½)ë¡œ ìƒì„±ëëŠ”ì§€ (schema + schema_hash) ì–´ë–¤ ì†ŒìŠ¤ì—ì„œ ìƒì„±ëëŠ”ì§€ (source) ì–´ë–¤ ë²„ì „ìœ¼ë¡œ ì €ì¥ëëŠ”ì§€ (version) ê²°ê³¼ë¬¼ì´ ì–´ë”” ìˆëŠ”ì§€ (feature_uri) Feature Store ë„ì…ì„ ê³ ë¯¼í•˜ë©´ í”íˆ â€œFeastë¶€í„° ì¨ì•¼ í•˜ë‚˜?â€ê°€ ë¨¼ì € ë‚˜ì˜¤ëŠ”ë°,\nì‹¤ë¬´ì—ì„œëŠ” ë„êµ¬ë³´ë‹¤ ë¨¼ì € í”¼ì²˜ ìƒì„±/ë²„ì „í™”/ì¬í˜„ ë°©ì‹ì´ ê³ ì •ë¼ì•¼ í•©ë‹ˆë‹¤.\nì´ ê¸€ì€ Feast í’€ë„ì… ì´ì „ ë‹¨ê³„ë¡œ, **Feature Store-lite ìµœì†Œ ìš”ê±´(ê³„ì•½/ë©”íƒ€/ë²„ì „í™”/ì¬í˜„ì„±)**ì„\nGitOps + Airflowë¡œ ë¨¼ì € ê³ ì •í•˜ëŠ” êµ¬ì¶•ì…ë‹ˆë‹¤.\nOnline Store / Serving ì—°ë™ì€ ì˜ë„ì ìœ¼ë¡œ ì œì™¸í–ˆìŠµë‹ˆë‹¤. ëŒ€ì‹  **ìš´ì˜ì—ì„œ í†µí•˜ëŠ” ë¼ˆëŒ€(Contract â†’ Pipeline â†’ Versioned Storage)**ë¶€í„° ë§Œë“­ë‹ˆë‹¤. ğŸ¯ ì´ ê¸€ì—ì„œ ë‹¬ì„±í•˜ëŠ” ê²ƒ (ì™„ë£Œ ê¸°ì¤€) GitOpsë¡œ ê³„ì•½ ë°°í¬ + Airflowë¡œ ìŠ¤í‚¤ë§ˆ ê¸°ë°˜ í”¼ì²˜ ìƒì„± + S3 ë²„ì „í™” ì €ì¥ + ì¬í˜„ì„± ë©”íƒ€ ë‚¨ê¹€\nâœ… í•µì‹¬ ìš”ì•½ dev/prod í™˜ê²½ ë¶„ë¦¬ airflow-dev, airflow-prod Feature Store-lite ê³„ì•½ ë¦¬ì†ŒìŠ¤ GitOps ë°°í¬ user_features.schema.json metadata.json.j2 ArgoCD Application (apps/feature-store-*.yaml) Airflowì— ConfigMap ë§ˆìš´íŠ¸ í‘œì¤€í™” /opt/airflow/feature-store/ DAGëŠ” ì–‡ê²Œ, ë¡œì§ì€ íŒ¨í‚¤ì§€ë¡œ ë¶„ë¦¬ DAG: ì—°ê²°ë§Œ (dag_data_pipeline_daily_v4.py) ë¡œì§: mlops_lib/dp/* S3 ë²„ì „í™” ì €ì¥ ê·œì¹™ ê³ ì • s3:///// features.csv, schema.json, metadata.json ì‹¤ì œ ìš´ì˜ ì´ìŠˆ í•´ê²° í¬í•¨ Airflow SDK/ë²„ì „ ì°¨ì´ë¡œ Variable.get(default_var=...) ê¹¨ì§ â†’ ì•ˆì „ íŒ¨í„´ ì ìš© .airflowignoreë¡œ ë¼ì´ë¸ŒëŸ¬ë¦¬ import ìŠ¤ìº” ì°¨ë‹¨ KubernetesExecutor Task Podì—ì„œë„ AWS credential chain ë™ì‘ í™•ì¸(ë§ˆìš´íŠ¸ ê¸°ë°˜) 1ï¸âƒ£ ì „ì²´ êµ¬ì¡° ì´ ê¸€ì—ì„œì˜ Feature Store-lite ë²”ìœ„ëŠ” ì•„ë˜ê¹Œì§€ì…ë‹ˆë‹¤.\nGitOpsë¡œ ë°°í¬ëœ ê³„ì•½ ë¦¬ì†ŒìŠ¤(schema/metadata template) Airflow íŒŒì´í”„ë¼ì¸ ì‹¤í–‰ S3ì— ë²„ì „í™” ì €ì¥ + ë©”íƒ€ë°ì´í„°ë¡œ ì¬í˜„ì„± í™•ë³´ Online Store / Serving / Feast ì—°ë™ì€ ë‹¤ìŒ ê¸€ì—ì„œ ë‹¤ë£¹ë‹ˆë‹¤.\n2ï¸âƒ£ ì½”ë“œ/ë¦¬ì†ŒìŠ¤ íŠ¸ë¦¬ (A) GitOps ë¦¬ì†ŒìŠ¤ mlops-infra-gitops/ envs/ dev/feature-store/feature-store-cm.yaml prod/feature-store/feature-store-cm.yaml (B) ArgoCD Application mlops-infra/ apps/ feature-store-dev.yaml feature-store-prod.yaml (C) Airflow DAG/ë¼ì´ë¸ŒëŸ¬ë¦¬ airflow-dags-dev/dags/ dag_data_pipeline_daily_v4.py# DAGëŠ” ì—°ê²°ë§Œ mlops_lib/ dp/ config.py s3.py feature_schema.py build.py store.py tasks.py .airflowignore# ë¼ì´ë¸ŒëŸ¬ë¦¬ ìŠ¤ìº” ì°¨ë‹¨ 3ï¸âƒ£ ì„¤ê³„ í¬ì¸íŠ¸ (ìš´ì˜ ê´€ì  í•µì‹¬) (1) â€œê³„ì•½(Contract)â€ì„ GitOpsë¡œ ë°°í¬í•œë‹¤ ìŠ¤í‚¤ë§ˆ/ë©”íƒ€ í…œí”Œë¦¿ì€ ì½”ë“œê°€ ì•„ë‹ˆë¼ ìš´ì˜ í‘œì¤€ ë¦¬ì†ŒìŠ¤ë¡œ ë‹¤ë¤˜ìŠµë‹ˆë‹¤.\nConfigMapìœ¼ë¡œ ê´€ë¦¬í•˜ê³  ArgoCDë¡œ dev/prodì— ë™ì¼ ë°°í¬ AirflowëŠ” íŒŒì¼ì„ ì½ê¸°ë§Œ í•˜ë„ë¡ êµ¬ì„± â†’ ì½”ë“œ ë³€ê²½ ìµœì†Œí™” (2) DAGëŠ” ì–‡ê²Œ, ë¡œì§ì€ íŒ¨í‚¤ì§€ë¡œ ë¶„ë¦¬í•œë‹¤ DAGê°€ ë‘êº¼ì›Œì§€ëŠ” ìˆœê°„ ìœ ì§€ë³´ìˆ˜/í…ŒìŠ¤íŠ¸/ì¬ì‚¬ìš©ì´ ë°”ë¡œ ê¹¨ì§‘ë‹ˆë‹¤.\në¡œì§ì„ mlops_lib/dp/*ë¡œ ë¶„ë¦¬í•˜ë©´ ë¡œì§ ë‹¨ìœ„ ìˆ˜ì •/ì¬ì‚¬ìš© ê°€ëŠ¥ í…ŒìŠ¤íŠ¸/ë¦¬íŒ©í„°ë§ì´ ì‰¬ì›€ DAGëŠ” íë¦„ë§Œ ìœ ì§€ (3) ë²„ì „í™” ì €ì¥ì€ â€œê¹Šì–´ì§€ëŠ” ê²ƒâ€ì´ ì•„ë‹ˆë¼ â€œí‘œì¤€í™”â€ë‹¤ ë²„ì „ ë””ë ‰í† ë¦¬ depthëŠ” 1ë‹¨ ê³ ì •ì´ ìš´ì˜ì—ì„œ ê°€ì¥ ì•ˆì „í•©ë‹ˆë‹¤.\nâœ… ê¶Œì¥: s3:///// âŒ í”í•œ ì‹¤íŒ¨: ë‚ ì§œ/ì‹¤í–‰ID/íƒœìŠ¤í¬IDë¥¼ ì„ì–´ depth í­ë°œ â€œìµœì‹ ì´ ë¬´ì—‡ì¸ì§€â€ê°€ ì• ë§¤í•´ì§ 4ï¸âƒ£ Contract ë¦¬ì†ŒìŠ¤ GitOps ë°°í¬ + Airflow ë§ˆìš´íŠ¸ ConfigMapìœ¼ë¡œ ê³„ì•½ ë¦¬ì†ŒìŠ¤ë¥¼ ë¶„ë¦¬í•´ GitOpsë¡œ ë°°í¬í•©ë‹ˆë‹¤.\napiVersion: v1 kind: ConfigMap metadata: name: feature-store-resources namespace: airflow-dev data: user_features.schema.json: | { \"feature_set\": \"user_features\", \"version\": \"v1\", \"columns\": [ {\"name\": \"user_id\", \"type\": \"int64\"}, {\"name\": \"f_total_events_7d\", \"type\": \"int64\"} ], \"primary_keys\": [\"user_id\"] } metadata.json.j2: | { \"feature_set\": \"{{ feature_set }}\", \"version\": \"{{ version }}\", \"generated_at\": \"{{ generated_at }}\", \"schema_hash\": \"{{ schema_hash }}\", \"feature_uri\": \"{{ feature_uri }}\" } Airflow êµ¬ì„±ìš”ì†Œì— ë™ì¼í•˜ê²Œ ë§ˆìš´íŠ¸í•˜ê³ , mountPathë¥¼ í‘œì¤€í™”í•©ë‹ˆë‹¤.\n/opt/airflow/feature-store/ user_features.schema.json metadata.json.j2 5ï¸âƒ£ ì¬í˜„ì„±ì˜ í•µì‹¬: schema_hash ìŠ¤í‚¤ë§ˆëŠ” â€œê³„ì•½ì„œâ€ì´ê³ , schema_hashëŠ” â€œì„œëª…â€ì…ë‹ˆë‹¤.\nì´ í•´ì‹œê°€ ìˆì–´ì•¼ â€œê·¸ë•Œ ê·¸ ìŠ¤í‚¤ë§ˆë¡œ ë§Œë“  í”¼ì²˜â€ë¥¼ ì‹œìŠ¤í…œì ìœ¼ë¡œ ì¦ëª…í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n# dags/mlops_lib/dp/feature_schema.py import json, hashlib def load_schema(schema_path: str, expected_feature_set: str) -\u003e tuple[dict, str]: with open(schema_path, \"r\", encoding=\"utf-8\") as f: schema = json.load(f) if schema.get(\"feature_set\") != expected_feature_set: raise ValueError(f\"schema mismatch: {schema.get('feature_set')} != {expected_feature_set}\") canonical = json.dumps(schema, ensure_ascii=False, sort_keys=True, separators=(\",\", \":\")).encode(\"utf-8\") schema_hash = hashlib.sha256(canonical).hexdigest() return schema, schema_hash 6ï¸âƒ£ Airflow íŒŒì´í”„ë¼ì¸ íë¦„ ì›ì¹™: DAGëŠ” ì—°ê²°ë§Œ ë‹´ë‹¹í•œë‹¤ # dags/dag_data_pipeline_daily_v4.py (ìš”ì•½) with DAG( dag_id=\"data_pipeline_daily_dev_v4\", schedule=None, catchup=False, max_active_runs=1, tags=[\"data-pipeline\", \"dev\", \"mlops\"], on_failure_callback=alert_slack, ) as dag: t1 = PythonOperator(task_id=\"extract_raw_data\", python_callable=task_extract_raw_data) t2 = PythonOperator(task_id=\"validate_data\", python_callable=task_validate_data) t3 = PythonOperator(task_id=\"build_features\", python_callable=task_build_features) t4 = PythonOperator(task_id=\"store_features\", python_callable=task_store_features) t5 = PythonOperator(task_id=\"summarize_run\", python_callable=task_summarize_run, trigger_rule=TriggerRule.ALL_DONE) t1 \u003e\u003e t2 \u003e\u003e t3 \u003e\u003e t4 \u003e\u003e t5 ì‹¤í–‰ ë‹¨ê³„ extract_raw_data: RAW S3 ê°ì²´ ì¡´ì¬ í™•ì¸ + source ê²½ë¡œ XCom ê¸°ë¡ validate_data: ìµœì†Œ ê²€ì¦(ë¹ˆ ë°ì´í„° ë°©ì§€) build_features: schema ë¡œë“œ + schema_hash ìƒì„± + CSV ìƒì„±(ìŠ¤í‚¤ë§ˆ ìˆœì„œ ì¤€ìˆ˜) store_features: ë²„ì „ ìƒì„± í›„ S3ì— 3íŒŒì¼ ì„¸íŠ¸ ì €ì¥ summarize_run: ìµœì¢… prefix/version/uri ë¡œê·¸ ë‚¨ê¹€ 7ï¸âƒ£ S3 ì €ì¥ ê·œì¹™: â€œë²„ì „ 1ë‹¨ + 3íŒŒì¼ ì„¸íŠ¸â€ ì‹¤ë¬´ì—ì„œ ê°€ì¥ ì¤‘ìš”í•œ ê³ ì • ê·œì¹™ì…ë‹ˆë‹¤.\nfeatures.csv schema.json metadata.json # dags/mlops_lib/dp/store.py (í•µì‹¬) def store_features(feature_base: str, pipeline_name: str, feature_set: str, metadata_tpl_path: str, ti): ... ver = _version_id(getattr(ti, \"execution_date\", None)) prefix = prefix.rstrip(\"/\") + f\"/{feature_set}/{ver}/\" feature_uri = f\"s3://{bkt}/{prefix}features.csv\" meta = tpl.render( version=ver, generated_at=datetime.now(KST).isoformat(), source=source_raw, pipeline=pipeline_name, schema_hash=schema_hash, feature_uri=feature_uri, feature_set=feature_set, ) s3.put_object(... Key=f\"{prefix}features.csv\", Body=features_csv.encode(\"utf-8\")) s3.put_object(... Key=f\"{prefix}schema.json\", Body=json.dumps(schema, ...).encode(\"utf-8\")) s3.put_object(... Key=f\"{prefix}metadata.json\", Body=meta.encode(\"utf-8\")) 8ï¸âƒ£ ê²€ì¦ ì²´í¬ë¦¬ìŠ¤íŠ¸ (ìš´ì˜í˜•) ArgoCDì—ì„œ feature-store-dev, feature-store-prod Synced/Healthy Airflow Pod ë‚´ë¶€ íŒŒì¼ ì¡´ì¬ í™•ì¸ /opt/airflow/feature-store/user_features.schema.json /opt/airflow/feature-store/metadata.json.j2 DAG ì‹¤í–‰ ì„±ê³µ S3ì— ë²„ì „í™” prefix ìƒì„± í™•ì¸ ë™ì¼ prefixì— 3ê°œ íŒŒì¼ ì¡´ì¬ features.csv, schema.json, metadata.json metadata.json ê°’ ì±„ì›Œì§ schema_hash, feature_uri, generated_at, source KubernetesExecutor Task Podì—ì„œ AWS credential chain ì •ìƒ ë™ì‘ 9ï¸âƒ£ íŠ¸ëŸ¬ë¸”ìŠˆíŒ… (ì´ë²ˆ êµ¬ì¶•ì—ì„œ ì‹¤ì œë¡œ ê±¸ë¦° ì§€ì ) (1) ArgoCD Application apply ì—ëŸ¬: spec.orphanedResources CRD ë²„ì „ì— ë”°ë¼ í•„ë“œê°€ ì—†ì–´ì„œ strict decode ì‹¤íŒ¨ í•´ê²°: í•´ë‹¹ í•„ë“œ ì œê±°(ë˜ëŠ” ArgoCD ë²„ì „ê³¼ ìŠ¤í™ ì •í•© ë§ì¶”ê¸°) (2) Task Podì—ì„œ Variable.get(default_var=...) ì—ëŸ¬ ì—ëŸ¬: unexpected keyword argument 'default_var' ì›ì¸: Airflow ë²„ì „/SDK ì°¨ì´ í•´ê²°: ì˜ˆì™¸ ì²˜ë¦¬ë¡œ ì•ˆì „í™” def _get_var(key: str, default: str) -\u003e str: try: return Variable.get(key) except Exception: return default (3) mlops_lib ë¶„ë¦¬ í›„ import ì—ëŸ¬ Airflowê°€ ë¼ì´ë¸ŒëŸ¬ë¦¬ íŒŒì¼ê¹Œì§€ DAGì²˜ëŸ¼ ìŠ¤ìº”í•˜ë©´ì„œ importê°€ ê¹¨ì§ í•´ê²°: .airflowignoreë¡œ ìŠ¤ìº” ì°¨ë‹¨ mlops_lib/ (4) KubernetesExecutor ë¡œê·¸ ì¶”ì  ë‚œì´ë„ Task Podê°€ ì§§ê²Œ ì˜¬ë¼ì™”ë‹¤ê°€ ì‚¬ë¼ì§ ì‹¤ë¬´ íŒ: Airflow UI ë¡œê·¸ + remote logging(ê¶Œì¥) ë˜ëŠ” ë¹ ë¥´ê²Œ kubectl logs -fë¡œ ì¶”ì  ğŸ§© ì‹¤ë¬´ íŒ Feature Store-liteì˜ í•µì‹¬ì€ â€œí”¼ì²˜ ìƒì„±â€ì´ ì•„ë‹ˆë¼ ì¬í˜„ì„±ì…ë‹ˆë‹¤.\nschema.json + schema_hash + metadata.jsonì´ ê°™ì´ ë‚¨ì•„ì•¼ ìš´ì˜ì´ ë©ë‹ˆë‹¤. DAG íŒŒì¼ì€ ë¬´ì¡°ê±´ ì–‡ê²Œ ìœ ì§€í•˜ì„¸ìš”.\nDAGê°€ ë‘êº¼ì›Œì§€ë©´ â€œìˆ˜ì •ì´ ë¬´ì„œìš´ ë©ì–´ë¦¬â€ê°€ ë©ë‹ˆë‹¤. .airflowignoreëŠ” ë¼ì´ë¸ŒëŸ¬ë¦¬ ë¶„ë¦¬ì˜ í•„ìˆ˜ ì¥ì¹˜ì…ë‹ˆë‹¤.\në¼ì´ë¸ŒëŸ¬ë¦¬ ìŠ¤ìº”/ì„í¬íŠ¸ ì´ìŠˆì˜ ìƒë‹¹ìˆ˜ë¥¼ ì—¬ê¸°ì„œ ë§‰ìŠµë‹ˆë‹¤. AWS ì—°ê²°ì€ Airflow Connectionì´ ì •ì„ì´ì§€ë§Œ,\nì‹¤ìŠµ/ì˜¨í”„ë ˆë¯¸ìŠ¤ì—ì„œëŠ” shared credentials mountë„ í˜„ì‹¤ì ì¸ ì„ íƒì…ë‹ˆë‹¤.\në‹¨, Task Podê¹Œì§€ mount ì „íŒŒ ê²€ì¦ì´ í•„ìˆ˜ì…ë‹ˆë‹¤.\nğŸ”§ MLOps ì‹¤ì „ ì—°ê²° ì´ ë‹¨ê³„ê°€ ì‹¤ë¬´ì ìœ¼ë¡œ ê°€ì¹˜ ìˆëŠ” ì´ìœ ëŠ” â€œë‹¤ìŒ ë‹¨ê³„ê°€ ìì—°ìŠ¤ëŸ½ê²Œ ì—´ë¦¬ê¸° ë•Œë¬¸â€ì…ë‹ˆë‹¤.\ní™•ì¥ 1) Training íŒŒì´í”„ë¼ì¸ ì—°ë™ í•™ìŠµì´ S3ì˜ íŠ¹ì • versionì„ ë°›ì•„ ì‹¤í–‰ â€œì´ë²ˆ í•™ìŠµì€ ì–´ë–¤ feature versionìœ¼ë¡œ í–ˆëŠ”ê°€?â€ê°€ ìë™ ì—°ê²° í™•ì¥ 2) Online Store / Serving ì—°ë™ feature_set + version + schema_hashëŠ” ê·¸ëŒ€ë¡œ servingìœ¼ë¡œ ì´ì–´ì§ í™•ì¥ 3) Schema drift ê°ì§€ validate ë‹¨ê³„ í™•ì¥ìœ¼ë¡œ drift ì°¨ë‹¨/ì•Œë¦¼ê¹Œì§€ ìì—°ìŠ¤ëŸ½ê²Œ ì—°ê²° ğŸ ì •ë¦¬ ì´ë²ˆ êµ¬ì¶•ì€ Feature Store-liteì˜ ìµœì†Œ ìš”ê±´(ê³„ì•½/ë©”íƒ€/ë²„ì „í™”/ì¬í˜„ì„±)ì„\nGitOps(ArgoCD) + Airflow(KubernetesExecutor)ë¡œ ê³ ì •í•œ ì‘ì—…ì…ë‹ˆë‹¤.\nê²°ê³¼ì ìœ¼ë¡œ S3ì—ëŠ” ë²„ì „í™”ëœ prefix ì•„ë˜ì— í•­ìƒ 3íŒŒì¼ ì„¸íŠ¸ê°€ í•¨ê»˜ ì €ì¥ë©ë‹ˆë‹¤.\nfeatures.csv schema.json metadata.json ì´ì œ â€œì–¸ì œ/ë¬´ìŠ¨ ìŠ¤í‚¤ë§ˆë¡œ/ì–´ë–¤ ì†ŒìŠ¤ì—ì„œ/ì–´ë–¤ ë²„ì „ìœ¼ë¡œ ìƒì„±ëëŠ”ì§€â€ê°€ ë‚¨ëŠ”\nìš´ì˜ ê°€ëŠ¥í•œ í”¼ì²˜ ì €ì¥ì†Œì˜ ë¼ˆëŒ€ê°€ ì™„ì„±ëìŠµë‹ˆë‹¤.\n","wordCount":"979","inLanguage":"en","datePublished":"2026-01-14T17:10:21+09:00","dateModified":"2026-01-14T17:10:21+09:00","mainEntityOfPage":{"@type":"WebPage","@id":"https://keonhoban.github.io/mlops-journey/posts/mlops-platform-feature-store/01/"},"publisher":{"@type":"Organization","name":"ğŸ”ï¸  MLOps Journey","logo":{"@type":"ImageObject","url":"https://keonhoban.github.io/mlops-journey/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://keonhoban.github.io/mlops-journey/ accesskey=h title="ğŸ”ï¸  MLOps Journey (Alt + H)">ğŸ”ï¸ MLOps Journey</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)" aria-label="Toggle theme"><svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://keonhoban.github.io/mlops-journey/ title="ğŸ  Home"><span>ğŸ  Home</span></a></li><li><a href=https://keonhoban.github.io/mlops-journey/projects/ title="ğŸ“‚ Projects"><span>ğŸ“‚ Projects</span></a></li><li><a href=https://keonhoban.github.io/mlops-journey/posts/ title="ğŸ“ Blog"><span>ğŸ“ Blog</span></a></li><li><a href=https://keonhoban.github.io/mlops-journey/about/ title="ğŸ§— About"><span>ğŸ§— About</span></a></li><li><a href=https://keonhoban.github.io/mlops-journey/categories/ title="ğŸ“– Categories"><span>ğŸ“– Categories</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://keonhoban.github.io/mlops-journey/>Home</a>&nbsp;Â»&nbsp;<a href=https://keonhoban.github.io/mlops-journey/posts/>Posts</a></div><h1 class="post-title entry-hint-parent">[Feature Store & Feast - Feature Store-lite]</h1><div class=post-meta><span title='2026-01-14 17:10:21 +0900 +0900'>January 14, 2026</span>&nbsp;Â·&nbsp;5 min</div></header><div class=post-content><h1 id=feature-store--feast---feature-store-lite>[Feature Store & Feast - Feature Store-lite]<a hidden class=anchor aria-hidden=true href=#feature-store--feast---feature-store-lite>#</a></h1><h2 id=gitopsë¡œ-ê³„ì•½-ë°°í¬í•˜ê³ -airflowë¡œ-ìŠ¤í‚¤ë§ˆ-ê¸°ë°˜-í”¼ì²˜ë¥¼-ìƒì„±í•´-s3ì—-ë²„ì „í™”--ì¬í˜„ì„±-ë©”íƒ€ë¡œ-ì €ì¥í•˜ê¸°>GitOpsë¡œ ê³„ì•½ ë°°í¬í•˜ê³ , Airflowë¡œ ìŠ¤í‚¤ë§ˆ ê¸°ë°˜ í”¼ì²˜ë¥¼ ìƒì„±í•´ S3ì— â€œë²„ì „í™” + ì¬í˜„ì„± ë©”íƒ€â€ë¡œ ì €ì¥í•˜ê¸°<a hidden class=anchor aria-hidden=true href=#gitopsë¡œ-ê³„ì•½-ë°°í¬í•˜ê³ -airflowë¡œ-ìŠ¤í‚¤ë§ˆ-ê¸°ë°˜-í”¼ì²˜ë¥¼-ìƒì„±í•´-s3ì—-ë²„ì „í™”--ì¬í˜„ì„±-ë©”íƒ€ë¡œ-ì €ì¥í•˜ê¸°>#</a></h2><hr><h2 id=-ì‹œë‚˜ë¦¬ì˜¤>ğŸ§  ì‹œë‚˜ë¦¬ì˜¤<a hidden class=anchor aria-hidden=true href=#-ì‹œë‚˜ë¦¬ì˜¤>#</a></h2><p>ì‹¤ë¬´ì—ì„œ Feature Storeì˜ ìŠ¹ë¶€ëŠ” â€œML ì„±ëŠ¥â€ì´ ì•„ë‹ˆë¼ <strong>ìš´ì˜ ì•ˆì •ì„±/ì¬í˜„ì„±</strong>ì—ì„œ ë¨¼ì € ê°ˆë¦½ë‹ˆë‹¤.</p><p>â€œì˜¤ëŠ˜ ë§Œë“  feature.csvâ€ê°€ ì•„ë‹ˆë¼, ì•„ë˜ê°€ <strong>ë°˜ë“œì‹œ ë‚¨ì•„ì•¼</strong> ìš´ì˜ì´ ë©ë‹ˆë‹¤.</p><ul><li>ì–¸ì œ ìƒì„±ëëŠ”ì§€ (generated_at)</li><li>ì–´ë–¤ ìŠ¤í‚¤ë§ˆ(ê³„ì•½)ë¡œ ìƒì„±ëëŠ”ì§€ (schema + schema_hash)</li><li>ì–´ë–¤ ì†ŒìŠ¤ì—ì„œ ìƒì„±ëëŠ”ì§€ (source)</li><li>ì–´ë–¤ ë²„ì „ìœ¼ë¡œ ì €ì¥ëëŠ”ì§€ (version)</li><li>ê²°ê³¼ë¬¼ì´ ì–´ë”” ìˆëŠ”ì§€ (feature_uri)</li></ul><p>Feature Store ë„ì…ì„ ê³ ë¯¼í•˜ë©´ í”íˆ â€œFeastë¶€í„° ì¨ì•¼ í•˜ë‚˜?â€ê°€ ë¨¼ì € ë‚˜ì˜¤ëŠ”ë°,</p><p>ì‹¤ë¬´ì—ì„œëŠ” ë„êµ¬ë³´ë‹¤ ë¨¼ì € <strong>í”¼ì²˜ ìƒì„±/ë²„ì „í™”/ì¬í˜„ ë°©ì‹ì´ ê³ ì •</strong>ë¼ì•¼ í•©ë‹ˆë‹¤.</p><p>ì´ ê¸€ì€ Feast í’€ë„ì… ì´ì „ ë‹¨ê³„ë¡œ, **Feature Store-lite ìµœì†Œ ìš”ê±´(ê³„ì•½/ë©”íƒ€/ë²„ì „í™”/ì¬í˜„ì„±)**ì„</p><p>GitOps + Airflowë¡œ ë¨¼ì € ê³ ì •í•˜ëŠ” êµ¬ì¶•ì…ë‹ˆë‹¤.</p><ul><li>Online Store / Serving ì—°ë™ì€ ì˜ë„ì ìœ¼ë¡œ ì œì™¸í–ˆìŠµë‹ˆë‹¤.</li><li>ëŒ€ì‹  **ìš´ì˜ì—ì„œ í†µí•˜ëŠ” ë¼ˆëŒ€(Contract â†’ Pipeline â†’ Versioned Storage)**ë¶€í„° ë§Œë“­ë‹ˆë‹¤.</li></ul><hr><h2 id=-ì´-ê¸€ì—ì„œ-ë‹¬ì„±í•˜ëŠ”-ê²ƒ-ì™„ë£Œ-ê¸°ì¤€>ğŸ¯ ì´ ê¸€ì—ì„œ ë‹¬ì„±í•˜ëŠ” ê²ƒ (ì™„ë£Œ ê¸°ì¤€)<a hidden class=anchor aria-hidden=true href=#-ì´-ê¸€ì—ì„œ-ë‹¬ì„±í•˜ëŠ”-ê²ƒ-ì™„ë£Œ-ê¸°ì¤€>#</a></h2><p><strong>GitOpsë¡œ ê³„ì•½ ë°°í¬ + Airflowë¡œ ìŠ¤í‚¤ë§ˆ ê¸°ë°˜ í”¼ì²˜ ìƒì„± + S3 ë²„ì „í™” ì €ì¥ + ì¬í˜„ì„± ë©”íƒ€ ë‚¨ê¹€</strong></p><hr><h2 id=-í•µì‹¬-ìš”ì•½>âœ… í•µì‹¬ ìš”ì•½<a hidden class=anchor aria-hidden=true href=#-í•µì‹¬-ìš”ì•½>#</a></h2><ul><li><strong>dev/prod í™˜ê²½ ë¶„ë¦¬</strong><ul><li><code>airflow-dev</code>, <code>airflow-prod</code></li></ul></li><li><strong>Feature Store-lite ê³„ì•½ ë¦¬ì†ŒìŠ¤ GitOps ë°°í¬</strong><ul><li><code>user_features.schema.json</code></li><li><code>metadata.json.j2</code></li><li>ArgoCD Application (<code>apps/feature-store-*.yaml</code>)</li></ul></li><li><strong>Airflowì— ConfigMap ë§ˆìš´íŠ¸ í‘œì¤€í™”</strong><ul><li><code>/opt/airflow/feature-store/</code></li></ul></li><li><strong>DAGëŠ” ì–‡ê²Œ, ë¡œì§ì€ íŒ¨í‚¤ì§€ë¡œ ë¶„ë¦¬</strong><ul><li>DAG: ì—°ê²°ë§Œ (<code>dag_data_pipeline_daily_v4.py</code>)</li><li>ë¡œì§: <code>mlops_lib/dp/*</code></li></ul></li><li><strong>S3 ë²„ì „í™” ì €ì¥ ê·œì¹™ ê³ ì •</strong><ul><li><code>s3://&lt;feature_base>/&lt;feature_set>/&lt;version>/</code><ul><li><code>features.csv</code>, <code>schema.json</code>, <code>metadata.json</code></li></ul></li></ul></li><li><strong>ì‹¤ì œ ìš´ì˜ ì´ìŠˆ í•´ê²° í¬í•¨</strong><ul><li>Airflow SDK/ë²„ì „ ì°¨ì´ë¡œ <code>Variable.get(default_var=...)</code> ê¹¨ì§ â†’ ì•ˆì „ íŒ¨í„´ ì ìš©</li><li><code>.airflowignore</code>ë¡œ ë¼ì´ë¸ŒëŸ¬ë¦¬ import ìŠ¤ìº” ì°¨ë‹¨</li><li>KubernetesExecutor Task Podì—ì„œë„ AWS credential chain ë™ì‘ í™•ì¸(ë§ˆìš´íŠ¸ ê¸°ë°˜)</li></ul></li></ul><hr><h2 id=1-ì „ì²´-êµ¬ì¡°>1ï¸âƒ£ ì „ì²´ êµ¬ì¡°<a hidden class=anchor aria-hidden=true href=#1-ì „ì²´-êµ¬ì¡°>#</a></h2><p><img alt=mermaid-feature-store-01.png loading=lazy src=/mlops-journey/images/mermaid-feature-store-01.png></p><p>ì´ ê¸€ì—ì„œì˜ Feature Store-lite ë²”ìœ„ëŠ” ì•„ë˜ê¹Œì§€ì…ë‹ˆë‹¤.</p><ul><li>GitOpsë¡œ ë°°í¬ëœ <strong>ê³„ì•½ ë¦¬ì†ŒìŠ¤(schema/metadata template)</strong></li><li>Airflow íŒŒì´í”„ë¼ì¸ ì‹¤í–‰</li><li>S3ì— <strong>ë²„ì „í™” ì €ì¥ + ë©”íƒ€ë°ì´í„°ë¡œ ì¬í˜„ì„± í™•ë³´</strong></li></ul><p>Online Store / Serving / Feast ì—°ë™ì€ ë‹¤ìŒ ê¸€ì—ì„œ ë‹¤ë£¹ë‹ˆë‹¤.</p><hr><h2 id=2-ì½”ë“œë¦¬ì†ŒìŠ¤-íŠ¸ë¦¬>2ï¸âƒ£ ì½”ë“œ/ë¦¬ì†ŒìŠ¤ íŠ¸ë¦¬<a hidden class=anchor aria-hidden=true href=#2-ì½”ë“œë¦¬ì†ŒìŠ¤-íŠ¸ë¦¬>#</a></h2><h3 id=a-gitops-ë¦¬ì†ŒìŠ¤>(A) GitOps ë¦¬ì†ŒìŠ¤<a hidden class=anchor aria-hidden=true href=#a-gitops-ë¦¬ì†ŒìŠ¤>#</a></h3><pre tabindex=0><code>mlops-infra-gitops/
  envs/
    dev/feature-store/feature-store-cm.yaml
    prod/feature-store/feature-store-cm.yaml
</code></pre><h3 id=b-argocd-application>(B) ArgoCD Application<a hidden class=anchor aria-hidden=true href=#b-argocd-application>#</a></h3><pre tabindex=0><code>mlops-infra/
  apps/
    feature-store-dev.yaml
    feature-store-prod.yaml
</code></pre><h3 id=c-airflow-dagë¼ì´ë¸ŒëŸ¬ë¦¬>(C) Airflow DAG/ë¼ì´ë¸ŒëŸ¬ë¦¬<a hidden class=anchor aria-hidden=true href=#c-airflow-dagë¼ì´ë¸ŒëŸ¬ë¦¬>#</a></h3><pre tabindex=0><code>airflow-dags-dev/dags/
  dag_data_pipeline_daily_v4.py# DAGëŠ” ì—°ê²°ë§Œ
  mlops_lib/
    dp/
      config.py
      s3.py
      feature_schema.py
      build.py
      store.py
      tasks.py
  .airflowignore# ë¼ì´ë¸ŒëŸ¬ë¦¬ ìŠ¤ìº” ì°¨ë‹¨
</code></pre><hr><h2 id=3-ì„¤ê³„-í¬ì¸íŠ¸-ìš´ì˜-ê´€ì -í•µì‹¬>3ï¸âƒ£ ì„¤ê³„ í¬ì¸íŠ¸ (ìš´ì˜ ê´€ì  í•µì‹¬)<a hidden class=anchor aria-hidden=true href=#3-ì„¤ê³„-í¬ì¸íŠ¸-ìš´ì˜-ê´€ì -í•µì‹¬>#</a></h2><h3 id=1-ê³„ì•½contractì„-gitopsë¡œ-ë°°í¬í•œë‹¤>(1) â€œê³„ì•½(Contract)â€ì„ GitOpsë¡œ ë°°í¬í•œë‹¤<a hidden class=anchor aria-hidden=true href=#1-ê³„ì•½contractì„-gitopsë¡œ-ë°°í¬í•œë‹¤>#</a></h3><p>ìŠ¤í‚¤ë§ˆ/ë©”íƒ€ í…œí”Œë¦¿ì€ ì½”ë“œê°€ ì•„ë‹ˆë¼ <strong>ìš´ì˜ í‘œì¤€ ë¦¬ì†ŒìŠ¤</strong>ë¡œ ë‹¤ë¤˜ìŠµë‹ˆë‹¤.</p><ul><li>ConfigMapìœ¼ë¡œ ê´€ë¦¬í•˜ê³  ArgoCDë¡œ dev/prodì— ë™ì¼ ë°°í¬</li><li>AirflowëŠ” íŒŒì¼ì„ ì½ê¸°ë§Œ í•˜ë„ë¡ êµ¬ì„± â†’ ì½”ë“œ ë³€ê²½ ìµœì†Œí™”</li></ul><h3 id=2-dagëŠ”-ì–‡ê²Œ-ë¡œì§ì€-íŒ¨í‚¤ì§€ë¡œ-ë¶„ë¦¬í•œë‹¤>(2) DAGëŠ” ì–‡ê²Œ, ë¡œì§ì€ íŒ¨í‚¤ì§€ë¡œ ë¶„ë¦¬í•œë‹¤<a hidden class=anchor aria-hidden=true href=#2-dagëŠ”-ì–‡ê²Œ-ë¡œì§ì€-íŒ¨í‚¤ì§€ë¡œ-ë¶„ë¦¬í•œë‹¤>#</a></h3><p>DAGê°€ ë‘êº¼ì›Œì§€ëŠ” ìˆœê°„ ìœ ì§€ë³´ìˆ˜/í…ŒìŠ¤íŠ¸/ì¬ì‚¬ìš©ì´ ë°”ë¡œ ê¹¨ì§‘ë‹ˆë‹¤.</p><ul><li>ë¡œì§ì„ <code>mlops_lib/dp/*</code>ë¡œ ë¶„ë¦¬í•˜ë©´<ul><li>ë¡œì§ ë‹¨ìœ„ ìˆ˜ì •/ì¬ì‚¬ìš© ê°€ëŠ¥</li><li>í…ŒìŠ¤íŠ¸/ë¦¬íŒ©í„°ë§ì´ ì‰¬ì›€</li><li>DAGëŠ” íë¦„ë§Œ ìœ ì§€</li></ul></li></ul><h3 id=3-ë²„ì „í™”-ì €ì¥ì€-ê¹Šì–´ì§€ëŠ”-ê²ƒì´-ì•„ë‹ˆë¼-í‘œì¤€í™”ë‹¤>(3) ë²„ì „í™” ì €ì¥ì€ â€œê¹Šì–´ì§€ëŠ” ê²ƒâ€ì´ ì•„ë‹ˆë¼ â€œí‘œì¤€í™”â€ë‹¤<a hidden class=anchor aria-hidden=true href=#3-ë²„ì „í™”-ì €ì¥ì€-ê¹Šì–´ì§€ëŠ”-ê²ƒì´-ì•„ë‹ˆë¼-í‘œì¤€í™”ë‹¤>#</a></h3><p>ë²„ì „ ë””ë ‰í† ë¦¬ depthëŠ” <strong>1ë‹¨ ê³ ì •</strong>ì´ ìš´ì˜ì—ì„œ ê°€ì¥ ì•ˆì „í•©ë‹ˆë‹¤.</p><ul><li>âœ… ê¶Œì¥:<ul><li><code>s3://&lt;feature_base>/&lt;feature_set>/&lt;version>/</code></li></ul></li><li>âŒ í”í•œ ì‹¤íŒ¨:<ul><li>ë‚ ì§œ/ì‹¤í–‰ID/íƒœìŠ¤í¬IDë¥¼ ì„ì–´ depth í­ë°œ</li><li>â€œìµœì‹ ì´ ë¬´ì—‡ì¸ì§€â€ê°€ ì• ë§¤í•´ì§</li></ul></li></ul><hr><h2 id=4-contract-ë¦¬ì†ŒìŠ¤-gitops-ë°°í¬--airflow-ë§ˆìš´íŠ¸>4ï¸âƒ£ Contract ë¦¬ì†ŒìŠ¤ GitOps ë°°í¬ + Airflow ë§ˆìš´íŠ¸<a hidden class=anchor aria-hidden=true href=#4-contract-ë¦¬ì†ŒìŠ¤-gitops-ë°°í¬--airflow-ë§ˆìš´íŠ¸>#</a></h2><p>ConfigMapìœ¼ë¡œ ê³„ì•½ ë¦¬ì†ŒìŠ¤ë¥¼ ë¶„ë¦¬í•´ GitOpsë¡œ ë°°í¬í•©ë‹ˆë‹¤.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#f92672>apiVersion</span>: <span style=color:#ae81ff>v1</span>
</span></span><span style=display:flex><span><span style=color:#f92672>kind</span>: <span style=color:#ae81ff>ConfigMap</span>
</span></span><span style=display:flex><span><span style=color:#f92672>metadata</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>name</span>: <span style=color:#ae81ff>feature-store-resources</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>namespace</span>: <span style=color:#ae81ff>airflow-dev</span>
</span></span><span style=display:flex><span><span style=color:#f92672>data</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>user_features.schema.json</span>: |<span style=color:#e6db74>
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    {
</span></span></span><span style=display:flex><span><span style=color:#e6db74>      &#34;feature_set&#34;: &#34;user_features&#34;,
</span></span></span><span style=display:flex><span><span style=color:#e6db74>      &#34;version&#34;: &#34;v1&#34;,
</span></span></span><span style=display:flex><span><span style=color:#e6db74>      &#34;columns&#34;: [
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        {&#34;name&#34;: &#34;user_id&#34;, &#34;type&#34;: &#34;int64&#34;},
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        {&#34;name&#34;: &#34;f_total_events_7d&#34;, &#34;type&#34;: &#34;int64&#34;}
</span></span></span><span style=display:flex><span><span style=color:#e6db74>      ],
</span></span></span><span style=display:flex><span><span style=color:#e6db74>      &#34;primary_keys&#34;: [&#34;user_id&#34;]
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    }</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>metadata.json.j2</span>: |<span style=color:#e6db74>
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    {
</span></span></span><span style=display:flex><span><span style=color:#e6db74>      &#34;feature_set&#34;: &#34;{{ feature_set }}&#34;,
</span></span></span><span style=display:flex><span><span style=color:#e6db74>      &#34;version&#34;: &#34;{{ version }}&#34;,
</span></span></span><span style=display:flex><span><span style=color:#e6db74>      &#34;generated_at&#34;: &#34;{{ generated_at }}&#34;,
</span></span></span><span style=display:flex><span><span style=color:#e6db74>      &#34;schema_hash&#34;: &#34;{{ schema_hash }}&#34;,
</span></span></span><span style=display:flex><span><span style=color:#e6db74>      &#34;feature_uri&#34;: &#34;{{ feature_uri }}&#34;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    }</span>
</span></span></code></pre></div><p>Airflow êµ¬ì„±ìš”ì†Œì— ë™ì¼í•˜ê²Œ ë§ˆìš´íŠ¸í•˜ê³ , mountPathë¥¼ í‘œì¤€í™”í•©ë‹ˆë‹¤.</p><ul><li><code>/opt/airflow/feature-store/</code><ul><li><code>user_features.schema.json</code></li><li><code>metadata.json.j2</code></li></ul></li></ul><hr><h2 id=5-ì¬í˜„ì„±ì˜-í•µì‹¬-schema_hash>5ï¸âƒ£ ì¬í˜„ì„±ì˜ í•µì‹¬: schema_hash<a hidden class=anchor aria-hidden=true href=#5-ì¬í˜„ì„±ì˜-í•µì‹¬-schema_hash>#</a></h2><p>ìŠ¤í‚¤ë§ˆëŠ” â€œê³„ì•½ì„œâ€ì´ê³ , <code>schema_hash</code>ëŠ” â€œì„œëª…â€ì…ë‹ˆë‹¤.</p><p>ì´ í•´ì‹œê°€ ìˆì–´ì•¼ â€œê·¸ë•Œ ê·¸ ìŠ¤í‚¤ë§ˆë¡œ ë§Œë“  í”¼ì²˜â€ë¥¼ ì‹œìŠ¤í…œì ìœ¼ë¡œ ì¦ëª…í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#75715e># dags/mlops_lib/dp/feature_schema.py</span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> json<span style=color:#f92672>,</span> hashlib
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>def</span> <span style=color:#a6e22e>load_schema</span>(schema_path: str, expected_feature_set: str) <span style=color:#f92672>-&gt;</span> tuple[dict, str]:
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>with</span> open(schema_path, <span style=color:#e6db74>&#34;r&#34;</span>, encoding<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;utf-8&#34;</span>) <span style=color:#66d9ef>as</span> f:
</span></span><span style=display:flex><span>        schema <span style=color:#f92672>=</span> json<span style=color:#f92672>.</span>load(f)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> schema<span style=color:#f92672>.</span>get(<span style=color:#e6db74>&#34;feature_set&#34;</span>) <span style=color:#f92672>!=</span> expected_feature_set:
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>raise</span> <span style=color:#a6e22e>ValueError</span>(<span style=color:#e6db74>f</span><span style=color:#e6db74>&#34;schema mismatch: </span><span style=color:#e6db74>{</span>schema<span style=color:#f92672>.</span>get(<span style=color:#e6db74>&#39;feature_set&#39;</span>)<span style=color:#e6db74>}</span><span style=color:#e6db74> != </span><span style=color:#e6db74>{</span>expected_feature_set<span style=color:#e6db74>}</span><span style=color:#e6db74>&#34;</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    canonical <span style=color:#f92672>=</span> json<span style=color:#f92672>.</span>dumps(schema, ensure_ascii<span style=color:#f92672>=</span><span style=color:#66d9ef>False</span>, sort_keys<span style=color:#f92672>=</span><span style=color:#66d9ef>True</span>, separators<span style=color:#f92672>=</span>(<span style=color:#e6db74>&#34;,&#34;</span>, <span style=color:#e6db74>&#34;:&#34;</span>))<span style=color:#f92672>.</span>encode(<span style=color:#e6db74>&#34;utf-8&#34;</span>)
</span></span><span style=display:flex><span>    schema_hash <span style=color:#f92672>=</span> hashlib<span style=color:#f92672>.</span>sha256(canonical)<span style=color:#f92672>.</span>hexdigest()
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> schema, schema_hash
</span></span></code></pre></div><hr><h2 id=6-airflow-íŒŒì´í”„ë¼ì¸-íë¦„>6ï¸âƒ£ Airflow íŒŒì´í”„ë¼ì¸ íë¦„<a hidden class=anchor aria-hidden=true href=#6-airflow-íŒŒì´í”„ë¼ì¸-íë¦„>#</a></h2><h3 id=ì›ì¹™-dagëŠ”-ì—°ê²°ë§Œ-ë‹´ë‹¹í•œë‹¤>ì›ì¹™: DAGëŠ” ì—°ê²°ë§Œ ë‹´ë‹¹í•œë‹¤<a hidden class=anchor aria-hidden=true href=#ì›ì¹™-dagëŠ”-ì—°ê²°ë§Œ-ë‹´ë‹¹í•œë‹¤>#</a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#75715e># dags/dag_data_pipeline_daily_v4.py (ìš”ì•½)</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>with</span> DAG(
</span></span><span style=display:flex><span>    dag_id<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;data_pipeline_daily_dev_v4&#34;</span>,
</span></span><span style=display:flex><span>    schedule<span style=color:#f92672>=</span><span style=color:#66d9ef>None</span>,
</span></span><span style=display:flex><span>    catchup<span style=color:#f92672>=</span><span style=color:#66d9ef>False</span>,
</span></span><span style=display:flex><span>    max_active_runs<span style=color:#f92672>=</span><span style=color:#ae81ff>1</span>,
</span></span><span style=display:flex><span>    tags<span style=color:#f92672>=</span>[<span style=color:#e6db74>&#34;data-pipeline&#34;</span>, <span style=color:#e6db74>&#34;dev&#34;</span>, <span style=color:#e6db74>&#34;mlops&#34;</span>],
</span></span><span style=display:flex><span>    on_failure_callback<span style=color:#f92672>=</span>alert_slack,
</span></span><span style=display:flex><span>) <span style=color:#66d9ef>as</span> dag:
</span></span><span style=display:flex><span>    t1 <span style=color:#f92672>=</span> PythonOperator(task_id<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;extract_raw_data&#34;</span>, python_callable<span style=color:#f92672>=</span>task_extract_raw_data)
</span></span><span style=display:flex><span>    t2 <span style=color:#f92672>=</span> PythonOperator(task_id<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;validate_data&#34;</span>, python_callable<span style=color:#f92672>=</span>task_validate_data)
</span></span><span style=display:flex><span>    t3 <span style=color:#f92672>=</span> PythonOperator(task_id<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;build_features&#34;</span>, python_callable<span style=color:#f92672>=</span>task_build_features)
</span></span><span style=display:flex><span>    t4 <span style=color:#f92672>=</span> PythonOperator(task_id<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;store_features&#34;</span>, python_callable<span style=color:#f92672>=</span>task_store_features)
</span></span><span style=display:flex><span>    t5 <span style=color:#f92672>=</span> PythonOperator(task_id<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;summarize_run&#34;</span>, python_callable<span style=color:#f92672>=</span>task_summarize_run, trigger_rule<span style=color:#f92672>=</span>TriggerRule<span style=color:#f92672>.</span>ALL_DONE)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    t1 <span style=color:#f92672>&gt;&gt;</span> t2 <span style=color:#f92672>&gt;&gt;</span> t3 <span style=color:#f92672>&gt;&gt;</span> t4 <span style=color:#f92672>&gt;&gt;</span> t5
</span></span></code></pre></div><h3 id=ì‹¤í–‰-ë‹¨ê³„>ì‹¤í–‰ ë‹¨ê³„<a hidden class=anchor aria-hidden=true href=#ì‹¤í–‰-ë‹¨ê³„>#</a></h3><ul><li><strong>extract_raw_data</strong>: RAW S3 ê°ì²´ ì¡´ì¬ í™•ì¸ + source ê²½ë¡œ XCom ê¸°ë¡</li><li><strong>validate_data</strong>: ìµœì†Œ ê²€ì¦(ë¹ˆ ë°ì´í„° ë°©ì§€)</li><li><strong>build_features</strong>: schema ë¡œë“œ + schema_hash ìƒì„± + CSV ìƒì„±(ìŠ¤í‚¤ë§ˆ ìˆœì„œ ì¤€ìˆ˜)</li><li><strong>store_features</strong>: ë²„ì „ ìƒì„± í›„ S3ì— 3íŒŒì¼ ì„¸íŠ¸ ì €ì¥</li><li><strong>summarize_run</strong>: ìµœì¢… prefix/version/uri ë¡œê·¸ ë‚¨ê¹€</li></ul><hr><h2 id=7-s3-ì €ì¥-ê·œì¹™-ë²„ì „-1ë‹¨--3íŒŒì¼-ì„¸íŠ¸>7ï¸âƒ£ S3 ì €ì¥ ê·œì¹™: â€œë²„ì „ 1ë‹¨ + 3íŒŒì¼ ì„¸íŠ¸â€<a hidden class=anchor aria-hidden=true href=#7-s3-ì €ì¥-ê·œì¹™-ë²„ì „-1ë‹¨--3íŒŒì¼-ì„¸íŠ¸>#</a></h2><p>ì‹¤ë¬´ì—ì„œ ê°€ì¥ ì¤‘ìš”í•œ ê³ ì • ê·œì¹™ì…ë‹ˆë‹¤.</p><ul><li><code>features.csv</code></li><li><code>schema.json</code></li><li><code>metadata.json</code></li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#75715e># dags/mlops_lib/dp/store.py (í•µì‹¬)</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>def</span> <span style=color:#a6e22e>store_features</span>(feature_base: str, pipeline_name: str, feature_set: str, metadata_tpl_path: str, ti):
</span></span><span style=display:flex><span>    <span style=color:#f92672>...</span>
</span></span><span style=display:flex><span>    ver <span style=color:#f92672>=</span> _version_id(getattr(ti, <span style=color:#e6db74>&#34;execution_date&#34;</span>, <span style=color:#66d9ef>None</span>))
</span></span><span style=display:flex><span>    prefix <span style=color:#f92672>=</span> prefix<span style=color:#f92672>.</span>rstrip(<span style=color:#e6db74>&#34;/&#34;</span>) <span style=color:#f92672>+</span> <span style=color:#e6db74>f</span><span style=color:#e6db74>&#34;/</span><span style=color:#e6db74>{</span>feature_set<span style=color:#e6db74>}</span><span style=color:#e6db74>/</span><span style=color:#e6db74>{</span>ver<span style=color:#e6db74>}</span><span style=color:#e6db74>/&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    feature_uri <span style=color:#f92672>=</span> <span style=color:#e6db74>f</span><span style=color:#e6db74>&#34;s3://</span><span style=color:#e6db74>{</span>bkt<span style=color:#e6db74>}</span><span style=color:#e6db74>/</span><span style=color:#e6db74>{</span>prefix<span style=color:#e6db74>}</span><span style=color:#e6db74>features.csv&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    meta <span style=color:#f92672>=</span> tpl<span style=color:#f92672>.</span>render(
</span></span><span style=display:flex><span>        version<span style=color:#f92672>=</span>ver,
</span></span><span style=display:flex><span>        generated_at<span style=color:#f92672>=</span>datetime<span style=color:#f92672>.</span>now(KST)<span style=color:#f92672>.</span>isoformat(),
</span></span><span style=display:flex><span>        source<span style=color:#f92672>=</span>source_raw,
</span></span><span style=display:flex><span>        pipeline<span style=color:#f92672>=</span>pipeline_name,
</span></span><span style=display:flex><span>        schema_hash<span style=color:#f92672>=</span>schema_hash,
</span></span><span style=display:flex><span>        feature_uri<span style=color:#f92672>=</span>feature_uri,
</span></span><span style=display:flex><span>        feature_set<span style=color:#f92672>=</span>feature_set,
</span></span><span style=display:flex><span>    )
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    s3<span style=color:#f92672>.</span>put_object(<span style=color:#f92672>...</span> Key<span style=color:#f92672>=</span><span style=color:#e6db74>f</span><span style=color:#e6db74>&#34;</span><span style=color:#e6db74>{</span>prefix<span style=color:#e6db74>}</span><span style=color:#e6db74>features.csv&#34;</span>, Body<span style=color:#f92672>=</span>features_csv<span style=color:#f92672>.</span>encode(<span style=color:#e6db74>&#34;utf-8&#34;</span>))
</span></span><span style=display:flex><span>    s3<span style=color:#f92672>.</span>put_object(<span style=color:#f92672>...</span> Key<span style=color:#f92672>=</span><span style=color:#e6db74>f</span><span style=color:#e6db74>&#34;</span><span style=color:#e6db74>{</span>prefix<span style=color:#e6db74>}</span><span style=color:#e6db74>schema.json&#34;</span>, Body<span style=color:#f92672>=</span>json<span style=color:#f92672>.</span>dumps(schema, <span style=color:#f92672>...</span>)<span style=color:#f92672>.</span>encode(<span style=color:#e6db74>&#34;utf-8&#34;</span>))
</span></span><span style=display:flex><span>    s3<span style=color:#f92672>.</span>put_object(<span style=color:#f92672>...</span> Key<span style=color:#f92672>=</span><span style=color:#e6db74>f</span><span style=color:#e6db74>&#34;</span><span style=color:#e6db74>{</span>prefix<span style=color:#e6db74>}</span><span style=color:#e6db74>metadata.json&#34;</span>, Body<span style=color:#f92672>=</span>meta<span style=color:#f92672>.</span>encode(<span style=color:#e6db74>&#34;utf-8&#34;</span>))
</span></span></code></pre></div><hr><h2 id=8-ê²€ì¦-ì²´í¬ë¦¬ìŠ¤íŠ¸-ìš´ì˜í˜•>8ï¸âƒ£ ê²€ì¦ ì²´í¬ë¦¬ìŠ¤íŠ¸ (ìš´ì˜í˜•)<a hidden class=anchor aria-hidden=true href=#8-ê²€ì¦-ì²´í¬ë¦¬ìŠ¤íŠ¸-ìš´ì˜í˜•>#</a></h2><ul><li><input disabled type=checkbox> ArgoCDì—ì„œ <code>feature-store-dev</code>, <code>feature-store-prod</code> Synced/Healthy</li><li><input disabled type=checkbox> Airflow Pod ë‚´ë¶€ íŒŒì¼ ì¡´ì¬ í™•ì¸<ul><li><code>/opt/airflow/feature-store/user_features.schema.json</code></li><li><code>/opt/airflow/feature-store/metadata.json.j2</code></li></ul></li><li><input disabled type=checkbox> DAG ì‹¤í–‰ ì„±ê³µ</li><li><input disabled type=checkbox> S3ì— ë²„ì „í™” prefix ìƒì„± í™•ì¸</li><li><input disabled type=checkbox> ë™ì¼ prefixì— 3ê°œ íŒŒì¼ ì¡´ì¬<ul><li><code>features.csv</code>, <code>schema.json</code>, <code>metadata.json</code></li></ul></li><li><input disabled type=checkbox> metadata.json ê°’ ì±„ì›Œì§<ul><li><code>schema_hash</code>, <code>feature_uri</code>, <code>generated_at</code>, <code>source</code></li></ul></li><li><input disabled type=checkbox> KubernetesExecutor Task Podì—ì„œ AWS credential chain ì •ìƒ ë™ì‘</li></ul><hr><h2 id=9-íŠ¸ëŸ¬ë¸”ìŠˆíŒ…-ì´ë²ˆ-êµ¬ì¶•ì—ì„œ-ì‹¤ì œë¡œ-ê±¸ë¦°-ì§€ì >9ï¸âƒ£ íŠ¸ëŸ¬ë¸”ìŠˆíŒ… (ì´ë²ˆ êµ¬ì¶•ì—ì„œ ì‹¤ì œë¡œ ê±¸ë¦° ì§€ì )<a hidden class=anchor aria-hidden=true href=#9-íŠ¸ëŸ¬ë¸”ìŠˆíŒ…-ì´ë²ˆ-êµ¬ì¶•ì—ì„œ-ì‹¤ì œë¡œ-ê±¸ë¦°-ì§€ì >#</a></h2><h3 id=1-argocd-application-apply-ì—ëŸ¬-specorphanedresources>(1) ArgoCD Application apply ì—ëŸ¬: <code>spec.orphanedResources</code><a hidden class=anchor aria-hidden=true href=#1-argocd-application-apply-ì—ëŸ¬-specorphanedresources>#</a></h3><ul><li>CRD ë²„ì „ì— ë”°ë¼ í•„ë“œê°€ ì—†ì–´ì„œ strict decode ì‹¤íŒ¨</li><li>í•´ê²°: í•´ë‹¹ í•„ë“œ ì œê±°(ë˜ëŠ” ArgoCD ë²„ì „ê³¼ ìŠ¤í™ ì •í•© ë§ì¶”ê¸°)</li></ul><h3 id=2-task-podì—ì„œ-variablegetdefault_var-ì—ëŸ¬>(2) Task Podì—ì„œ <code>Variable.get(default_var=...)</code> ì—ëŸ¬<a hidden class=anchor aria-hidden=true href=#2-task-podì—ì„œ-variablegetdefault_var-ì—ëŸ¬>#</a></h3><ul><li>ì—ëŸ¬: <code>unexpected keyword argument 'default_var'</code></li><li>ì›ì¸: Airflow ë²„ì „/SDK ì°¨ì´</li><li>í•´ê²°: ì˜ˆì™¸ ì²˜ë¦¬ë¡œ ì•ˆì „í™”</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#66d9ef>def</span> <span style=color:#a6e22e>_get_var</span>(key: str, default: str) <span style=color:#f92672>-&gt;</span> str:
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>try</span>:
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> Variable<span style=color:#f92672>.</span>get(key)
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>except</span> <span style=color:#a6e22e>Exception</span>:
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> default
</span></span></code></pre></div><h3 id=3-mlops_lib-ë¶„ë¦¬-í›„-import-ì—ëŸ¬>(3) <code>mlops_lib</code> ë¶„ë¦¬ í›„ import ì—ëŸ¬<a hidden class=anchor aria-hidden=true href=#3-mlops_lib-ë¶„ë¦¬-í›„-import-ì—ëŸ¬>#</a></h3><ul><li>Airflowê°€ ë¼ì´ë¸ŒëŸ¬ë¦¬ íŒŒì¼ê¹Œì§€ DAGì²˜ëŸ¼ ìŠ¤ìº”í•˜ë©´ì„œ importê°€ ê¹¨ì§</li><li>í•´ê²°: <code>.airflowignore</code>ë¡œ ìŠ¤ìº” ì°¨ë‹¨</li></ul><pre tabindex=0><code>mlops_lib/
</code></pre><h3 id=4-kubernetesexecutor-ë¡œê·¸-ì¶”ì -ë‚œì´ë„>(4) KubernetesExecutor ë¡œê·¸ ì¶”ì  ë‚œì´ë„<a hidden class=anchor aria-hidden=true href=#4-kubernetesexecutor-ë¡œê·¸-ì¶”ì -ë‚œì´ë„>#</a></h3><ul><li>Task Podê°€ ì§§ê²Œ ì˜¬ë¼ì™”ë‹¤ê°€ ì‚¬ë¼ì§</li><li>ì‹¤ë¬´ íŒ:<ul><li>Airflow UI ë¡œê·¸ + remote logging(ê¶Œì¥)</li><li>ë˜ëŠ” ë¹ ë¥´ê²Œ <code>kubectl logs -f</code>ë¡œ ì¶”ì </li></ul></li></ul><hr><h2 id=-ì‹¤ë¬´-íŒ>ğŸ§© ì‹¤ë¬´ íŒ<a hidden class=anchor aria-hidden=true href=#-ì‹¤ë¬´-íŒ>#</a></h2><ul><li><p>Feature Store-liteì˜ í•µì‹¬ì€ â€œí”¼ì²˜ ìƒì„±â€ì´ ì•„ë‹ˆë¼ <strong>ì¬í˜„ì„±</strong>ì…ë‹ˆë‹¤.</p><ul><li><code>schema.json + schema_hash + metadata.json</code>ì´ ê°™ì´ ë‚¨ì•„ì•¼ ìš´ì˜ì´ ë©ë‹ˆë‹¤.</li></ul></li><li><p>DAG íŒŒì¼ì€ ë¬´ì¡°ê±´ ì–‡ê²Œ ìœ ì§€í•˜ì„¸ìš”.</p><ul><li>DAGê°€ ë‘êº¼ì›Œì§€ë©´ â€œìˆ˜ì •ì´ ë¬´ì„œìš´ ë©ì–´ë¦¬â€ê°€ ë©ë‹ˆë‹¤.</li></ul></li><li><p><code>.airflowignore</code>ëŠ” ë¼ì´ë¸ŒëŸ¬ë¦¬ ë¶„ë¦¬ì˜ í•„ìˆ˜ ì¥ì¹˜ì…ë‹ˆë‹¤.</p><ul><li>ë¼ì´ë¸ŒëŸ¬ë¦¬ ìŠ¤ìº”/ì„í¬íŠ¸ ì´ìŠˆì˜ ìƒë‹¹ìˆ˜ë¥¼ ì—¬ê¸°ì„œ ë§‰ìŠµë‹ˆë‹¤.</li></ul></li><li><p>AWS ì—°ê²°ì€ Airflow Connectionì´ ì •ì„ì´ì§€ë§Œ,</p><p>ì‹¤ìŠµ/ì˜¨í”„ë ˆë¯¸ìŠ¤ì—ì„œëŠ” shared credentials mountë„ í˜„ì‹¤ì ì¸ ì„ íƒì…ë‹ˆë‹¤.</p><p>ë‹¨, <strong>Task Podê¹Œì§€ mount ì „íŒŒ ê²€ì¦ì´ í•„ìˆ˜</strong>ì…ë‹ˆë‹¤.</p></li></ul><hr><h2 id=-mlops-ì‹¤ì „-ì—°ê²°>ğŸ”§ MLOps ì‹¤ì „ ì—°ê²°<a hidden class=anchor aria-hidden=true href=#-mlops-ì‹¤ì „-ì—°ê²°>#</a></h2><p>ì´ ë‹¨ê³„ê°€ ì‹¤ë¬´ì ìœ¼ë¡œ ê°€ì¹˜ ìˆëŠ” ì´ìœ ëŠ” â€œë‹¤ìŒ ë‹¨ê³„ê°€ ìì—°ìŠ¤ëŸ½ê²Œ ì—´ë¦¬ê¸° ë•Œë¬¸â€ì…ë‹ˆë‹¤.</p><ul><li><strong>í™•ì¥ 1) Training íŒŒì´í”„ë¼ì¸ ì—°ë™</strong><ul><li>í•™ìŠµì´ S3ì˜ íŠ¹ì • <code>version</code>ì„ ë°›ì•„ ì‹¤í–‰</li><li>â€œì´ë²ˆ í•™ìŠµì€ ì–´ë–¤ feature versionìœ¼ë¡œ í–ˆëŠ”ê°€?â€ê°€ ìë™ ì—°ê²°</li></ul></li><li><strong>í™•ì¥ 2) Online Store / Serving ì—°ë™</strong><ul><li><code>feature_set + version + schema_hash</code>ëŠ” ê·¸ëŒ€ë¡œ servingìœ¼ë¡œ ì´ì–´ì§</li></ul></li><li><strong>í™•ì¥ 3) Schema drift ê°ì§€</strong><ul><li>validate ë‹¨ê³„ í™•ì¥ìœ¼ë¡œ drift ì°¨ë‹¨/ì•Œë¦¼ê¹Œì§€ ìì—°ìŠ¤ëŸ½ê²Œ ì—°ê²°</li></ul></li></ul><hr><h2 id=-ì •ë¦¬>ğŸ ì •ë¦¬<a hidden class=anchor aria-hidden=true href=#-ì •ë¦¬>#</a></h2><p>ì´ë²ˆ êµ¬ì¶•ì€ Feature Store-liteì˜ ìµœì†Œ ìš”ê±´(ê³„ì•½/ë©”íƒ€/ë²„ì „í™”/ì¬í˜„ì„±)ì„</p><p>GitOps(ArgoCD) + Airflow(KubernetesExecutor)ë¡œ ê³ ì •í•œ ì‘ì—…ì…ë‹ˆë‹¤.</p><p>ê²°ê³¼ì ìœ¼ë¡œ S3ì—ëŠ” ë²„ì „í™”ëœ prefix ì•„ë˜ì— í•­ìƒ 3íŒŒì¼ ì„¸íŠ¸ê°€ í•¨ê»˜ ì €ì¥ë©ë‹ˆë‹¤.</p><ul><li><code>features.csv</code></li><li><code>schema.json</code></li><li><code>metadata.json</code></li></ul><p>ì´ì œ â€œì–¸ì œ/ë¬´ìŠ¨ ìŠ¤í‚¤ë§ˆë¡œ/ì–´ë–¤ ì†ŒìŠ¤ì—ì„œ/ì–´ë–¤ ë²„ì „ìœ¼ë¡œ ìƒì„±ëëŠ”ì§€â€ê°€ ë‚¨ëŠ”</p><p><strong>ìš´ì˜ ê°€ëŠ¥í•œ í”¼ì²˜ ì €ì¥ì†Œì˜ ë¼ˆëŒ€</strong>ê°€ ì™„ì„±ëìŠµë‹ˆë‹¤.</p></div><footer class=post-footer><ul class=post-tags></ul><nav class=paginav><a class=prev href=https://keonhoban.github.io/mlops-journey/posts/mlops-platform-feature-store/02/><span class=title>Â« Prev</span><br><span>[Feature Store & Feast - Feast]</span>
</a><a class=next href=https://keonhoban.github.io/mlops-journey/posts/triton/03/><span class=title>Next Â»</span><br><span>[Triton ìš´ì˜í˜• ì„œë¹™ í”Œë«í¼ (GitOps Â· ê²€ì¦ Â· Alerting) - Alerting ìš´ì˜ í‘œì¤€ ë§¤ë‰´ì–¼]</span></a></nav></footer></article></main><footer class=footer><p style=margin-top:1rem>Â© 2025 Keonho Ban | <a href=https://github.com/keonhoban target=_blank>GitHub</a> | <a href=mailto:keonho0510@naver.com>Email</a></p></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>