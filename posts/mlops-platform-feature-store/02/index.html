<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>[Feature Store & Feast - Feast] | ğŸ”ï¸ MLOps Journey</title>
<meta name=keywords content><meta name=description content="Feature Store & Feast - Feast]
GitOpsë¡œ Feast ê³„ì•½ ë°°í¬ + Airflowë¡œ ë²„ì „í™”/Latest ê°±ì‹  + Feast(Registry/S3 Offline/Redis Online)ë¡œ ì˜¨ë¼ì¸ ì¡°íšŒê¹Œì§€

ğŸ§  ì‹œë‚˜ë¦¬ì˜¤
ì´ì „ ê¸€(Feature Store-lite)ì—ì„œ ì €ëŠ” ê³„ì•½(ìŠ¤í‚¤ë§ˆ/ë©”íƒ€) + ë²„ì „í™” ì €ì¥ + ì¬í˜„ì„±ê¹Œì§€ ê³ ì •í–ˆìŠµë‹ˆë‹¤.
í•˜ì§€ë§Œ ì‹¤ë¬´ì—ì„œëŠ” â€œì €ì¥â€ì—ì„œ ëë‚˜ì§€ ì•ŠìŠµë‹ˆë‹¤. ê²°êµ­ ì¤‘ìš”í•œ ê±´ ì¡°íšŒ ê°€ëŠ¥(Serving-ready) ìƒíƒœì…ë‹ˆë‹¤.
ì´ë²ˆ ê¸€ì€ Feature Store-lite ìœ„ì— Feastë¥¼ ì–¹ì–´ ì•„ë˜ë¥¼ ì™„ì„±í•©ë‹ˆë‹¤.

Offline Source: S3ì˜ latest/features.parquet (Feastê°€ ì½ëŠ” ê³ ì • í¬ì¸í„°)
Registry: S3ì— registry.pb ì €ì¥(í™˜ê²½ë³„ ë¶„ë¦¬)
Online Store: Redis ì ì¬(materialize)ë¡œ ì˜¨ë¼ì¸ ì¡°íšŒ ê°€ëŠ¥
Feature Server: ìƒì‹œ ì„œë¹„ìŠ¤ + startup ì‹œ feast apply

ì¦‰, **â€œì €ì¥í•˜ëŠ” íŒŒì´í”„ë¼ì¸â€ â†’ â€œì¡°íšŒ ê°€ëŠ¥í•œ í”¼ì²˜ í”Œë«í¼â€**ìœ¼ë¡œ í™•ì¥í•˜ëŠ” ë‹¨ê³„ì…ë‹ˆë‹¤."><meta name=author content><link rel=canonical href=https://keonhoban.github.io/mlops-journey/posts/mlops-platform-feature-store/02/><link crossorigin=anonymous href=/mlops-journey/assets/css/stylesheet.f49d66caae9ea0fd43f21f29e71a8d3e284517ed770f2aa86fa012953ad3c9ef.css integrity="sha256-9J1myq6eoP1D8h8p5xqNPihFF+13Dyqob6ASlTrTye8=" rel="preload stylesheet" as=style><link rel=icon href=https://keonhoban.github.io/mlops-journey/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://keonhoban.github.io/mlops-journey/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://keonhoban.github.io/mlops-journey/favicon-32x32.png><link rel=apple-touch-icon href=https://keonhoban.github.io/mlops-journey/apple-touch-icon.png><link rel=mask-icon href=https://keonhoban.github.io/mlops-journey/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=en href=https://keonhoban.github.io/mlops-journey/posts/mlops-platform-feature-store/02/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:url" content="https://keonhoban.github.io/mlops-journey/posts/mlops-platform-feature-store/02/"><meta property="og:site_name" content="ğŸ”ï¸  MLOps Journey"><meta property="og:title" content="[Feature Store & Feast - Feast]"><meta property="og:description" content="Feature Store & Feast - Feast] GitOpsë¡œ Feast ê³„ì•½ ë°°í¬ + Airflowë¡œ ë²„ì „í™”/Latest ê°±ì‹  + Feast(Registry/S3 Offline/Redis Online)ë¡œ ì˜¨ë¼ì¸ ì¡°íšŒê¹Œì§€ ğŸ§  ì‹œë‚˜ë¦¬ì˜¤ ì´ì „ ê¸€(Feature Store-lite)ì—ì„œ ì €ëŠ” ê³„ì•½(ìŠ¤í‚¤ë§ˆ/ë©”íƒ€) + ë²„ì „í™” ì €ì¥ + ì¬í˜„ì„±ê¹Œì§€ ê³ ì •í–ˆìŠµë‹ˆë‹¤.
í•˜ì§€ë§Œ ì‹¤ë¬´ì—ì„œëŠ” â€œì €ì¥â€ì—ì„œ ëë‚˜ì§€ ì•ŠìŠµë‹ˆë‹¤. ê²°êµ­ ì¤‘ìš”í•œ ê±´ ì¡°íšŒ ê°€ëŠ¥(Serving-ready) ìƒíƒœì…ë‹ˆë‹¤.
ì´ë²ˆ ê¸€ì€ Feature Store-lite ìœ„ì— Feastë¥¼ ì–¹ì–´ ì•„ë˜ë¥¼ ì™„ì„±í•©ë‹ˆë‹¤.
Offline Source: S3ì˜ latest/features.parquet (Feastê°€ ì½ëŠ” ê³ ì • í¬ì¸í„°) Registry: S3ì— registry.pb ì €ì¥(í™˜ê²½ë³„ ë¶„ë¦¬) Online Store: Redis ì ì¬(materialize)ë¡œ ì˜¨ë¼ì¸ ì¡°íšŒ ê°€ëŠ¥ Feature Server: ìƒì‹œ ì„œë¹„ìŠ¤ + startup ì‹œ feast apply ì¦‰, **â€œì €ì¥í•˜ëŠ” íŒŒì´í”„ë¼ì¸â€ â†’ â€œì¡°íšŒ ê°€ëŠ¥í•œ í”¼ì²˜ í”Œë«í¼â€**ìœ¼ë¡œ í™•ì¥í•˜ëŠ” ë‹¨ê³„ì…ë‹ˆë‹¤."><meta property="og:locale" content="ko"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2026-01-15T17:15:38+12:03"><meta property="article:modified_time" content="2026-01-15T17:15:38+12:03"><meta name=twitter:card content="summary"><meta name=twitter:title content="[Feature Store & Feast - Feast]"><meta name=twitter:description content="Feature Store & Feast - Feast]
GitOpsë¡œ Feast ê³„ì•½ ë°°í¬ + Airflowë¡œ ë²„ì „í™”/Latest ê°±ì‹  + Feast(Registry/S3 Offline/Redis Online)ë¡œ ì˜¨ë¼ì¸ ì¡°íšŒê¹Œì§€

ğŸ§  ì‹œë‚˜ë¦¬ì˜¤
ì´ì „ ê¸€(Feature Store-lite)ì—ì„œ ì €ëŠ” ê³„ì•½(ìŠ¤í‚¤ë§ˆ/ë©”íƒ€) + ë²„ì „í™” ì €ì¥ + ì¬í˜„ì„±ê¹Œì§€ ê³ ì •í–ˆìŠµë‹ˆë‹¤.
í•˜ì§€ë§Œ ì‹¤ë¬´ì—ì„œëŠ” â€œì €ì¥â€ì—ì„œ ëë‚˜ì§€ ì•ŠìŠµë‹ˆë‹¤. ê²°êµ­ ì¤‘ìš”í•œ ê±´ ì¡°íšŒ ê°€ëŠ¥(Serving-ready) ìƒíƒœì…ë‹ˆë‹¤.
ì´ë²ˆ ê¸€ì€ Feature Store-lite ìœ„ì— Feastë¥¼ ì–¹ì–´ ì•„ë˜ë¥¼ ì™„ì„±í•©ë‹ˆë‹¤.

Offline Source: S3ì˜ latest/features.parquet (Feastê°€ ì½ëŠ” ê³ ì • í¬ì¸í„°)
Registry: S3ì— registry.pb ì €ì¥(í™˜ê²½ë³„ ë¶„ë¦¬)
Online Store: Redis ì ì¬(materialize)ë¡œ ì˜¨ë¼ì¸ ì¡°íšŒ ê°€ëŠ¥
Feature Server: ìƒì‹œ ì„œë¹„ìŠ¤ + startup ì‹œ feast apply

ì¦‰, **â€œì €ì¥í•˜ëŠ” íŒŒì´í”„ë¼ì¸â€ â†’ â€œì¡°íšŒ ê°€ëŠ¥í•œ í”¼ì²˜ í”Œë«í¼â€**ìœ¼ë¡œ í™•ì¥í•˜ëŠ” ë‹¨ê³„ì…ë‹ˆë‹¤."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://keonhoban.github.io/mlops-journey/posts/"},{"@type":"ListItem","position":2,"name":"[Feature Store \u0026 Feast - Feast]","item":"https://keonhoban.github.io/mlops-journey/posts/mlops-platform-feature-store/02/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"[Feature Store \u0026 Feast - Feast]","name":"[Feature Store \u0026 Feast - Feast]","description":"Feature Store \u0026amp; Feast - Feast] GitOpsë¡œ Feast ê³„ì•½ ë°°í¬ + Airflowë¡œ ë²„ì „í™”/Latest ê°±ì‹  + Feast(Registry/S3 Offline/Redis Online)ë¡œ ì˜¨ë¼ì¸ ì¡°íšŒê¹Œì§€ ğŸ§  ì‹œë‚˜ë¦¬ì˜¤ ì´ì „ ê¸€(Feature Store-lite)ì—ì„œ ì €ëŠ” ê³„ì•½(ìŠ¤í‚¤ë§ˆ/ë©”íƒ€) + ë²„ì „í™” ì €ì¥ + ì¬í˜„ì„±ê¹Œì§€ ê³ ì •í–ˆìŠµë‹ˆë‹¤.\ní•˜ì§€ë§Œ ì‹¤ë¬´ì—ì„œëŠ” â€œì €ì¥â€ì—ì„œ ëë‚˜ì§€ ì•ŠìŠµë‹ˆë‹¤. ê²°êµ­ ì¤‘ìš”í•œ ê±´ ì¡°íšŒ ê°€ëŠ¥(Serving-ready) ìƒíƒœì…ë‹ˆë‹¤.\nì´ë²ˆ ê¸€ì€ Feature Store-lite ìœ„ì— Feastë¥¼ ì–¹ì–´ ì•„ë˜ë¥¼ ì™„ì„±í•©ë‹ˆë‹¤.\nOffline Source: S3ì˜ latest/features.parquet (Feastê°€ ì½ëŠ” ê³ ì • í¬ì¸í„°) Registry: S3ì— registry.pb ì €ì¥(í™˜ê²½ë³„ ë¶„ë¦¬) Online Store: Redis ì ì¬(materialize)ë¡œ ì˜¨ë¼ì¸ ì¡°íšŒ ê°€ëŠ¥ Feature Server: ìƒì‹œ ì„œë¹„ìŠ¤ + startup ì‹œ feast apply ì¦‰, **â€œì €ì¥í•˜ëŠ” íŒŒì´í”„ë¼ì¸â€ â†’ â€œì¡°íšŒ ê°€ëŠ¥í•œ í”¼ì²˜ í”Œë«í¼â€**ìœ¼ë¡œ í™•ì¥í•˜ëŠ” ë‹¨ê³„ì…ë‹ˆë‹¤.\n","keywords":[],"articleBody":"Feature Store \u0026 Feast - Feast] GitOpsë¡œ Feast ê³„ì•½ ë°°í¬ + Airflowë¡œ ë²„ì „í™”/Latest ê°±ì‹  + Feast(Registry/S3 Offline/Redis Online)ë¡œ ì˜¨ë¼ì¸ ì¡°íšŒê¹Œì§€ ğŸ§  ì‹œë‚˜ë¦¬ì˜¤ ì´ì „ ê¸€(Feature Store-lite)ì—ì„œ ì €ëŠ” ê³„ì•½(ìŠ¤í‚¤ë§ˆ/ë©”íƒ€) + ë²„ì „í™” ì €ì¥ + ì¬í˜„ì„±ê¹Œì§€ ê³ ì •í–ˆìŠµë‹ˆë‹¤.\ní•˜ì§€ë§Œ ì‹¤ë¬´ì—ì„œëŠ” â€œì €ì¥â€ì—ì„œ ëë‚˜ì§€ ì•ŠìŠµë‹ˆë‹¤. ê²°êµ­ ì¤‘ìš”í•œ ê±´ ì¡°íšŒ ê°€ëŠ¥(Serving-ready) ìƒíƒœì…ë‹ˆë‹¤.\nì´ë²ˆ ê¸€ì€ Feature Store-lite ìœ„ì— Feastë¥¼ ì–¹ì–´ ì•„ë˜ë¥¼ ì™„ì„±í•©ë‹ˆë‹¤.\nOffline Source: S3ì˜ latest/features.parquet (Feastê°€ ì½ëŠ” ê³ ì • í¬ì¸í„°) Registry: S3ì— registry.pb ì €ì¥(í™˜ê²½ë³„ ë¶„ë¦¬) Online Store: Redis ì ì¬(materialize)ë¡œ ì˜¨ë¼ì¸ ì¡°íšŒ ê°€ëŠ¥ Feature Server: ìƒì‹œ ì„œë¹„ìŠ¤ + startup ì‹œ feast apply ì¦‰, **â€œì €ì¥í•˜ëŠ” íŒŒì´í”„ë¼ì¸â€ â†’ â€œì¡°íšŒ ê°€ëŠ¥í•œ í”¼ì²˜ í”Œë«í¼â€**ìœ¼ë¡œ í™•ì¥í•˜ëŠ” ë‹¨ê³„ì…ë‹ˆë‹¤.\nğŸ¯ ì™„ë£Œ ê¸°ì¤€ GitOpsë¡œ Feast ê³„ì•½(repo.py/feature_store.yaml) ë°°í¬ Airflowë¡œ S3ì— version ìœ ì§€ + latest overwrite ì €ì¥ Feast materialize ì‹¤í–‰ â†’ Redis online ì ì¬ Feast SDKë¡œ online ì¡°íšŒ ê²°ê³¼ê°€ Noneì´ ì•„ë‹Œ ì‹¤ì œ ê°’ìœ¼ë¡œ í™•ì¸ âœ… í•µì‹¬ ìš”ì•½ dev/prod í™˜ê²½ ë¶„ë¦¬ feature-store-dev, feature-store-prod (Feast + Redis) airflow-dev, airflow-prod (KubernetesExecutor) Feast ë¦¬ì†ŒìŠ¤ GitOps ë°°í¬ feature_store.yaml + repo.pyë¥¼ ConfigMapìœ¼ë¡œ ë°°í¬ ArgoCD Applicationìœ¼ë¡œ ê´€ë¦¬ (apps/feast-*.yaml) S3 ì €ì¥ ì •ì±…(ìš´ì˜ í‘œì¤€) v_YYYYMMDDTHHMMSS/ : ì¬í˜„ì„±(ë²„ì „) ìœ ì§€ latest/ : ìš´ì˜ í¸ì˜(ê³ ì • í¬ì¸í„°) overwrite 4íŒŒì¼ ì„¸íŠ¸ ê³ ì • features.parquet, features.csv, schema.json, metadata.json Feast êµ¬ì„± Registry: S3 (s3:///feast//registry.pb) Offline Source: S3 .../latest/features.parquet (í•„ìˆ˜: event_timestamp) Online Store: Redis Feature Server: startup ì‹œ feast apply í›„ feast serve ì‹¤ì œ ìš´ì˜ ì´ìŠˆ í•´ê²° í¬í•¨ ConfigMap ì „ì²´ mountë¡œ ì¸í•œ ë””ë ‰í† ë¦¬(..) ì´ìŠˆ â†’ subPathë¡œ íŒŒì¼ë§Œ mount /bin/shì—ì„œ pipefail ê¹¨ì§ â†’ sh í˜¸í™˜(set -eux) materialize ì‹œ S3 parquet ì½ê¸° ì‹¤íŒ¨ â†’ s3fs í¬í•¨ ì´ë¯¸ì§€ë¡œ í•´ê²° 1ï¸âƒ£ ì „ì²´ êµ¬ì¡° 2ï¸âƒ£ ì½”ë“œ/ë¦¬ì†ŒìŠ¤ íŠ¸ë¦¬ (A) GitOps (mlops-infra-gitops) charts/ feast/ templates/ feast-repo-configmap.yaml feast-server-deployment.yaml feast-server-service.yaml redis-deployment.yaml redis-service.yaml values/ base.yaml dev.yaml prod.yaml apps/ feast-dev.yaml feast-prod.yaml envs/ dev/sealed-secrets/feature-store/sealed-aws-credentials-secret.yaml prod/sealed-secrets/feature-store/sealed-aws-credentials-secret.yaml (B) Airflow (airflow-dags-dev) dags/ dag_data_pipeline_daily_dev_v5.py mlops_lib/ dp/ build.py store.py .airflowignore 3ï¸âƒ£ ì„¤ê³„ í¬ì¸íŠ¸ (ìš´ì˜ ê´€ì ) (1) Feast repo ìì²´ë¥¼ â€œê³„ì•½(Contract)â€ìœ¼ë¡œ ì·¨ê¸‰ Feastì—ì„œ ì‹¤ì§ˆì ì¸ ê³„ì•½ì€ repo.py + feature_store.yamlì…ë‹ˆë‹¤.\nì´ê±¸ ConfigMapìœ¼ë¡œ GitOps ë°°í¬í•˜ë©´:\ndev/prodì—ì„œ ë™ì¼ ê³„ì•½ ìœ ì§€ ì½”ë“œ ìˆ˜ì • ì—†ì´ ë°°í¬/ë¡¤ë°± ê°€ëŠ¥ â€œìš´ì˜ ë¦¬ì†ŒìŠ¤â€ë¡œ ì¶”ì  ê°€ëŠ¥ (2) S3 ì €ì¥ ì •ì±…ì€ â€œë²„ì „ + latest í¬ì¸í„°â€ë¡œ ëë‚¸ë‹¤ .../// : ì¬í˜„ì„± ...//latest/ : ìš´ì˜ í¸ì˜ Feast Offlineì€ latestë§Œ ì½ìœ¼ë©´ ë˜ê¸° ë•Œë¬¸ì—, ì‚¬ìš©ìëŠ” ë²„ì „ì„ ëª°ë¼ë„ ë©ë‹ˆë‹¤.\në²„ì „ì€ â€œì¬í˜„â€ì´ í•„ìš”í•  ë•Œë§Œ êº¼ë‚´ ì“°ëŠ” êµ¬ì¡°ê°€ ê°€ì¥ ë‹¨ë‹¨í•©ë‹ˆë‹¤.\n(3) AirflowëŠ” ìƒì„±/ì €ì¥ê¹Œì§€ë§Œ, Online ì ì¬ëŠ” Feastê°€ ë‹´ë‹¹ Airflow ì´ë¯¸ì§€ì— feast/pyarrow/s3fsê¹Œì§€ ì–¹ê¸° ì‹œì‘í•˜ë©´ ìš´ì˜ ë‚œì´ë„ê°€ ê¸‰ìƒìŠ¹í•©ë‹ˆë‹¤.\nê·¸ë˜ì„œ ì—­í• ì„ ë‚˜ëˆ´ìŠµë‹ˆë‹¤.\nAirflow: feature ìƒì„± + S3 ì €ì¥(ë²„ì „/latest) Feast: materialize + online(redis) ì ì¬ + ì¡°íšŒ (ìë™í™”ëŠ” ì¶”í›„ Job/CronJobë¡œ í™•ì¥)\n4ï¸âƒ£ GitOps: Feast ë°°í¬ (Redis + Feature Server + Repo ConfigMap) 4-1) values (base/dev/prod) # charts/feast/values/base.yaml aws: region: ap-northeast-2 credentialsSecretName: aws-credentials s3: bucket: datapipeline-raw-data-keonho featurePrefix: feature-store/user_features registryPrefix: feast feastServer: image: hoizz/feast-server:0.40.1-s3fs port: 6566 redis: image: redis:7.2-alpine persistence: true # charts/feast/values/dev.yaml env: dev # charts/feast/values/prod.yaml env: prod 4-2) Feast repo ConfigMap (parquet + event_timestamp + serialization v2) apiVersion: v1 kind: ConfigMap metadata: name: feast-repo namespace: {{ .Release.Namespace }} data: feature_store.yaml: | project: feature_store_{{ .Values.env }} registry: path: s3://{{ .Values.s3.bucket }}/{{ .Values.s3.registryPrefix }}/{{ .Values.env }}/registry.pb provider: local offline_store: type: file online_store: type: redis connection_string: redis.{{ .Release.Namespace }}.svc.cluster.local:6379 entity_key_serialization_version: 2 repo.py: | from datetime import timedelta from feast import Entity, FeatureView, Field from feast.infra.offline_stores.file_source import FileSource from feast.types import Int64, Float64 user_features_source = FileSource( path=\"s3://{{ .Values.s3.bucket }}/{{ .Values.s3.featurePrefix }}/latest/features.parquet\", timestamp_field=\"event_timestamp\", created_timestamp_column=None, ) user = Entity( name=\"user\", join_keys=[\"user_id\"], ) user_features = FeatureView( name=\"user_features\", entities=[user], ttl=timedelta(days=7), schema=[ Field(name=\"f_total_events_7d\", dtype=Int64), Field(name=\"f_avg_session_sec_7d\", dtype=Float64), Field(name=\"f_last_event_age_sec\", dtype=Int64), ], source=user_features_source, online=True, ) 4-3) Feast ì„œë²„ Deployment (subPath + sh í˜¸í™˜ + startup apply) apiVersion: apps/v1 kind: Deployment metadata: name: feast-server namespace: {{ .Release.Namespace }} spec: replicas: 1 selector: matchLabels: app: feast-server template: metadata: labels: app: feast-server spec: containers: - name: feast-server image: {{ .Values.feastServer.image }} ports: - containerPort: {{ .Values.feastServer.port }} env: - name: AWS_SHARED_CREDENTIALS_FILE value: /root/.aws/credentials - name: AWS_REGION value: {{ .Values.aws.region }} - name: AWS_DEFAULT_REGION value: {{ .Values.aws.region }} volumeMounts: - name: feast-repo mountPath: /feast-repo/feature_store.yaml subPath: feature_store.yaml readOnly: true - name: feast-repo mountPath: /feast-repo/repo.py subPath: repo.py readOnly: true - name: aws-credentials mountPath: /root/.aws readOnly: true command: [\"/bin/sh\",\"-c\"] args: - | set -eux cd /feast-repo feast apply feast serve --host 0.0.0.0 --port 6566 volumes: - name: feast-repo configMap: name: feast-repo - name: aws-credentials secret: secretName: {{ .Values.aws.credentialsSecretName }} 5ï¸âƒ£ (í•„ìˆ˜) s3fs í¬í•¨ Feast ì´ë¯¸ì§€ ì¤€ë¹„ Feast materializeê°€ S3 parquetë¥¼ ì½ìœ¼ë ¤ë©´ s3fsê°€ í•„ìš”í•©ë‹ˆë‹¤.\nFROM feastdev/feature-server:0.40.1 RUN pip install --no-cache-dir s3fs fsspec docker build -t hoizz/feast-server:0.40.1-s3fs . docker push hoizz/feast-server:0.40.1-s3fs 6ï¸âƒ£ Airflow: â€œë²„ì „í™” ì €ì¥ + latest overwriteâ€ (parquet ê¸°ì¤€) ì—¬ê¸°ì„œë¶€í„°ê°€ Feast ê¸€ì˜ í•µì‹¬ì…ë‹ˆë‹¤.\nFeastëŠ” Offlineì„ latest/features.parquetë¡œ ê³ ì •í•´ ì½ê¸° ë•Œë¬¸ì—, Airflowê°€ latestë¥¼ ë§¤ë²ˆ ê°±ì‹ í•´ì¤˜ì•¼ í•©ë‹ˆë‹¤.\n(1) DAG: íë¦„ë§Œ ë‹´ë‹¹ # dags/dag_data_pipeline_daily_dev_v5.py (ìš”ì•½) from datetime import datetime, timedelta from airflow import DAG from airflow.operators.python import PythonOperator from mlops_lib.dp.build import build_features from mlops_lib.dp.store import store_features DEFAULT_ARGS = { \"owner\": \"airflow\", \"retries\": 1, \"retry_delay\": timedelta(minutes=3), } with DAG( dag_id=\"data_pipeline_daily_dev_v5\", default_args=DEFAULT_ARGS, start_date=datetime(2026, 1, 1), schedule=\"0 0 * * *\", catchup=False, tags=[\"dp\", \"feature-store\"], ) as dag: t_build = PythonOperator(task_id=\"build_features\", python_callable=build_features) t_store = PythonOperator( task_id=\"store_features\", python_callable=store_features, op_kwargs={ \"feature_base\": \"s3://datapipeline-raw-data-keonho/feature-store\", \"pipeline_name\": \"data_pipeline_daily_dev_v5\", \"feature_set\": \"user_features\", \"metadata_tpl_path\": \"/opt/airflow/dags/mlops_lib/dp/templates/metadata.json.j2\", }, ) t_build \u003e\u003e t_store í¬ì¸íŠ¸: DAGì—ëŠ” â€œì €ì¥ ì •ì±…(ë²„ì „ + latest)â€ì´ ë“œëŸ¬ë‚˜ì•¼ í•©ë‹ˆë‹¤.\nì´ê²Œ ê³§ ìš´ì˜ ë¬¸ì„œ ì—­í• ì„ í•©ë‹ˆë‹¤.\n(2) build: parquet/csv + event_timestamp ë³´ì¥ Feast ê¸°ì¤€: event_timestamp í•„ìˆ˜ build ë‹¨ê³„ì—ì„œ Feast ìš”êµ¬ì‚¬í•­ì„ ì¶©ì¡±ì‹œí‚¤ë©´ íŒŒì´í”„ë¼ì¸ì´ ì•ˆì •í•´ì§‘ë‹ˆë‹¤. (3) store: version + latest ë™ì‹œ ì €ì¥(4íŒŒì¼ ì„¸íŠ¸) .../// ì €ì¥ (ì¬í˜„ì„±) ...//latest/ overwrite (ìš´ì˜ í¸ì˜) ë™ì¼ prefixì— parquet/csv/schema/metadataë¥¼ ë¬¶ì–´ì„œ ì €ì¥ 7ï¸âƒ£ Feast ìš´ì˜/ê²€ì¦ ë£¨í‹´ (ì„±ê³µ ì²´í¬) 7-1) s3fs í¬í•¨ ì—¬ë¶€ í™•ì¸ POD=$(kubectl -n feature-store-dev get pod -l app=feast-server -o jsonpath='{.items[0].metadata.name}') kubectl -n feature-store-dev exec -it \"$POD\" -- sh -lc ' python - \u003c\u003c \"PY\" import s3fs, fsspec print(\"s3fs OK:\", s3fs.__version__) print(\"fsspec:\", fsspec.__version__) PY ' 7-2) materialize ì‹¤í–‰ (ì˜ˆ: ìµœê·¼ 2ì¼) kubectl -n feature-store-dev exec -it \"$POD\" -- sh -lc ' cd /feast-repo feast materialize \"$(date -u -d \"2 days ago\" +%Y-%m-%dT%H:%M:%S)\" \"$(date -u +%Y-%m-%dT%H:%M:%S)\" ' 7-3) online ì¡°íšŒ í™•ì¸ kubectl -n feature-store-dev exec -it \"$POD\" -- sh -lc ' python - \u003c\u003c \"PY\" from feast import FeatureStore store = FeatureStore(\"/feast-repo\") resp = store.get_online_features( features=[ \"user_features:f_total_events_7d\", \"user_features:f_avg_session_sec_7d\", \"user_features:f_last_event_age_sec\", ], entity_rows=[{\"user_id\": 1001}], ) print(resp.to_df()) PY ' 8ï¸âƒ£ íŠ¸ëŸ¬ë¸”ìŠˆíŒ… ConfigMap ì „ì²´ mountë¡œ repoê°€ ê¼¬ì„\nâ†’ subPathë¡œ íŒŒì¼ë§Œ ë§ˆìš´íŠ¸\n/bin/shì—ì„œ pipefail ê¹¨ì§\nâ†’ set -euxë¡œ ê³ ì •\nmaterialize ì‹œ â€œInstall s3fsâ€ ì˜¤ë¥˜\nâ†’ s3fs í¬í•¨ ì»¤ìŠ¤í…€ ì´ë¯¸ì§€ë¡œ êµì²´\nimage repo ì´ë¦„ ì˜¤íƒ€ë¡œ ErrImagePull\nâ†’ values/base.yamlì˜ image repo ì •í™•íˆ êµì •\nğŸ§© ì‹¤ë¬´ íŒ *4íŒŒì¼ ì„¸íŠ¸(parquet/csv/schema/metadata)**ë¥¼ ê°™ì´ ë‚¨ê²¨ì•¼ ìš´ì˜ì—ì„œ í”ë“¤ë¦¬ì§€ ì•ŠìŠµë‹ˆë‹¤.\nlatest overwriteëŠ” ìš´ì˜ í¸ì˜ì˜ í•µì‹¬ì…ë‹ˆë‹¤.\nFeast Offlineì€ latestë§Œ ë³´ê²Œ ë§Œë“¤ë©´ ì‚¬ìš©ìëŠ” ë²„ì „ì„ ëª°ë¼ë„ ë©ë‹ˆë‹¤.\nmaterialize ìë™í™”ëŠ” ë‚˜ì¤‘ì— í•´ë„ ë©ë‹ˆë‹¤.\nìš°ì„ ì€ Feast ì„œë²„ì—ì„œ ì•ˆì •ì ìœ¼ë¡œ ì‹¤í–‰ë˜ëŠ” êµ¬ì¡°ê°€ ë” ë‹¨ë‹¨í•©ë‹ˆë‹¤.\nğŸ”§ MLOps ì‹¤ì „ ì—°ê²° Trainingì´ v_YYYY...ë¥¼ ë°›ì•„ í•™ìŠµí•˜ë©´\nâ€œì´ ëª¨ë¸ì€ ì–´ë–¤ feature versionìœ¼ë¡œ í•™ìŠµí–ˆëŠ”ê°€â€ê°€ ìë™ìœ¼ë¡œ ì—°ê²°ë©ë‹ˆë‹¤.\nOnline storeê°€ ìƒê¸°ë©´\nServing(FastAPI ë“±)ì´ Redisì—ì„œ ì¦‰ì‹œ ì¡°íšŒí•˜ë©° Offline/Online ê³„ì•½ì´ ì¼ì¹˜í•©ë‹ˆë‹¤.\nvalidate ë‹¨ê³„ í™•ì¥ìœ¼ë¡œ drift/í’ˆì§ˆ ê²€ì¦(Null-rate, schema drift ë“±)ë„ ìì—°ìŠ¤ëŸ½ê²Œ ë¶™ìŠµë‹ˆë‹¤.\nğŸ ì •ë¦¬ FeastëŠ” Feature Store-liteì˜ â€œì¬í˜„ì„± ë¼ˆëŒ€â€ ìœ„ì—,\nlatest/features.parquet ê³ ì • í¬ì¸í„° registry(S3) + online(redis) + feature server materialize + online ì¡°íšŒ ê¹Œì§€ ë¶™ì—¬ì„œ, â€œì €ì¥í•˜ëŠ” íŒŒì´í”„ë¼ì¸â€ì„ â€œì¡°íšŒ ê°€ëŠ¥í•œ í”¼ì²˜ í”Œë«í¼â€ìœ¼ë¡œ í™•ì¥í•œ ë‹¨ê³„ì…ë‹ˆë‹¤.\n","wordCount":"1091","inLanguage":"en","datePublished":"2026-01-15T17:15:38+12:03","dateModified":"2026-01-15T17:15:38+12:03","mainEntityOfPage":{"@type":"WebPage","@id":"https://keonhoban.github.io/mlops-journey/posts/mlops-platform-feature-store/02/"},"publisher":{"@type":"Organization","name":"ğŸ”ï¸  MLOps Journey","logo":{"@type":"ImageObject","url":"https://keonhoban.github.io/mlops-journey/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://keonhoban.github.io/mlops-journey/ accesskey=h title="ğŸ”ï¸  MLOps Journey (Alt + H)">ğŸ”ï¸ MLOps Journey</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)" aria-label="Toggle theme"><svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://keonhoban.github.io/mlops-journey/ title="ğŸ  Home"><span>ğŸ  Home</span></a></li><li><a href=https://keonhoban.github.io/mlops-journey/projects/ title="ğŸ“‚ Projects"><span>ğŸ“‚ Projects</span></a></li><li><a href=https://keonhoban.github.io/mlops-journey/posts/ title="ğŸ“ Blog"><span>ğŸ“ Blog</span></a></li><li><a href=https://keonhoban.github.io/mlops-journey/about/ title="ğŸ§— About"><span>ğŸ§— About</span></a></li><li><a href=https://keonhoban.github.io/mlops-journey/categories/ title="ğŸ“– Categories"><span>ğŸ“– Categories</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://keonhoban.github.io/mlops-journey/>Home</a>&nbsp;Â»&nbsp;<a href=https://keonhoban.github.io/mlops-journey/posts/>Posts</a></div><h1 class="post-title entry-hint-parent">[Feature Store & Feast - Feast]</h1><div class=post-meta><span title='2026-01-15 17:15:38 +1203 +1203'>January 15, 2026</span>&nbsp;Â·&nbsp;6 min</div></header><div class=post-content><h1 id=feature-store--feast---feast>Feature Store & Feast - Feast]<a hidden class=anchor aria-hidden=true href=#feature-store--feast---feast>#</a></h1><h2 id=gitopsë¡œ-feast-ê³„ì•½-ë°°í¬--airflowë¡œ-ë²„ì „í™”latest-ê°±ì‹ --feastregistrys3-offlineredis-onlineë¡œ-ì˜¨ë¼ì¸-ì¡°íšŒê¹Œì§€>GitOpsë¡œ Feast ê³„ì•½ ë°°í¬ + Airflowë¡œ ë²„ì „í™”/Latest ê°±ì‹  + Feast(Registry/S3 Offline/Redis Online)ë¡œ ì˜¨ë¼ì¸ ì¡°íšŒê¹Œì§€<a hidden class=anchor aria-hidden=true href=#gitopsë¡œ-feast-ê³„ì•½-ë°°í¬--airflowë¡œ-ë²„ì „í™”latest-ê°±ì‹ --feastregistrys3-offlineredis-onlineë¡œ-ì˜¨ë¼ì¸-ì¡°íšŒê¹Œì§€>#</a></h2><hr><h2 id=-ì‹œë‚˜ë¦¬ì˜¤>ğŸ§  ì‹œë‚˜ë¦¬ì˜¤<a hidden class=anchor aria-hidden=true href=#-ì‹œë‚˜ë¦¬ì˜¤>#</a></h2><p>ì´ì „ ê¸€(Feature Store-lite)ì—ì„œ ì €ëŠ” <strong>ê³„ì•½(ìŠ¤í‚¤ë§ˆ/ë©”íƒ€) + ë²„ì „í™” ì €ì¥ + ì¬í˜„ì„±</strong>ê¹Œì§€ ê³ ì •í–ˆìŠµë‹ˆë‹¤.</p><p>í•˜ì§€ë§Œ ì‹¤ë¬´ì—ì„œëŠ” â€œì €ì¥â€ì—ì„œ ëë‚˜ì§€ ì•ŠìŠµë‹ˆë‹¤. ê²°êµ­ ì¤‘ìš”í•œ ê±´ <strong>ì¡°íšŒ ê°€ëŠ¥(Serving-ready)</strong> ìƒíƒœì…ë‹ˆë‹¤.</p><p>ì´ë²ˆ ê¸€ì€ Feature Store-lite ìœ„ì— Feastë¥¼ ì–¹ì–´ ì•„ë˜ë¥¼ ì™„ì„±í•©ë‹ˆë‹¤.</p><ul><li><strong>Offline Source</strong>: S3ì˜ <code>latest/features.parquet</code> (Feastê°€ ì½ëŠ” ê³ ì • í¬ì¸í„°)</li><li><strong>Registry</strong>: S3ì— <code>registry.pb</code> ì €ì¥(í™˜ê²½ë³„ ë¶„ë¦¬)</li><li><strong>Online Store</strong>: Redis ì ì¬(materialize)ë¡œ ì˜¨ë¼ì¸ ì¡°íšŒ ê°€ëŠ¥</li><li><strong>Feature Server</strong>: ìƒì‹œ ì„œë¹„ìŠ¤ + startup ì‹œ <code>feast apply</code></li></ul><p>ì¦‰, **â€œì €ì¥í•˜ëŠ” íŒŒì´í”„ë¼ì¸â€ â†’ â€œì¡°íšŒ ê°€ëŠ¥í•œ í”¼ì²˜ í”Œë«í¼â€**ìœ¼ë¡œ í™•ì¥í•˜ëŠ” ë‹¨ê³„ì…ë‹ˆë‹¤.</p><hr><h2 id=-ì™„ë£Œ-ê¸°ì¤€>ğŸ¯ ì™„ë£Œ ê¸°ì¤€<a hidden class=anchor aria-hidden=true href=#-ì™„ë£Œ-ê¸°ì¤€>#</a></h2><ul><li>GitOpsë¡œ Feast ê³„ì•½(repo.py/feature_store.yaml) ë°°í¬</li><li>Airflowë¡œ S3ì— <strong>version ìœ ì§€ + latest overwrite</strong> ì €ì¥</li><li>Feast materialize ì‹¤í–‰ â†’ Redis online ì ì¬</li><li>Feast SDKë¡œ online ì¡°íšŒ ê²°ê³¼ê°€ <strong>Noneì´ ì•„ë‹Œ ì‹¤ì œ ê°’</strong>ìœ¼ë¡œ í™•ì¸</li></ul><hr><h2 id=-í•µì‹¬-ìš”ì•½>âœ… í•µì‹¬ ìš”ì•½<a hidden class=anchor aria-hidden=true href=#-í•µì‹¬-ìš”ì•½>#</a></h2><ul><li><strong>dev/prod í™˜ê²½ ë¶„ë¦¬</strong><ul><li><code>feature-store-dev</code>, <code>feature-store-prod</code> (Feast + Redis)</li><li><code>airflow-dev</code>, <code>airflow-prod</code> (KubernetesExecutor)</li></ul></li><li><strong>Feast ë¦¬ì†ŒìŠ¤ GitOps ë°°í¬</strong><ul><li><code>feature_store.yaml</code> + <code>repo.py</code>ë¥¼ ConfigMapìœ¼ë¡œ ë°°í¬</li><li>ArgoCD Applicationìœ¼ë¡œ ê´€ë¦¬ (<code>apps/feast-*.yaml</code>)</li></ul></li><li><strong>S3 ì €ì¥ ì •ì±…(ìš´ì˜ í‘œì¤€)</strong><ul><li><code>v_YYYYMMDDTHHMMSS/</code> : ì¬í˜„ì„±(ë²„ì „) ìœ ì§€</li><li><code>latest/</code> : ìš´ì˜ í¸ì˜(ê³ ì • í¬ì¸í„°) overwrite</li><li><strong>4íŒŒì¼ ì„¸íŠ¸ ê³ ì •</strong><ul><li><code>features.parquet</code>, <code>features.csv</code>, <code>schema.json</code>, <code>metadata.json</code></li></ul></li></ul></li><li><strong>Feast êµ¬ì„±</strong><ul><li>Registry: S3 (<code>s3://&lt;bucket>/feast/&lt;env>/registry.pb</code>)</li><li>Offline Source: S3 <code>.../latest/features.parquet</code> (í•„ìˆ˜: <code>event_timestamp</code>)</li><li>Online Store: Redis</li><li>Feature Server: startup ì‹œ <code>feast apply</code> í›„ <code>feast serve</code></li></ul></li><li><strong>ì‹¤ì œ ìš´ì˜ ì´ìŠˆ í•´ê²° í¬í•¨</strong><ul><li>ConfigMap ì „ì²´ mountë¡œ ì¸í•œ ë””ë ‰í† ë¦¬(<code>..</code>) ì´ìŠˆ â†’ <strong>subPathë¡œ íŒŒì¼ë§Œ mount</strong></li><li><code>/bin/sh</code>ì—ì„œ <code>pipefail</code> ê¹¨ì§ â†’ <strong>sh í˜¸í™˜(set -eux)</strong></li><li>materialize ì‹œ S3 parquet ì½ê¸° ì‹¤íŒ¨ â†’ <strong>s3fs í¬í•¨ ì´ë¯¸ì§€ë¡œ í•´ê²°</strong></li></ul></li></ul><hr><h2 id=1-ì „ì²´-êµ¬ì¡°>1ï¸âƒ£ ì „ì²´ êµ¬ì¡°<a hidden class=anchor aria-hidden=true href=#1-ì „ì²´-êµ¬ì¡°>#</a></h2><p><img alt=mermaid-feast-01.png loading=lazy src=/mlops-journey/images/mermaid-feast-01.png></p><hr><h2 id=2-ì½”ë“œë¦¬ì†ŒìŠ¤-íŠ¸ë¦¬>2ï¸âƒ£ ì½”ë“œ/ë¦¬ì†ŒìŠ¤ íŠ¸ë¦¬<a hidden class=anchor aria-hidden=true href=#2-ì½”ë“œë¦¬ì†ŒìŠ¤-íŠ¸ë¦¬>#</a></h2><h3 id=a-gitops-mlops-infra-gitops>(A) GitOps (mlops-infra-gitops)<a hidden class=anchor aria-hidden=true href=#a-gitops-mlops-infra-gitops>#</a></h3><pre tabindex=0><code>charts/
  feast/
    templates/
      feast-repo-configmap.yaml
      feast-server-deployment.yaml
      feast-server-service.yaml
      redis-deployment.yaml
      redis-service.yaml
    values/
base.yaml
      dev.yaml
      prod.yaml

apps/
  feast-dev.yaml
  feast-prod.yaml

envs/
  dev/sealed-secrets/feature-store/sealed-aws-credentials-secret.yaml
  prod/sealed-secrets/feature-store/sealed-aws-credentials-secret.yaml
</code></pre><h3 id=b-airflow-airflow-dags-dev>(B) Airflow (airflow-dags-dev)<a hidden class=anchor aria-hidden=true href=#b-airflow-airflow-dags-dev>#</a></h3><pre tabindex=0><code>dags/
  dag_data_pipeline_daily_dev_v5.py
  mlops_lib/
    dp/
      build.py
      store.py
  .airflowignore
</code></pre><hr><h2 id=3-ì„¤ê³„-í¬ì¸íŠ¸-ìš´ì˜-ê´€ì >3ï¸âƒ£ ì„¤ê³„ í¬ì¸íŠ¸ (ìš´ì˜ ê´€ì )<a hidden class=anchor aria-hidden=true href=#3-ì„¤ê³„-í¬ì¸íŠ¸-ìš´ì˜-ê´€ì >#</a></h2><h3 id=1-feast-repo-ìì²´ë¥¼-ê³„ì•½contractìœ¼ë¡œ-ì·¨ê¸‰>(1) Feast repo ìì²´ë¥¼ â€œê³„ì•½(Contract)â€ìœ¼ë¡œ ì·¨ê¸‰<a hidden class=anchor aria-hidden=true href=#1-feast-repo-ìì²´ë¥¼-ê³„ì•½contractìœ¼ë¡œ-ì·¨ê¸‰>#</a></h3><p>Feastì—ì„œ ì‹¤ì§ˆì ì¸ ê³„ì•½ì€ <code>repo.py + feature_store.yaml</code>ì…ë‹ˆë‹¤.</p><p>ì´ê±¸ ConfigMapìœ¼ë¡œ GitOps ë°°í¬í•˜ë©´:</p><ul><li>dev/prodì—ì„œ <strong>ë™ì¼ ê³„ì•½ ìœ ì§€</strong></li><li>ì½”ë“œ ìˆ˜ì • ì—†ì´ ë°°í¬/ë¡¤ë°± ê°€ëŠ¥</li><li>â€œìš´ì˜ ë¦¬ì†ŒìŠ¤â€ë¡œ ì¶”ì  ê°€ëŠ¥</li></ul><h3 id=2-s3-ì €ì¥-ì •ì±…ì€-ë²„ì „--latest-í¬ì¸í„°ë¡œ-ëë‚¸ë‹¤>(2) S3 ì €ì¥ ì •ì±…ì€ â€œë²„ì „ + latest í¬ì¸í„°â€ë¡œ ëë‚¸ë‹¤<a hidden class=anchor aria-hidden=true href=#2-s3-ì €ì¥-ì •ì±…ì€-ë²„ì „--latest-í¬ì¸í„°ë¡œ-ëë‚¸ë‹¤>#</a></h3><ul><li><code>.../&lt;feature_set>/&lt;version>/</code> : ì¬í˜„ì„±</li><li><code>.../&lt;feature_set>/latest/</code> : ìš´ì˜ í¸ì˜</li></ul><p>Feast Offlineì€ <strong>latestë§Œ ì½ìœ¼ë©´ ë˜ê¸° ë•Œë¬¸ì—</strong>, ì‚¬ìš©ìëŠ” ë²„ì „ì„ ëª°ë¼ë„ ë©ë‹ˆë‹¤.</p><p>ë²„ì „ì€ â€œì¬í˜„â€ì´ í•„ìš”í•  ë•Œë§Œ êº¼ë‚´ ì“°ëŠ” êµ¬ì¡°ê°€ ê°€ì¥ ë‹¨ë‹¨í•©ë‹ˆë‹¤.</p><h3 id=3-airflowëŠ”-ìƒì„±ì €ì¥ê¹Œì§€ë§Œ-online-ì ì¬ëŠ”-feastê°€-ë‹´ë‹¹>(3) AirflowëŠ” ìƒì„±/ì €ì¥ê¹Œì§€ë§Œ, Online ì ì¬ëŠ” Feastê°€ ë‹´ë‹¹<a hidden class=anchor aria-hidden=true href=#3-airflowëŠ”-ìƒì„±ì €ì¥ê¹Œì§€ë§Œ-online-ì ì¬ëŠ”-feastê°€-ë‹´ë‹¹>#</a></h3><p>Airflow ì´ë¯¸ì§€ì— feast/pyarrow/s3fsê¹Œì§€ ì–¹ê¸° ì‹œì‘í•˜ë©´ ìš´ì˜ ë‚œì´ë„ê°€ ê¸‰ìƒìŠ¹í•©ë‹ˆë‹¤.</p><p>ê·¸ë˜ì„œ ì—­í• ì„ ë‚˜ëˆ´ìŠµë‹ˆë‹¤.</p><ul><li>Airflow: <strong>feature ìƒì„± + S3 ì €ì¥(ë²„ì „/latest)</strong></li><li>Feast: <strong>materialize + online(redis) ì ì¬ + ì¡°íšŒ</strong></li></ul><p>(ìë™í™”ëŠ” ì¶”í›„ Job/CronJobë¡œ í™•ì¥)</p><hr><h2 id=4-gitops-feast-ë°°í¬-redis--feature-server--repo-configmap>4ï¸âƒ£ GitOps: Feast ë°°í¬ (Redis + Feature Server + Repo ConfigMap)<a hidden class=anchor aria-hidden=true href=#4-gitops-feast-ë°°í¬-redis--feature-server--repo-configmap>#</a></h2><h3 id=4-1-values-basedevprod>4-1) values (base/dev/prod)<a hidden class=anchor aria-hidden=true href=#4-1-values-basedevprod>#</a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#75715e># charts/feast/values/base.yaml</span>
</span></span><span style=display:flex><span><span style=color:#f92672>aws</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>region</span>: <span style=color:#ae81ff>ap-northeast-2</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>credentialsSecretName</span>: <span style=color:#ae81ff>aws-credentials</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>s3</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>bucket</span>: <span style=color:#ae81ff>datapipeline-raw-data-keonho</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>featurePrefix</span>: <span style=color:#ae81ff>feature-store/user_features</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>registryPrefix</span>: <span style=color:#ae81ff>feast</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>feastServer</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>image</span>: <span style=color:#ae81ff>hoizz/feast-server:0.40.1-s3fs</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>port</span>: <span style=color:#ae81ff>6566</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>redis</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>image</span>: <span style=color:#ae81ff>redis:7.2-alpine</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>persistence</span>: <span style=color:#66d9ef>true</span>
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#75715e># charts/feast/values/dev.yaml</span>
</span></span><span style=display:flex><span><span style=color:#f92672>env</span>: <span style=color:#ae81ff>dev</span>
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#75715e># charts/feast/values/prod.yaml</span>
</span></span><span style=display:flex><span><span style=color:#f92672>env</span>: <span style=color:#ae81ff>prod</span>
</span></span></code></pre></div><h3 id=4-2-feast-repo-configmap-parquet--event_timestamp--serialization-v2>4-2) Feast repo ConfigMap (parquet + event_timestamp + serialization v2)<a hidden class=anchor aria-hidden=true href=#4-2-feast-repo-configmap-parquet--event_timestamp--serialization-v2>#</a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#f92672>apiVersion</span>: <span style=color:#ae81ff>v1</span>
</span></span><span style=display:flex><span><span style=color:#f92672>kind</span>: <span style=color:#ae81ff>ConfigMap</span>
</span></span><span style=display:flex><span><span style=color:#f92672>metadata</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>name</span>: <span style=color:#ae81ff>feast-repo</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>namespace</span>: {{ <span style=color:#ae81ff>.Release.Namespace }}</span>
</span></span><span style=display:flex><span><span style=color:#f92672>data</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>feature_store.yaml</span>: |<span style=color:#e6db74>
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    project: feature_store_{{ .Values.env }}
</span></span></span><span style=display:flex><span><span style=color:#e6db74>
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    registry:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>      path: s3://{{ .Values.s3.bucket }}/{{ .Values.s3.registryPrefix }}/{{ .Values.env }}/registry.pb
</span></span></span><span style=display:flex><span><span style=color:#e6db74>
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    provider: local
</span></span></span><span style=display:flex><span><span style=color:#e6db74>
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    offline_store:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>      type: file
</span></span></span><span style=display:flex><span><span style=color:#e6db74>
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    online_store:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>      type: redis
</span></span></span><span style=display:flex><span><span style=color:#e6db74>      connection_string: redis.{{ .Release.Namespace }}.svc.cluster.local:6379
</span></span></span><span style=display:flex><span><span style=color:#e6db74>
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    entity_key_serialization_version: 2</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>repo.py</span>: |<span style=color:#e6db74>
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    from datetime import timedelta
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    from feast import Entity, FeatureView, Field
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    from feast.infra.offline_stores.file_source import FileSource
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    from feast.types import Int64, Float64
</span></span></span><span style=display:flex><span><span style=color:#e6db74>
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    user_features_source = FileSource(
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        path=&#34;s3://{{ .Values.s3.bucket }}/{{ .Values.s3.featurePrefix }}/latest/features.parquet&#34;,
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        timestamp_field=&#34;event_timestamp&#34;,
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        created_timestamp_column=None,
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    )
</span></span></span><span style=display:flex><span><span style=color:#e6db74>
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    user = Entity(
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        name=&#34;user&#34;,
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        join_keys=[&#34;user_id&#34;],
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    )
</span></span></span><span style=display:flex><span><span style=color:#e6db74>
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    user_features = FeatureView(
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        name=&#34;user_features&#34;,
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        entities=[user],
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        ttl=timedelta(days=7),
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        schema=[
</span></span></span><span style=display:flex><span><span style=color:#e6db74>            Field(name=&#34;f_total_events_7d&#34;, dtype=Int64),
</span></span></span><span style=display:flex><span><span style=color:#e6db74>            Field(name=&#34;f_avg_session_sec_7d&#34;, dtype=Float64),
</span></span></span><span style=display:flex><span><span style=color:#e6db74>            Field(name=&#34;f_last_event_age_sec&#34;, dtype=Int64),
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        ],
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        source=user_features_source,
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        online=True,
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    )</span>
</span></span></code></pre></div><h3 id=4-3-feast-ì„œë²„-deployment-subpath--sh-í˜¸í™˜--startup-apply>4-3) Feast ì„œë²„ Deployment (subPath + sh í˜¸í™˜ + startup apply)<a hidden class=anchor aria-hidden=true href=#4-3-feast-ì„œë²„-deployment-subpath--sh-í˜¸í™˜--startup-apply>#</a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#f92672>apiVersion</span>: <span style=color:#ae81ff>apps/v1</span>
</span></span><span style=display:flex><span><span style=color:#f92672>kind</span>: <span style=color:#ae81ff>Deployment</span>
</span></span><span style=display:flex><span><span style=color:#f92672>metadata</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>name</span>: <span style=color:#ae81ff>feast-server</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>namespace</span>: {{ <span style=color:#ae81ff>.Release.Namespace }}</span>
</span></span><span style=display:flex><span><span style=color:#f92672>spec</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>replicas</span>: <span style=color:#ae81ff>1</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>selector</span>:
</span></span><span style=display:flex><span>    <span style=color:#f92672>matchLabels</span>:
</span></span><span style=display:flex><span>      <span style=color:#f92672>app</span>: <span style=color:#ae81ff>feast-server</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>template</span>:
</span></span><span style=display:flex><span>    <span style=color:#f92672>metadata</span>:
</span></span><span style=display:flex><span>      <span style=color:#f92672>labels</span>:
</span></span><span style=display:flex><span>        <span style=color:#f92672>app</span>: <span style=color:#ae81ff>feast-server</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>spec</span>:
</span></span><span style=display:flex><span>      <span style=color:#f92672>containers</span>:
</span></span><span style=display:flex><span>        - <span style=color:#f92672>name</span>: <span style=color:#ae81ff>feast-server</span>
</span></span><span style=display:flex><span>          <span style=color:#f92672>image</span>: {{ <span style=color:#ae81ff>.Values.feastServer.image }}</span>
</span></span><span style=display:flex><span>          <span style=color:#f92672>ports</span>:
</span></span><span style=display:flex><span>            - <span style=color:#f92672>containerPort</span>: {{ <span style=color:#ae81ff>.Values.feastServer.port }}</span>
</span></span><span style=display:flex><span>          <span style=color:#f92672>env</span>:
</span></span><span style=display:flex><span>            - <span style=color:#f92672>name</span>: <span style=color:#ae81ff>AWS_SHARED_CREDENTIALS_FILE</span>
</span></span><span style=display:flex><span>              <span style=color:#f92672>value</span>: <span style=color:#ae81ff>/root/.aws/credentials</span>
</span></span><span style=display:flex><span>            - <span style=color:#f92672>name</span>: <span style=color:#ae81ff>AWS_REGION</span>
</span></span><span style=display:flex><span>              <span style=color:#f92672>value</span>: {{ <span style=color:#ae81ff>.Values.aws.region }}</span>
</span></span><span style=display:flex><span>            - <span style=color:#f92672>name</span>: <span style=color:#ae81ff>AWS_DEFAULT_REGION</span>
</span></span><span style=display:flex><span>              <span style=color:#f92672>value</span>: {{ <span style=color:#ae81ff>.Values.aws.region }}</span>
</span></span><span style=display:flex><span>          <span style=color:#f92672>volumeMounts</span>:
</span></span><span style=display:flex><span>            - <span style=color:#f92672>name</span>: <span style=color:#ae81ff>feast-repo</span>
</span></span><span style=display:flex><span>              <span style=color:#f92672>mountPath</span>: <span style=color:#ae81ff>/feast-repo/feature_store.yaml</span>
</span></span><span style=display:flex><span>              <span style=color:#f92672>subPath</span>: <span style=color:#ae81ff>feature_store.yaml</span>
</span></span><span style=display:flex><span>              <span style=color:#f92672>readOnly</span>: <span style=color:#66d9ef>true</span>
</span></span><span style=display:flex><span>            - <span style=color:#f92672>name</span>: <span style=color:#ae81ff>feast-repo</span>
</span></span><span style=display:flex><span>              <span style=color:#f92672>mountPath</span>: <span style=color:#ae81ff>/feast-repo/repo.py</span>
</span></span><span style=display:flex><span>              <span style=color:#f92672>subPath</span>: <span style=color:#ae81ff>repo.py</span>
</span></span><span style=display:flex><span>              <span style=color:#f92672>readOnly</span>: <span style=color:#66d9ef>true</span>
</span></span><span style=display:flex><span>            - <span style=color:#f92672>name</span>: <span style=color:#ae81ff>aws-credentials</span>
</span></span><span style=display:flex><span>              <span style=color:#f92672>mountPath</span>: <span style=color:#ae81ff>/root/.aws</span>
</span></span><span style=display:flex><span>              <span style=color:#f92672>readOnly</span>: <span style=color:#66d9ef>true</span>
</span></span><span style=display:flex><span>          <span style=color:#f92672>command</span>: [<span style=color:#e6db74>&#34;/bin/sh&#34;</span>,<span style=color:#e6db74>&#34;-c&#34;</span>]
</span></span><span style=display:flex><span>          <span style=color:#f92672>args</span>:
</span></span><span style=display:flex><span>            - |<span style=color:#e6db74>
</span></span></span><span style=display:flex><span><span style=color:#e6db74>              set -eux
</span></span></span><span style=display:flex><span><span style=color:#e6db74>              cd /feast-repo
</span></span></span><span style=display:flex><span><span style=color:#e6db74>              feast apply
</span></span></span><span style=display:flex><span><span style=color:#e6db74>              feast serve --host 0.0.0.0 --port 6566</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>volumes</span>:
</span></span><span style=display:flex><span>        - <span style=color:#f92672>name</span>: <span style=color:#ae81ff>feast-repo</span>
</span></span><span style=display:flex><span>          <span style=color:#f92672>configMap</span>:
</span></span><span style=display:flex><span>            <span style=color:#f92672>name</span>: <span style=color:#ae81ff>feast-repo</span>
</span></span><span style=display:flex><span>        - <span style=color:#f92672>name</span>: <span style=color:#ae81ff>aws-credentials</span>
</span></span><span style=display:flex><span>          <span style=color:#f92672>secret</span>:
</span></span><span style=display:flex><span>            <span style=color:#f92672>secretName</span>: {{ <span style=color:#ae81ff>.Values.aws.credentialsSecretName }}</span>
</span></span></code></pre></div><hr><h2 id=5-í•„ìˆ˜-s3fs-í¬í•¨-feast-ì´ë¯¸ì§€-ì¤€ë¹„>5ï¸âƒ£ (í•„ìˆ˜) s3fs í¬í•¨ Feast ì´ë¯¸ì§€ ì¤€ë¹„<a hidden class=anchor aria-hidden=true href=#5-í•„ìˆ˜-s3fs-í¬í•¨-feast-ì´ë¯¸ì§€-ì¤€ë¹„>#</a></h2><p>Feast materializeê°€ S3 parquetë¥¼ ì½ìœ¼ë ¤ë©´ <code>s3fs</code>ê°€ í•„ìš”í•©ë‹ˆë‹¤.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-docker data-lang=docker><span style=display:flex><span><span style=color:#66d9ef>FROM</span><span style=color:#e6db74> feastdev/feature-server:0.40.1</span><span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010></span><span style=color:#66d9ef>RUN</span> pip install --no-cache-dir s3fs fsspec<span style=color:#960050;background-color:#1e0010>
</span></span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>docker build -t hoizz/feast-server:0.40.1-s3fs .
</span></span><span style=display:flex><span>docker push hoizz/feast-server:0.40.1-s3fs
</span></span></code></pre></div><hr><h2 id=6-airflow-ë²„ì „í™”-ì €ì¥--latest-overwrite-parquet-ê¸°ì¤€>6ï¸âƒ£ Airflow: â€œë²„ì „í™” ì €ì¥ + latest overwriteâ€ (parquet ê¸°ì¤€)<a hidden class=anchor aria-hidden=true href=#6-airflow-ë²„ì „í™”-ì €ì¥--latest-overwrite-parquet-ê¸°ì¤€>#</a></h2><p>ì—¬ê¸°ì„œë¶€í„°ê°€ Feast ê¸€ì˜ í•µì‹¬ì…ë‹ˆë‹¤.</p><p>FeastëŠ” Offlineì„ <code>latest/features.parquet</code>ë¡œ ê³ ì •í•´ ì½ê¸° ë•Œë¬¸ì—, Airflowê°€ <strong>latestë¥¼ ë§¤ë²ˆ ê°±ì‹ </strong>í•´ì¤˜ì•¼ í•©ë‹ˆë‹¤.</p><h3 id=1-dag-íë¦„ë§Œ-ë‹´ë‹¹>(1) DAG: íë¦„ë§Œ ë‹´ë‹¹<a hidden class=anchor aria-hidden=true href=#1-dag-íë¦„ë§Œ-ë‹´ë‹¹>#</a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#75715e># dags/dag_data_pipeline_daily_dev_v5.py (ìš”ì•½)</span>
</span></span><span style=display:flex><span><span style=color:#f92672>from</span> datetime <span style=color:#f92672>import</span> datetime, timedelta
</span></span><span style=display:flex><span><span style=color:#f92672>from</span> airflow <span style=color:#f92672>import</span> DAG
</span></span><span style=display:flex><span><span style=color:#f92672>from</span> airflow.operators.python <span style=color:#f92672>import</span> PythonOperator
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>from</span> mlops_lib.dp.build <span style=color:#f92672>import</span> build_features
</span></span><span style=display:flex><span><span style=color:#f92672>from</span> mlops_lib.dp.store <span style=color:#f92672>import</span> store_features
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>DEFAULT_ARGS <span style=color:#f92672>=</span> {
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;owner&#34;</span>: <span style=color:#e6db74>&#34;airflow&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;retries&#34;</span>: <span style=color:#ae81ff>1</span>,
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;retry_delay&#34;</span>: timedelta(minutes<span style=color:#f92672>=</span><span style=color:#ae81ff>3</span>),
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>with</span> DAG(
</span></span><span style=display:flex><span>    dag_id<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;data_pipeline_daily_dev_v5&#34;</span>,
</span></span><span style=display:flex><span>    default_args<span style=color:#f92672>=</span>DEFAULT_ARGS,
</span></span><span style=display:flex><span>    start_date<span style=color:#f92672>=</span>datetime(<span style=color:#ae81ff>2026</span>, <span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>1</span>),
</span></span><span style=display:flex><span>    schedule<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;0 0 * * *&#34;</span>,
</span></span><span style=display:flex><span>    catchup<span style=color:#f92672>=</span><span style=color:#66d9ef>False</span>,
</span></span><span style=display:flex><span>    tags<span style=color:#f92672>=</span>[<span style=color:#e6db74>&#34;dp&#34;</span>, <span style=color:#e6db74>&#34;feature-store&#34;</span>],
</span></span><span style=display:flex><span>) <span style=color:#66d9ef>as</span> dag:
</span></span><span style=display:flex><span>    t_build <span style=color:#f92672>=</span> PythonOperator(task_id<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;build_features&#34;</span>, python_callable<span style=color:#f92672>=</span>build_features)
</span></span><span style=display:flex><span>    t_store <span style=color:#f92672>=</span> PythonOperator(
</span></span><span style=display:flex><span>        task_id<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;store_features&#34;</span>,
</span></span><span style=display:flex><span>        python_callable<span style=color:#f92672>=</span>store_features,
</span></span><span style=display:flex><span>        op_kwargs<span style=color:#f92672>=</span>{
</span></span><span style=display:flex><span>            <span style=color:#e6db74>&#34;feature_base&#34;</span>: <span style=color:#e6db74>&#34;s3://datapipeline-raw-data-keonho/feature-store&#34;</span>,
</span></span><span style=display:flex><span>            <span style=color:#e6db74>&#34;pipeline_name&#34;</span>: <span style=color:#e6db74>&#34;data_pipeline_daily_dev_v5&#34;</span>,
</span></span><span style=display:flex><span>            <span style=color:#e6db74>&#34;feature_set&#34;</span>: <span style=color:#e6db74>&#34;user_features&#34;</span>,
</span></span><span style=display:flex><span>            <span style=color:#e6db74>&#34;metadata_tpl_path&#34;</span>: <span style=color:#e6db74>&#34;/opt/airflow/dags/mlops_lib/dp/templates/metadata.json.j2&#34;</span>,
</span></span><span style=display:flex><span>        },
</span></span><span style=display:flex><span>    )
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    t_build <span style=color:#f92672>&gt;&gt;</span> t_store
</span></span></code></pre></div><blockquote><p>í¬ì¸íŠ¸: DAGì—ëŠ” â€œì €ì¥ ì •ì±…(ë²„ì „ + latest)â€ì´ ë“œëŸ¬ë‚˜ì•¼ í•©ë‹ˆë‹¤.</p><p>ì´ê²Œ ê³§ ìš´ì˜ ë¬¸ì„œ ì—­í• ì„ í•©ë‹ˆë‹¤.</p></blockquote><h3 id=2-build-parquetcsv--event_timestamp-ë³´ì¥>(2) build: parquet/csv + event_timestamp ë³´ì¥<a hidden class=anchor aria-hidden=true href=#2-build-parquetcsv--event_timestamp-ë³´ì¥>#</a></h3><ul><li>Feast ê¸°ì¤€: <strong>event_timestamp í•„ìˆ˜</strong></li><li>build ë‹¨ê³„ì—ì„œ Feast ìš”êµ¬ì‚¬í•­ì„ ì¶©ì¡±ì‹œí‚¤ë©´ íŒŒì´í”„ë¼ì¸ì´ ì•ˆì •í•´ì§‘ë‹ˆë‹¤.</li></ul><h3 id=3-store-version--latest-ë™ì‹œ-ì €ì¥4íŒŒì¼-ì„¸íŠ¸>(3) store: version + latest ë™ì‹œ ì €ì¥(4íŒŒì¼ ì„¸íŠ¸)<a hidden class=anchor aria-hidden=true href=#3-store-version--latest-ë™ì‹œ-ì €ì¥4íŒŒì¼-ì„¸íŠ¸>#</a></h3><ul><li><code>.../&lt;feature_set>/&lt;version>/</code> ì €ì¥ (ì¬í˜„ì„±)</li><li><code>.../&lt;feature_set>/latest/</code> overwrite (ìš´ì˜ í¸ì˜)</li><li>ë™ì¼ prefixì— <strong>parquet/csv/schema/metadata</strong>ë¥¼ ë¬¶ì–´ì„œ ì €ì¥</li></ul><hr><h2 id=7-feast-ìš´ì˜ê²€ì¦-ë£¨í‹´-ì„±ê³µ-ì²´í¬>7ï¸âƒ£ Feast ìš´ì˜/ê²€ì¦ ë£¨í‹´ (ì„±ê³µ ì²´í¬)<a hidden class=anchor aria-hidden=true href=#7-feast-ìš´ì˜ê²€ì¦-ë£¨í‹´-ì„±ê³µ-ì²´í¬>#</a></h2><h3 id=7-1-s3fs-í¬í•¨-ì—¬ë¶€-í™•ì¸>7-1) s3fs í¬í•¨ ì—¬ë¶€ í™•ì¸<a hidden class=anchor aria-hidden=true href=#7-1-s3fs-í¬í•¨-ì—¬ë¶€-í™•ì¸>#</a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>POD<span style=color:#f92672>=</span><span style=color:#66d9ef>$(</span>kubectl -n feature-store-dev get pod -l app<span style=color:#f92672>=</span>feast-server -o jsonpath<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;{.items[0].metadata.name}&#39;</span><span style=color:#66d9ef>)</span>
</span></span><span style=display:flex><span>kubectl -n feature-store-dev exec -it <span style=color:#e6db74>&#34;</span>$POD<span style=color:#e6db74>&#34;</span> -- sh -lc <span style=color:#e6db74>&#39;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>python - &lt;&lt; &#34;PY&#34;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>import s3fs, fsspec
</span></span></span><span style=display:flex><span><span style=color:#e6db74>print(&#34;s3fs OK:&#34;, s3fs.__version__)
</span></span></span><span style=display:flex><span><span style=color:#e6db74>print(&#34;fsspec:&#34;, fsspec.__version__)
</span></span></span><span style=display:flex><span><span style=color:#e6db74>PY
</span></span></span><span style=display:flex><span><span style=color:#e6db74>&#39;</span>
</span></span></code></pre></div><h3 id=7-2-materialize-ì‹¤í–‰-ì˜ˆ-ìµœê·¼-2ì¼>7-2) materialize ì‹¤í–‰ (ì˜ˆ: ìµœê·¼ 2ì¼)<a hidden class=anchor aria-hidden=true href=#7-2-materialize-ì‹¤í–‰-ì˜ˆ-ìµœê·¼-2ì¼>#</a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>kubectl -n feature-store-dev exec -it <span style=color:#e6db74>&#34;</span>$POD<span style=color:#e6db74>&#34;</span> -- sh -lc <span style=color:#e6db74>&#39;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>cd /feast-repo
</span></span></span><span style=display:flex><span><span style=color:#e6db74>feast materialize &#34;$(date -u -d &#34;2 days ago&#34; +%Y-%m-%dT%H:%M:%S)&#34; &#34;$(date -u +%Y-%m-%dT%H:%M:%S)&#34;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>&#39;</span>
</span></span></code></pre></div><h3 id=7-3-online-ì¡°íšŒ-í™•ì¸>7-3) online ì¡°íšŒ í™•ì¸<a hidden class=anchor aria-hidden=true href=#7-3-online-ì¡°íšŒ-í™•ì¸>#</a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>kubectl -n feature-store-dev exec -it <span style=color:#e6db74>&#34;</span>$POD<span style=color:#e6db74>&#34;</span> -- sh -lc <span style=color:#e6db74>&#39;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>python - &lt;&lt; &#34;PY&#34;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>from feast import FeatureStore
</span></span></span><span style=display:flex><span><span style=color:#e6db74>store = FeatureStore(&#34;/feast-repo&#34;)
</span></span></span><span style=display:flex><span><span style=color:#e6db74>
</span></span></span><span style=display:flex><span><span style=color:#e6db74>resp = store.get_online_features(
</span></span></span><span style=display:flex><span><span style=color:#e6db74>  features=[
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    &#34;user_features:f_total_events_7d&#34;,
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    &#34;user_features:f_avg_session_sec_7d&#34;,
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    &#34;user_features:f_last_event_age_sec&#34;,
</span></span></span><span style=display:flex><span><span style=color:#e6db74>  ],
</span></span></span><span style=display:flex><span><span style=color:#e6db74>  entity_rows=[{&#34;user_id&#34;: 1001}],
</span></span></span><span style=display:flex><span><span style=color:#e6db74>)
</span></span></span><span style=display:flex><span><span style=color:#e6db74>print(resp.to_df())
</span></span></span><span style=display:flex><span><span style=color:#e6db74>PY
</span></span></span><span style=display:flex><span><span style=color:#e6db74>&#39;</span>
</span></span></code></pre></div><hr><h2 id=8-íŠ¸ëŸ¬ë¸”ìŠˆíŒ…>8ï¸âƒ£ íŠ¸ëŸ¬ë¸”ìŠˆíŒ…<a hidden class=anchor aria-hidden=true href=#8-íŠ¸ëŸ¬ë¸”ìŠˆíŒ…>#</a></h2><ul><li><p><strong>ConfigMap ì „ì²´ mountë¡œ repoê°€ ê¼¬ì„</strong></p><p>â†’ <code>subPath</code>ë¡œ íŒŒì¼ë§Œ ë§ˆìš´íŠ¸</p></li><li><p><strong>/bin/shì—ì„œ pipefail ê¹¨ì§</strong></p><p>â†’ <code>set -eux</code>ë¡œ ê³ ì •</p></li><li><p><strong>materialize ì‹œ â€œInstall s3fsâ€ ì˜¤ë¥˜</strong></p><p>â†’ s3fs í¬í•¨ ì»¤ìŠ¤í…€ ì´ë¯¸ì§€ë¡œ êµì²´</p></li><li><p><strong>image repo ì´ë¦„ ì˜¤íƒ€ë¡œ ErrImagePull</strong></p><p>â†’ values/base.yamlì˜ image repo ì •í™•íˆ êµì •</p></li></ul><hr><h2 id=-ì‹¤ë¬´-íŒ>ğŸ§© ì‹¤ë¬´ íŒ<a hidden class=anchor aria-hidden=true href=#-ì‹¤ë¬´-íŒ>#</a></h2><ul><li><p>*4íŒŒì¼ ì„¸íŠ¸(parquet/csv/schema/metadata)**ë¥¼ ê°™ì´ ë‚¨ê²¨ì•¼ ìš´ì˜ì—ì„œ í”ë“¤ë¦¬ì§€ ì•ŠìŠµë‹ˆë‹¤.</p></li><li><p><strong>latest overwriteëŠ” ìš´ì˜ í¸ì˜ì˜ í•µì‹¬</strong>ì…ë‹ˆë‹¤.</p><p>Feast Offlineì€ latestë§Œ ë³´ê²Œ ë§Œë“¤ë©´ ì‚¬ìš©ìëŠ” ë²„ì „ì„ ëª°ë¼ë„ ë©ë‹ˆë‹¤.</p></li><li><p>materialize ìë™í™”ëŠ” ë‚˜ì¤‘ì— í•´ë„ ë©ë‹ˆë‹¤.</p><p>ìš°ì„ ì€ <strong>Feast ì„œë²„ì—ì„œ ì•ˆì •ì ìœ¼ë¡œ ì‹¤í–‰ë˜ëŠ” êµ¬ì¡°</strong>ê°€ ë” ë‹¨ë‹¨í•©ë‹ˆë‹¤.</p></li></ul><hr><h2 id=-mlops-ì‹¤ì „-ì—°ê²°>ğŸ”§ MLOps ì‹¤ì „ ì—°ê²°<a hidden class=anchor aria-hidden=true href=#-mlops-ì‹¤ì „-ì—°ê²°>#</a></h2><ul><li><p>Trainingì´ <code>v_YYYY...</code>ë¥¼ ë°›ì•„ í•™ìŠµí•˜ë©´</p><p>â€œì´ ëª¨ë¸ì€ ì–´ë–¤ feature versionìœ¼ë¡œ í•™ìŠµí–ˆëŠ”ê°€â€ê°€ ìë™ìœ¼ë¡œ ì—°ê²°ë©ë‹ˆë‹¤.</p></li><li><p>Online storeê°€ ìƒê¸°ë©´</p><p>Serving(FastAPI ë“±)ì´ Redisì—ì„œ ì¦‰ì‹œ ì¡°íšŒí•˜ë©° Offline/Online ê³„ì•½ì´ ì¼ì¹˜í•©ë‹ˆë‹¤.</p></li><li><p>validate ë‹¨ê³„ í™•ì¥ìœ¼ë¡œ drift/í’ˆì§ˆ ê²€ì¦(Null-rate, schema drift ë“±)ë„ ìì—°ìŠ¤ëŸ½ê²Œ ë¶™ìŠµë‹ˆë‹¤.</p></li></ul><hr><h2 id=-ì •ë¦¬>ğŸ ì •ë¦¬<a hidden class=anchor aria-hidden=true href=#-ì •ë¦¬>#</a></h2><p>FeastëŠ” Feature Store-liteì˜ â€œì¬í˜„ì„± ë¼ˆëŒ€â€ ìœ„ì—,</p><ul><li><code>latest/features.parquet</code> ê³ ì • í¬ì¸í„°</li><li>registry(S3) + online(redis) + feature server</li><li>materialize + online ì¡°íšŒ</li></ul><p>ê¹Œì§€ ë¶™ì—¬ì„œ, <strong>â€œì €ì¥í•˜ëŠ” íŒŒì´í”„ë¼ì¸â€ì„ â€œì¡°íšŒ ê°€ëŠ¥í•œ í”¼ì²˜ í”Œë«í¼â€ìœ¼ë¡œ í™•ì¥</strong>í•œ ë‹¨ê³„ì…ë‹ˆë‹¤.</p></div><footer class=post-footer><ul class=post-tags></ul><nav class=paginav><a class=next href=https://keonhoban.github.io/mlops-journey/posts/mlops-platform-feature-store/01/><span class=title>Next Â»</span><br><span>[Feature Store & Feast - Feature Store-lite]</span></a></nav></footer></article></main><footer class=footer><p style=margin-top:1rem>Â© 2025 Keonho Ban | <a href=https://github.com/keonhoban target=_blank>GitHub</a> | <a href=mailto:keonho0510@naver.com>Email</a></p></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>