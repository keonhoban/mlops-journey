<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>[MLOps í”Œë«í¼ Observability & Data Pipeline - 1ë‹¨ê³„ : kube-prometheus-stack + GitOps êµ¬ì¶•] | ğŸ”ï¸ MLOps Journey</title>
<meta name=keywords content><meta name=description content="kube-prometheus-stack + GitOps êµ¬ì¶•

ğŸ§  ì‹œë‚˜ë¦¬ì˜¤ ì„¤ëª…

â€œëª¨ë‹ˆí„°ë§ì€ í•œ ë²ˆ ì„¸íŒ…í•´ë‘ê³  ëë‚˜ëŠ” ê²Œ ì•„ë‹ˆë¼,
í´ëŸ¬ìŠ¤í„°ë¥¼ ê°ˆì•„ì—ì–´ë„ ê°™ì€ ëª¨ìŠµìœ¼ë¡œ ë‹¤ì‹œ ì‚´ì•„ë‚˜ì•¼ í•˜ëŠ” ì¸í”„ë¼ì…ë‹ˆë‹¤.â€
â€œê·¸ë˜ì„œ ì´ë²ˆ ë‹¨ê³„ì—ì„œëŠ” kube-prometheus-stackì„ dev/prodë¡œ ì™„ì „íˆ ë¶„ë¦¬í•˜ê³ ,
ëª¨ë“  êµ¬ì„±ì„ YAML + GitOpsë¡œ ê³ ì •í•´ì„œ
Observability ìŠ¤íƒì„ ì¬í˜„í•  ìˆ˜ ìˆëŠ” ë¼ˆëŒ€ë¥¼ ë¨¼ì € ë§Œë“¤ì—ˆìŠµë‹ˆë‹¤.â€

ğŸ¯ í•µì‹¬ ìš”ì•½


ëª©í‘œ

monitoring-dev / monitoring-prod Observability ìŠ¤íƒì„
YAML + GitOpsë§Œìœ¼ë¡œ ê·¸ëŒ€ë¡œ ì¬í˜„í•  ìˆ˜ ìˆëŠ” ìƒíƒœ ë§Œë“¤ê¸°



êµ¬ì„± ìš”ì†Œ

kube-prometheus-stack 65.5.0 (Prometheus + Alertmanager + Grafana)
nfs-monitoring StorageClass (NFS ê¸°ë°˜ ë™ì  í”„ë¡œë¹„ì €ë‹)
nginx-ingress ê¸°ë°˜ HTTPS Ingress
ArgoCD Application 2ê°œ (monitoring-dev, monitoring-prod)



ë³´ì•ˆ/ìš´ì˜ í¬ì¸íŠ¸"><meta name=author content><link rel=canonical href=https://keonhoban.github.io/mlops-journey/posts/mlops-platform-observability/01/><link crossorigin=anonymous href=/mlops-journey/assets/css/stylesheet.f49d66caae9ea0fd43f21f29e71a8d3e284517ed770f2aa86fa012953ad3c9ef.css integrity="sha256-9J1myq6eoP1D8h8p5xqNPihFF+13Dyqob6ASlTrTye8=" rel="preload stylesheet" as=style><link rel=icon href=https://keonhoban.github.io/mlops-journey/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://keonhoban.github.io/mlops-journey/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://keonhoban.github.io/mlops-journey/favicon-32x32.png><link rel=apple-touch-icon href=https://keonhoban.github.io/mlops-journey/apple-touch-icon.png><link rel=mask-icon href=https://keonhoban.github.io/mlops-journey/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=en href=https://keonhoban.github.io/mlops-journey/posts/mlops-platform-observability/01/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:url" content="https://keonhoban.github.io/mlops-journey/posts/mlops-platform-observability/01/"><meta property="og:site_name" content="ğŸ”ï¸  MLOps Journey"><meta property="og:title" content="[MLOps í”Œë«í¼ Observability & Data Pipeline - 1ë‹¨ê³„ : kube-prometheus-stack + GitOps êµ¬ì¶•]"><meta property="og:description" content="kube-prometheus-stack + GitOps êµ¬ì¶• ğŸ§  ì‹œë‚˜ë¦¬ì˜¤ ì„¤ëª… â€œëª¨ë‹ˆí„°ë§ì€ í•œ ë²ˆ ì„¸íŒ…í•´ë‘ê³  ëë‚˜ëŠ” ê²Œ ì•„ë‹ˆë¼,
í´ëŸ¬ìŠ¤í„°ë¥¼ ê°ˆì•„ì—ì–´ë„ ê°™ì€ ëª¨ìŠµìœ¼ë¡œ ë‹¤ì‹œ ì‚´ì•„ë‚˜ì•¼ í•˜ëŠ” ì¸í”„ë¼ì…ë‹ˆë‹¤.â€
â€œê·¸ë˜ì„œ ì´ë²ˆ ë‹¨ê³„ì—ì„œëŠ” kube-prometheus-stackì„ dev/prodë¡œ ì™„ì „íˆ ë¶„ë¦¬í•˜ê³ ,
ëª¨ë“  êµ¬ì„±ì„ YAML + GitOpsë¡œ ê³ ì •í•´ì„œ
Observability ìŠ¤íƒì„ ì¬í˜„í•  ìˆ˜ ìˆëŠ” ë¼ˆëŒ€ë¥¼ ë¨¼ì € ë§Œë“¤ì—ˆìŠµë‹ˆë‹¤.â€
ğŸ¯ í•µì‹¬ ìš”ì•½ ëª©í‘œ
monitoring-dev / monitoring-prod Observability ìŠ¤íƒì„ YAML + GitOpsë§Œìœ¼ë¡œ ê·¸ëŒ€ë¡œ ì¬í˜„í•  ìˆ˜ ìˆëŠ” ìƒíƒœ ë§Œë“¤ê¸° êµ¬ì„± ìš”ì†Œ
kube-prometheus-stack 65.5.0 (Prometheus + Alertmanager + Grafana) nfs-monitoring StorageClass (NFS ê¸°ë°˜ ë™ì  í”„ë¡œë¹„ì €ë‹) nginx-ingress ê¸°ë°˜ HTTPS Ingress ArgoCD Application 2ê°œ (monitoring-dev, monitoring-prod) ë³´ì•ˆ/ìš´ì˜ í¬ì¸íŠ¸"><meta property="og:locale" content="ko"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2025-10-14T17:10:21+09:00"><meta property="article:modified_time" content="2025-10-14T17:10:21+09:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="[MLOps í”Œë«í¼ Observability & Data Pipeline - 1ë‹¨ê³„ : kube-prometheus-stack + GitOps êµ¬ì¶•]"><meta name=twitter:description content="kube-prometheus-stack + GitOps êµ¬ì¶•

ğŸ§  ì‹œë‚˜ë¦¬ì˜¤ ì„¤ëª…

â€œëª¨ë‹ˆí„°ë§ì€ í•œ ë²ˆ ì„¸íŒ…í•´ë‘ê³  ëë‚˜ëŠ” ê²Œ ì•„ë‹ˆë¼,
í´ëŸ¬ìŠ¤í„°ë¥¼ ê°ˆì•„ì—ì–´ë„ ê°™ì€ ëª¨ìŠµìœ¼ë¡œ ë‹¤ì‹œ ì‚´ì•„ë‚˜ì•¼ í•˜ëŠ” ì¸í”„ë¼ì…ë‹ˆë‹¤.â€
â€œê·¸ë˜ì„œ ì´ë²ˆ ë‹¨ê³„ì—ì„œëŠ” kube-prometheus-stackì„ dev/prodë¡œ ì™„ì „íˆ ë¶„ë¦¬í•˜ê³ ,
ëª¨ë“  êµ¬ì„±ì„ YAML + GitOpsë¡œ ê³ ì •í•´ì„œ
Observability ìŠ¤íƒì„ ì¬í˜„í•  ìˆ˜ ìˆëŠ” ë¼ˆëŒ€ë¥¼ ë¨¼ì € ë§Œë“¤ì—ˆìŠµë‹ˆë‹¤.â€

ğŸ¯ í•µì‹¬ ìš”ì•½


ëª©í‘œ

monitoring-dev / monitoring-prod Observability ìŠ¤íƒì„
YAML + GitOpsë§Œìœ¼ë¡œ ê·¸ëŒ€ë¡œ ì¬í˜„í•  ìˆ˜ ìˆëŠ” ìƒíƒœ ë§Œë“¤ê¸°



êµ¬ì„± ìš”ì†Œ

kube-prometheus-stack 65.5.0 (Prometheus + Alertmanager + Grafana)
nfs-monitoring StorageClass (NFS ê¸°ë°˜ ë™ì  í”„ë¡œë¹„ì €ë‹)
nginx-ingress ê¸°ë°˜ HTTPS Ingress
ArgoCD Application 2ê°œ (monitoring-dev, monitoring-prod)



ë³´ì•ˆ/ìš´ì˜ í¬ì¸íŠ¸"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://keonhoban.github.io/mlops-journey/posts/"},{"@type":"ListItem","position":2,"name":"[MLOps í”Œë«í¼ Observability \u0026 Data Pipeline - 1ë‹¨ê³„ : kube-prometheus-stack + GitOps êµ¬ì¶•]","item":"https://keonhoban.github.io/mlops-journey/posts/mlops-platform-observability/01/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"[MLOps í”Œë«í¼ Observability \u0026 Data Pipeline - 1ë‹¨ê³„ : kube-prometheus-stack + GitOps êµ¬ì¶•]","name":"[MLOps í”Œë«í¼ Observability \u0026 Data Pipeline - 1ë‹¨ê³„ : kube-prometheus-stack \u002b GitOps êµ¬ì¶•]","description":"kube-prometheus-stack + GitOps êµ¬ì¶• ğŸ§  ì‹œë‚˜ë¦¬ì˜¤ ì„¤ëª… â€œëª¨ë‹ˆí„°ë§ì€ í•œ ë²ˆ ì„¸íŒ…í•´ë‘ê³  ëë‚˜ëŠ” ê²Œ ì•„ë‹ˆë¼,\ní´ëŸ¬ìŠ¤í„°ë¥¼ ê°ˆì•„ì—ì–´ë„ ê°™ì€ ëª¨ìŠµìœ¼ë¡œ ë‹¤ì‹œ ì‚´ì•„ë‚˜ì•¼ í•˜ëŠ” ì¸í”„ë¼ì…ë‹ˆë‹¤.â€\nâ€œê·¸ë˜ì„œ ì´ë²ˆ ë‹¨ê³„ì—ì„œëŠ” kube-prometheus-stackì„ dev/prodë¡œ ì™„ì „íˆ ë¶„ë¦¬í•˜ê³ ,\nëª¨ë“  êµ¬ì„±ì„ YAML + GitOpsë¡œ ê³ ì •í•´ì„œ\nObservability ìŠ¤íƒì„ ì¬í˜„í•  ìˆ˜ ìˆëŠ” ë¼ˆëŒ€ë¥¼ ë¨¼ì € ë§Œë“¤ì—ˆìŠµë‹ˆë‹¤.â€\nğŸ¯ í•µì‹¬ ìš”ì•½ ëª©í‘œ\nmonitoring-dev / monitoring-prod Observability ìŠ¤íƒì„ YAML + GitOpsë§Œìœ¼ë¡œ ê·¸ëŒ€ë¡œ ì¬í˜„í•  ìˆ˜ ìˆëŠ” ìƒíƒœ ë§Œë“¤ê¸° êµ¬ì„± ìš”ì†Œ\nkube-prometheus-stack 65.5.0 (Prometheus + Alertmanager + Grafana) nfs-monitoring StorageClass (NFS ê¸°ë°˜ ë™ì  í”„ë¡œë¹„ì €ë‹) nginx-ingress ê¸°ë°˜ HTTPS Ingress ArgoCD Application 2ê°œ (monitoring-dev, monitoring-prod) ë³´ì•ˆ/ìš´ì˜ í¬ì¸íŠ¸\n","keywords":[],"articleBody":"kube-prometheus-stack + GitOps êµ¬ì¶• ğŸ§  ì‹œë‚˜ë¦¬ì˜¤ ì„¤ëª… â€œëª¨ë‹ˆí„°ë§ì€ í•œ ë²ˆ ì„¸íŒ…í•´ë‘ê³  ëë‚˜ëŠ” ê²Œ ì•„ë‹ˆë¼,\ní´ëŸ¬ìŠ¤í„°ë¥¼ ê°ˆì•„ì—ì–´ë„ ê°™ì€ ëª¨ìŠµìœ¼ë¡œ ë‹¤ì‹œ ì‚´ì•„ë‚˜ì•¼ í•˜ëŠ” ì¸í”„ë¼ì…ë‹ˆë‹¤.â€\nâ€œê·¸ë˜ì„œ ì´ë²ˆ ë‹¨ê³„ì—ì„œëŠ” kube-prometheus-stackì„ dev/prodë¡œ ì™„ì „íˆ ë¶„ë¦¬í•˜ê³ ,\nëª¨ë“  êµ¬ì„±ì„ YAML + GitOpsë¡œ ê³ ì •í•´ì„œ\nObservability ìŠ¤íƒì„ ì¬í˜„í•  ìˆ˜ ìˆëŠ” ë¼ˆëŒ€ë¥¼ ë¨¼ì € ë§Œë“¤ì—ˆìŠµë‹ˆë‹¤.â€\nğŸ¯ í•µì‹¬ ìš”ì•½ ëª©í‘œ\nmonitoring-dev / monitoring-prod Observability ìŠ¤íƒì„ YAML + GitOpsë§Œìœ¼ë¡œ ê·¸ëŒ€ë¡œ ì¬í˜„í•  ìˆ˜ ìˆëŠ” ìƒíƒœ ë§Œë“¤ê¸° êµ¬ì„± ìš”ì†Œ\nkube-prometheus-stack 65.5.0 (Prometheus + Alertmanager + Grafana) nfs-monitoring StorageClass (NFS ê¸°ë°˜ ë™ì  í”„ë¡œë¹„ì €ë‹) nginx-ingress ê¸°ë°˜ HTTPS Ingress ArgoCD Application 2ê°œ (monitoring-dev, monitoring-prod) ë³´ì•ˆ/ìš´ì˜ í¬ì¸íŠ¸\nGrafana admin ê³„ì •ì€ Secretìœ¼ë¡œ ë¶„ë¦¬ Alertmanager / Slack / TLS / SealedSecret ì„¸ë¶€ êµ¬ì„±ì€ ì‹œë¦¬ì¦ˆ ë‹¨ê³„ë³„ë¡œ í™•ì¥ 1ï¸âƒ£ ì „ì²´ êµ¬ì¡° ê°œìš” Kubernetes ìœ„ì— monitoring-dev ë„¤ì„ìŠ¤í˜ì´ìŠ¤ monitoring-prod ë„¤ì„ìŠ¤í˜ì´ìŠ¤ ë‘ ë„¤ì„ìŠ¤í˜ì´ìŠ¤ë§ˆë‹¤ kube-prometheus-stack 1ê°œì”© ë°°í¬ Prometheus, Alertmanager, Grafana ê°ê° ë…ë¦½ ëª¨ë“  ë§¤ë‹ˆí˜ìŠ¤íŠ¸ëŠ” Git ë¦¬í¬ì§€í† ë¦¬ì—ì„œ ê´€ë¦¬ apps/monitoring-dev.yaml apps/monitoring-prod.yaml ArgoCDê°€ Auto Sync + SelfHeal ë¡œ ê´€ë¦¬ ğŸ§© ì•„í‚¤í…ì²˜ íë¦„ Slack, TLS, Loki, FastAPI Metrics ë“±ì€ ë’¤í¸ì—ì„œ ì´ êµ¬ì¡° ìœ„ì— ë ˆì´ì–´ì²˜ëŸ¼ í•˜ë‚˜ì”© ì˜¬ë¦¬ëŠ” ë°©ì‹ìœ¼ë¡œ ê°‘ë‹ˆë‹¤.\n2ï¸âƒ£ ì‚¬ì „ ì¤€ë¹„ ì²´í¬ë¦¬ìŠ¤íŠ¸ âœ… ì¸í”„ë¼ ì „ì œ Kubernetes í´ëŸ¬ìŠ¤í„° (master + worker êµ¬ì¡°) kubectl + helm ì‚¬ìš© ê°€ëŠ¥ ArgoCD ì„¤ì¹˜ ë° ë™ì‘ ì¤‘ (argocd ë„¤ì„ìŠ¤í˜ì´ìŠ¤) nginx-ingress ì»¨íŠ¸ë¡¤ëŸ¬ ì„¤ì¹˜ ì™„ë£Œ Git ë¦¬í¬ì§€í† ë¦¬ êµ¬ì¡°ì— apps/ ë””ë ‰í„°ë¦¬ ì¡´ì¬ âœ… NFS / Storage NFS ì„œë²„ (ì˜ˆ: 192.168.18.141) /mnt/nfs_share/mlops/monitoring ë””ë ‰í„°ë¦¬ ìƒì„± nfs-monitoring StorageClass (ë™ì  í”„ë¡œë¹„ì €ë„ˆ) ìƒì„± PrometheusëŠ” 1ì°¨ ë²„ì „ì—ì„œëŠ” NFS ìœ„ì— ì˜¬ë ¤ë‘ê³ ,\në‚˜ì¤‘ì— local-path ê¸°ë°˜ TSDB ìµœì í™”ë¡œ ë°”ê¿”ê°€ëŠ” ìŠ¤í† ë¦¬ë¡œ ì´ì–´ê°‘ë‹ˆë‹¤.\n3ï¸âƒ£ NFS ë° StorageClass êµ¬ì„± 3-1. NFS ì„œë²„ ì„¤ì • NFS ì„œë²„(ì˜ˆ: 192.168.18.141)ì—ì„œ:\nsudo mkdir -p /mnt/nfs_share/mlops/monitoring sudo chmod -R 0777 /mnt/nfs_share/mlops/monitoring /etc/exports:\n/mnt/nfs_share/mlops/monitoring 192.168.18.0/24(rw,sync,no_subtree_check,no_root_squash) ì ìš© \u0026 í™•ì¸:\nsudo exportfs -ra showmount -e 192.168.18.141 # /mnt/nfs_share/mlops/monitoring 192.168.18.0/24 3-2. NFS ë™ì  í”„ë¡œë¹„ì €ë„ˆ ì„¤ì¹˜ ê´€ë¦¬ê°€ í¸í•´ì•¼ í•˜ë‹ˆ, nfs-subdir-external-provisionerë¡œ ë™ì  í”„ë¡œë¹„ì €ë‹ì„ ì”ë‹ˆë‹¤.\nhelm repo add nfs-subdir-external-provisioner https://kubernetes-sigs.github.io/nfs-subdir-external-provisioner/ helm repo update kubectl create ns storage --dry-run=client -o yaml | kubectl apply -f - helm upgrade --install nfs-monitoring \\ nfs-subdir-external-provisioner/nfs-subdir-external-provisioner \\ -n storage \\ --set nfs.server=192.168.18.141 \\ --set nfs.path=/mnt/nfs_share/mlops/monitoring \\ --set storageClass.name=nfs-monitoring \\ --set storageClass.defaultClass=false \\ --set storageClass.allowVolumeExpansion=true \\ --set storageClass.archiveOnDelete=true í™•ì¸:\nkubectl get sc # NAME PROVISIONER DEFAULT # nfs-monitoring k8s-sigs.io/nfs-subdir-external-provisioner no ì´í›„ì— ìƒì„±í•˜ëŠ” PVCì—ì„œ storageClassName: nfs-monitoringë§Œ ì§€ì •í•˜ë©´\nìë™ìœ¼ë¡œ PV + í•˜ìœ„ ë””ë ‰í„°ë¦¬ê°€ ìƒì„±ë©ë‹ˆë‹¤.\n4ï¸âƒ£ Namespace \u0026 ê¸°ë³¸ Secret êµ¬ì„± 4-1. Namespace ìƒì„± kubectl create ns monitoring-dev kubectl create ns monitoring-prod ì´ë¯¸ ìˆë‹¤ë©´ ì—ëŸ¬ê°€ ë‚˜ì™€ë„ ìƒê´€ ì—†ìŠµë‹ˆë‹¤.\n4-2. Grafana Admin Secret ì´ˆê¸° ë¡œê·¸ì¸ìš© ê³„ì •ì„ ë„¤ì„ìŠ¤í˜ì´ìŠ¤ë³„ë¡œ ë¶„ë¦¬í•©ë‹ˆë‹¤.\n# dev kubectl -n monitoring-dev create secret generic grafana-admin-secret-dev \\ --from-literal=admin-user=admin \\ --from-literal=admin-password='ChangeMe123!' # prod kubectl -n monitoring-prod create secret generic grafana-admin-secret-prod \\ --from-literal=admin-user=admin \\ --from-literal=admin-password='ChangeMe123!' ì‹¤ì œ í™˜ê²½ì—ì„œëŠ” ChangeMe123! ëŒ€ì‹ \në³„ë„ íŒ¨ìŠ¤ì›Œë“œ ê´€ë¦¬ìì—ì„œ ê°€ì ¸ì˜¨ ê°’ì„ ì‚¬ìš©í•˜ê³ ,\nì´í›„ì—ëŠ” SealedSecretë¡œ ì „í™˜í•˜ëŠ” ê²ƒì„ ê°•í•˜ê²Œ ì¶”ì²œí•©ë‹ˆë‹¤.\nâ–¶ SealedSecret ë³€í™˜ ì˜ˆì‹œ(dev) kubectl -n monitoring-dev create secret generic grafana-admin-secret-dev \\ --from-literal=admin-user=admin \\ --from-literal=admin-password='\u003cì‹¤ì œ_ê´€ë¦¬ì_íŒ¨ìŠ¤ì›Œë“œ\u003e' \\ --dry-run=client -o yaml \\ | kubeseal --controller-namespace=sealed-secrets \\ --controller-name=sealed-secrets \\ --format=yaml \\ \u003e sealed-secrets/grafana-admin-secret-dev.yaml prodë„ ë™ì¼í•©ë‹ˆë‹¤.\n5ï¸âƒ£ ArgoCD Application ì •ì˜ (kube-prometheus-stack) ì´ì œ Git ë¦¬í¬ì§€í† ë¦¬ì˜ apps/ ì•„ë˜ì—\nmonitoring-devì™€ monitoring-prod Applicationì„ ì •ì˜í•©ë‹ˆë‹¤.\n5-1. monitoring-dev Application apps/monitoring-dev.yaml:\napiVersion: argoproj.io/v1alpha1 kind: Application metadata: name: monitoring-dev namespace: argocd annotations: argocd.argoproj.io/sync-options: \u003e SkipDryRunOnMissingResource=true,PruneLast=true,ServerSideApply=true spec: project: dev destination: server: https://kubernetes.default.svc namespace: monitoring-dev source: repoURL: https://prometheus-community.github.io/helm-charts chart: kube-prometheus-stack targetRevision: 65.5.0 helm: skipCrds: true values: | global: imageRegistry: \"\" grafana: admin: existingSecret: grafana-admin-secret-dev userKey: admin-user passwordKey: admin-password ingress: enabled: true ingressClassName: nginx hosts: - grafana-dev.local tls: - hosts: [grafana-dev.local] secretName: grafana-tls persistence: enabled: true storageClassName: nfs-monitoring size: 10Gi alertmanager: alertmanagerSpec: configSecret: alertmanager-config-dev # A2ì—ì„œ SealedSecretë¡œ ì±„ì›€ storage: volumeClaimTemplate: spec: storageClassName: nfs-monitoring accessModes: [\"ReadWriteOnce\"] resources: requests: storage: 10Gi ingress: enabled: true ingressClassName: nginx hosts: - alert-dev.local tls: - hosts: [alert-dev.local] secretName: alertmanager-tls prometheus: ingress: enabled: true ingressClassName: nginx hosts: - prometheus-dev.local tls: - hosts: [prometheus-dev.local] secretName: prometheus-tls prometheusSpec: externalUrl: \"https://prometheus-dev.local\" serviceMonitorSelector: matchLabels: release: monitoring-dev podMonitorSelector: matchLabels: release: monitoring-dev ruleSelector: matchLabels: release: monitoring-dev storageSpec: volumeClaimTemplate: spec: storageClassName: nfs-monitoring accessModes: [\"ReadWriteOnce\"] resources: requests: storage: 50Gi retention: 15d retentionSize: 30GiB kubeEtcd: enabled: false kubeControllerManager: enabled: false kubeScheduler: enabled: false kubeProxy: enabled: false coreDns: enabled: false ì—¬ê¸°ì„œëŠ” ì´ˆê¸° ë²„ì „ì´ë¼ Prometheusë„ NFSë¥¼ ì“°ê³  ìˆìŠµë‹ˆë‹¤.\në‚˜ì¤‘ì— ê³µì‹ë¬¸ì„œì—ì„œ ê¶Œì¥í•˜ëŠ” â€œPrometheusë§Œ local-pathë¡œ ì˜®ê¸°ëŠ” ê³¼ì •â€ì„\në³„ë„ ê¸€ë¡œ ë‹¤ë£¨ë©´ì„œ ì§„ì§œ ì‹¤ë¬´í˜• êµ¬ì¡°ë¡œ ì—…ê·¸ë ˆì´ë“œí•©ë‹ˆë‹¤.\n5-2. monitoring-prod Application apps/monitoring-prod.yaml:\napiVersion: argoproj.io/v1alpha1 kind: Application metadata: name: monitoring-prod namespace: argocd annotations: argocd.argoproj.io/sync-options: \u003e SkipDryRunOnMissingResource=true,PruneLast=true,ServerSideApply=true spec: project: prod destination: server: https://kubernetes.default.svc namespace: monitoring-prod source: repoURL: https://prometheus-community.github.io/helm-charts chart: kube-prometheus-stack targetRevision: 65.5.0 helm: skipCrds: true values: | global: imageRegistry: \"\" grafana: admin: existingSecret: grafana-admin-secret-prod userKey: admin-user passwordKey: admin-password ingress: enabled: true ingressClassName: nginx hosts: - grafana-prod.local tls: - hosts: [grafana-prod.local] secretName: grafana-tls persistence: enabled: true storageClassName: nfs-monitoring size: 10Gi alertmanager: alertmanagerSpec: configSecret: alertmanager-config-prod storage: volumeClaimTemplate: spec: storageClassName: nfs-monitoring accessModes: [\"ReadWriteOnce\"] resources: requests: storage: 10Gi ingress: enabled: true ingressClassName: nginx hosts: - alert-prod.local tls: - hosts: [alert-prod.local] secretName: alertmanager-tls prometheus: ingress: enabled: true ingressClassName: nginx hosts: - prometheus-prod.local tls: - hosts: [prometheus-prod.local] secretName: prometheus-tls prometheusSpec: externalUrl: \"https://prometheus-prod.local\" serviceMonitorSelector: matchLabels: release: monitoring-prod podMonitorSelector: matchLabels: release: monitoring-prod ruleSelector: matchLabels: release: monitoring-prod storageSpec: volumeClaimTemplate: spec: storageClassName: nfs-monitoring accessModes: [\"ReadWriteOnce\"] resources: requests: storage: 50Gi retention: 30d retentionSize: 50GiB kubeEtcd: enabled: false kubeControllerManager: enabled: false kubeScheduler: enabled: false kubeProxy: enabled: false coreDns: enabled: false 6ï¸âƒ£ ArgoCD Sync \u0026 ì²« ê¸°ë™ ê²€ì¦ 6-1. Application ì ìš© kubectl -n argocd apply -f apps/monitoring-dev.yaml kubectl -n argocd apply -f apps/monitoring-prod.yaml ArgoCD UI ë˜ëŠ” CLIì—ì„œ:\nargocd app sync monitoring-dev argocd app sync monitoring-prod 6-2. ë¦¬ì†ŒìŠ¤ ìƒíƒœ í™•ì¸ kubectl -n monitoring-dev get pods,svc,pvc kubectl -n monitoring-prod get pods,svc,pvc í™•ì¸ í¬ì¸íŠ¸:\nprometheus-..., alertmanager-..., grafana-... Pod ëª¨ë‘ Running prometheus-kube-prometheus-stack-..., alertmanager-..., grafana Service ì¡´ì¬ nfs-monitoring StorageClass ê¸°ë°˜ PVCê°€ Bound ìƒíƒœ 6-3. Ingress \u0026 /etc/hosts ë¡œì»¬ PCì˜ /etc/hosts ì— ë‹¤ìŒì„ ì¶”ê°€í•©ë‹ˆë‹¤.\n192.168.18.240 grafana-dev.local alert-dev.local prometheus-dev.local 192.168.18.240 grafana-prod.local alert-prod.local prometheus-prod.local ì´í›„ ë¸Œë¼ìš°ì €ì—ì„œ:\nhttps://grafana-dev.local https://grafana-prod.local ì´ˆê¸° ë¡œê·¸ì¸:\nID: admin PW: ChangeMe123! (ì•ì—ì„œ Secretì— ë„£ì€ ê°’) TLS ì¸ì¦ì„œëŠ” A5ì—ì„œ SealedSecret + self-signed ë°œê¸‰ ê³¼ì •ì„ ìì„¸íˆ ì •ë¦¬í•©ë‹ˆë‹¤.\nì—¬ê¸°ì„œëŠ” â€œIngress â†’ Service â†’ Podâ€ ê²½ë¡œê°€ ì •ìƒì¸ì§€ì—ë§Œ ì§‘ì¤‘í•˜ì…”ë„ ì¶©ë¶„í•©ë‹ˆë‹¤.\n7ï¸âƒ£ ì•„ì£¼ ê°„ë‹¨í•œ Smoke Check Slack ì—°ë™ê¹Œì§€ëŠ” ë‹¤ìŒ ë‹¨ê³„ì—ì„œ ê¹Šê²Œ ë‹¤ë£° ì˜ˆì •ì´ê³ ,\nì—¬ê¸°ì„œëŠ” â€œPrometheusRule â†’ Prometheus â†’ Alertmanagerâ€ ê¸°ë³¸ ì—°ê²°ë§Œ í…ŒìŠ¤íŠ¸í•´ ë´…ë‹ˆë‹¤.\n7-1. devìš© Smoke Rule cat \u003c\u003c'EOF' | kubectl -n monitoring-dev apply -f - apiVersion: monitoring.coreos.com/v1 kind: PrometheusRule metadata: name: monitoring-smoke labels: release: monitoring-dev spec: groups: - name: smoke.rules rules: - alert: Monitoring_Smoke_Dev expr: vector(1) for: 1m labels: severity: warning namespace: monitoring-dev annotations: summary: \"Monitoring dev smoke alert\" description: \"kube-prometheus-stack(dev) ê²½ë¡œ ì ê²€ìš© í…ŒìŠ¤íŠ¸ ì•ŒëŒ\" EOF 7-2. ìƒíƒœ í™•ì¸ 1ë¶„ í›„ ë‹¤ìŒ ëª…ë ¹ìœ¼ë¡œ í™•ì¸:\ncurl -sk https://prometheus-dev.local/api/v1/alerts \\ | jq '.data.alerts[] | select(.labels.alertname==\"Monitoring_Smoke_Dev\") | {state:.state, labels:.labels}' state: \"firing\" ì´ ë‚˜ì˜¤ë©´, PrometheusRule â†’ Prometheus í‰ê°€ê¹Œì§€ëŠ” ì •ìƒì…ë‹ˆë‹¤. Alertmanager/Slack ë¼ìš°íŒ…ì€ A2ì—ì„œ ì´ì–´ì„œ êµ¬ì„±í•©ë‹ˆë‹¤. í…ŒìŠ¤íŠ¸ê°€ ëë‚˜ë©´:\nkubectl -n monitoring-dev delete prometheusrule monitoring-smoke ğŸ§© íŒ kubeEtcd / kubeScheduler ë¹„í™œì„±í™”\nìì²´ ê´€ë¦¬í•˜ëŠ” ì»¨íŠ¸ë¡¤ í”Œë ˆì¸ + self-managed í´ëŸ¬ìŠ¤í„°ì¸ ê²½ìš°,\nêµ³ì´ etcd/ìŠ¤ì¼€ì¤„ëŸ¬ê¹Œì§€ ëª¨ë‹ˆí„°ë§í•˜ì§€ ì•Šì•„ë„ ì¶©ë¶„í•œ ê²½ìš°ê°€ ë§ìŠµë‹ˆë‹¤.\nì²˜ìŒì—ëŠ” êº¼ë‘ê³ , ì •ë§ í•„ìš”í•  ë•Œë§Œ ì¼œëŠ” ê²Œ ë…¸ì´ì¦ˆ ê´€ë¦¬ì— ì¢‹ìŠµë‹ˆë‹¤.\në¼ë²¨(release=monitoring-{env})ì€ í‘œì¤€ì²˜ëŸ¼ ì‚¬ìš©\në‚˜ì¤‘ì— ServiceMonitor/PodMonitor/PrometheusRuleì„ ì¶”ê°€í•  ë•Œ\nì´ ë¼ë²¨ë§Œ ë§ì¶°ì£¼ë©´ dev/prod Prometheusì— ìì—°ìŠ¤ëŸ½ê²Œ ë¶™ìŠµë‹ˆë‹¤.\nìŠ¤í† ë¦¬í…”ë§ì„ ìœ„í•´ â€œì²˜ìŒì—” NFS â†’ ë‚˜ì¤‘ì— local-pathâ€ë„ ê´œì°®ìŠµë‹ˆë‹¤\në¸”ë¡œê·¸ ì…ì¥ì—ì„œëŠ”, ì§€ê¸ˆì²˜ëŸ¼ NFS ê¸°ë°˜ìœ¼ë¡œ ë¨¼ì € ì•ˆì •ì ì¸ êµ¬ì¡°ë¥¼ ë§Œë“¤ê³ ,\nA4ì—ì„œ â€œì™œ PrometheusëŠ” local-pathê°€ ë‚˜ì€ì§€â€ë¥¼ ê·¼ê±°ì™€ í•¨ê»˜ ë³´ì—¬ì£¼ëŠ” ê²Œ\nì½ëŠ” ì‚¬ëŒ ì…ì¥ì—ì„œ í›¨ì”¬ êµìœ¡ì ì¸ íë¦„ì´ ë©ë‹ˆë‹¤.\nğŸ”§ MLOps ì‹¤ì „ ì—°ê²° ì´ Observability ìŠ¤íƒì€ ë‹¨ìˆœ ëª¨ë‹ˆí„°ë§ì´ ì•„ë‹ˆë¼,\nAirflow, MLflow, FastAPI, Lokiê¹Œì§€ ë¶™ì–´ ìˆëŠ”\nML Platform ê´€ì¸¡ ë ˆì´ì–´ì˜ ê¸°ë°˜ì´ ë©ë‹ˆë‹¤.\në‚˜ì¤‘ì—:\nFastAPIì˜ /metrics â†’ ServiceMonitor Airflow Exporter â†’ PodMonitor MLflow ì„œë²„ ë©”íŠ¸ë¦­ â†’ ServiceMonitor ì´ëŸ° ê²ƒë“¤ì„ í•˜ë‚˜ì”© ì¶”ê°€í•˜ë©´ì„œ\nâ€œëª¨ë¸ í•™ìŠµ â†’ ë°°í¬ â†’ ì„œë¹™ â†’ ëª¨ë‹ˆí„°ë§ â†’ ì•ŒëŒ â†’ ë¡¤ë°±â€ ê¹Œì§€ ì´ì–´ì§€ëŠ”\nMLOps ì „ì²´ ê·¸ë¦¼ì„ ì™„ì„±í•´ ë‚˜ê°ˆ ì˜ˆì •ì…ë‹ˆë‹¤.\nğŸ ì •ë¦¬ í•­ëª© ìƒíƒœ dev/prod Namespace ë¶„ë¦¬ ì™„ë£Œ kube-prometheus-stack dev/prod ê°ê° ë°°í¬ NFS ê¸°ë°˜ PVC Prometheus/Grafana/Alertmanagerì— ì—°ê²° ArgoCD GitOps apps/monitoring-{dev,prod}.yaml ê¸°ì¤€ìœ¼ë¡œ ê´€ë¦¬ Ingress grafana/alertmanager/prometheus ë„ë©”ì¸ ë¶„ë¦¬ ê°„ë‹¨ Smoke Rule Prometheus í‰ê°€ê¹Œì§€ ê²€ì¦ ì™„ë£Œ ","wordCount":"1209","inLanguage":"en","datePublished":"2025-10-14T17:10:21+09:00","dateModified":"2025-10-14T17:10:21+09:00","mainEntityOfPage":{"@type":"WebPage","@id":"https://keonhoban.github.io/mlops-journey/posts/mlops-platform-observability/01/"},"publisher":{"@type":"Organization","name":"ğŸ”ï¸  MLOps Journey","logo":{"@type":"ImageObject","url":"https://keonhoban.github.io/mlops-journey/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://keonhoban.github.io/mlops-journey/ accesskey=h title="ğŸ”ï¸  MLOps Journey (Alt + H)">ğŸ”ï¸ MLOps Journey</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)" aria-label="Toggle theme"><svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://keonhoban.github.io/mlops-journey/ title="ğŸ  Home"><span>ğŸ  Home</span></a></li><li><a href=https://keonhoban.github.io/mlops-journey/projects/ title="ğŸ“‚ Projects"><span>ğŸ“‚ Projects</span></a></li><li><a href=https://keonhoban.github.io/mlops-journey/posts/ title="ğŸ“ Blog"><span>ğŸ“ Blog</span></a></li><li><a href=https://keonhoban.github.io/mlops-journey/about/ title="ğŸ§— About"><span>ğŸ§— About</span></a></li><li><a href=https://keonhoban.github.io/mlops-journey/categories/ title="ğŸ“– Categories"><span>ğŸ“– Categories</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://keonhoban.github.io/mlops-journey/>Home</a>&nbsp;Â»&nbsp;<a href=https://keonhoban.github.io/mlops-journey/posts/>Posts</a></div><h1 class="post-title entry-hint-parent">[MLOps í”Œë«í¼ Observability & Data Pipeline - 1ë‹¨ê³„ : kube-prometheus-stack + GitOps êµ¬ì¶•]</h1><div class=post-meta><span title='2025-10-14 17:10:21 +0900 +0900'>October 14, 2025</span>&nbsp;Â·&nbsp;6 min</div></header><div class=post-content><h2 id=kube-prometheus-stack--gitops-êµ¬ì¶•>kube-prometheus-stack + GitOps êµ¬ì¶•<a hidden class=anchor aria-hidden=true href=#kube-prometheus-stack--gitops-êµ¬ì¶•>#</a></h2><hr><h2 id=-ì‹œë‚˜ë¦¬ì˜¤-ì„¤ëª…>ğŸ§  ì‹œë‚˜ë¦¬ì˜¤ ì„¤ëª…<a hidden class=anchor aria-hidden=true href=#-ì‹œë‚˜ë¦¬ì˜¤-ì„¤ëª…>#</a></h2><blockquote><p>â€œëª¨ë‹ˆí„°ë§ì€ í•œ ë²ˆ ì„¸íŒ…í•´ë‘ê³  ëë‚˜ëŠ” ê²Œ ì•„ë‹ˆë¼,</p><p>í´ëŸ¬ìŠ¤í„°ë¥¼ ê°ˆì•„ì—ì–´ë„ <strong>ê°™ì€ ëª¨ìŠµìœ¼ë¡œ ë‹¤ì‹œ ì‚´ì•„ë‚˜ì•¼ í•˜ëŠ” ì¸í”„ë¼</strong>ì…ë‹ˆë‹¤.â€</p><p>â€œê·¸ë˜ì„œ ì´ë²ˆ ë‹¨ê³„ì—ì„œëŠ” kube-prometheus-stackì„ dev/prodë¡œ ì™„ì „íˆ ë¶„ë¦¬í•˜ê³ ,</p><p><strong>ëª¨ë“  êµ¬ì„±ì„ YAML + GitOpsë¡œ ê³ ì •</strong>í•´ì„œ</p><p>Observability ìŠ¤íƒì„ ì¬í˜„í•  ìˆ˜ ìˆëŠ” ë¼ˆëŒ€ë¥¼ ë¨¼ì € ë§Œë“¤ì—ˆìŠµë‹ˆë‹¤.â€</p></blockquote><hr><h3 id=-í•µì‹¬-ìš”ì•½>ğŸ¯ í•µì‹¬ ìš”ì•½<a hidden class=anchor aria-hidden=true href=#-í•µì‹¬-ìš”ì•½>#</a></h3><ul><li><p><strong>ëª©í‘œ</strong></p><ul><li><code>monitoring-dev / monitoring-prod</code> Observability ìŠ¤íƒì„
<strong>YAML + GitOpsë§Œìœ¼ë¡œ ê·¸ëŒ€ë¡œ ì¬í˜„</strong>í•  ìˆ˜ ìˆëŠ” ìƒíƒœ ë§Œë“¤ê¸°</li></ul></li><li><p><strong>êµ¬ì„± ìš”ì†Œ</strong></p><ul><li><code>kube-prometheus-stack 65.5.0</code> (Prometheus + Alertmanager + Grafana)</li><li><code>nfs-monitoring</code> StorageClass (NFS ê¸°ë°˜ ë™ì  í”„ë¡œë¹„ì €ë‹)</li><li><code>nginx-ingress</code> ê¸°ë°˜ HTTPS Ingress</li><li><code>ArgoCD Application</code> 2ê°œ (<code>monitoring-dev</code>, <code>monitoring-prod</code>)</li></ul></li><li><p><strong>ë³´ì•ˆ/ìš´ì˜ í¬ì¸íŠ¸</strong></p><ul><li>Grafana admin ê³„ì •ì€ <strong>Secretìœ¼ë¡œ ë¶„ë¦¬</strong></li><li>Alertmanager / Slack / TLS / SealedSecret ì„¸ë¶€ êµ¬ì„±ì€ <strong>ì‹œë¦¬ì¦ˆ ë‹¨ê³„ë³„ë¡œ í™•ì¥</strong></li></ul></li></ul><hr><h2 id=1-ì „ì²´-êµ¬ì¡°-ê°œìš”>1ï¸âƒ£ ì „ì²´ êµ¬ì¡° ê°œìš”<a hidden class=anchor aria-hidden=true href=#1-ì „ì²´-êµ¬ì¡°-ê°œìš”>#</a></h2><ul><li>Kubernetes ìœ„ì—<ul><li><code>monitoring-dev</code> ë„¤ì„ìŠ¤í˜ì´ìŠ¤</li><li><code>monitoring-prod</code> ë„¤ì„ìŠ¤í˜ì´ìŠ¤</li></ul></li><li>ë‘ ë„¤ì„ìŠ¤í˜ì´ìŠ¤ë§ˆë‹¤<ul><li>kube-prometheus-stack 1ê°œì”© ë°°í¬</li><li>Prometheus, Alertmanager, Grafana ê°ê° ë…ë¦½</li></ul></li><li>ëª¨ë“  ë§¤ë‹ˆí˜ìŠ¤íŠ¸ëŠ” Git ë¦¬í¬ì§€í† ë¦¬ì—ì„œ ê´€ë¦¬<ul><li><code>apps/monitoring-dev.yaml</code></li><li><code>apps/monitoring-prod.yaml</code></li><li>ArgoCDê°€ <strong>Auto Sync + SelfHeal</strong> ë¡œ ê´€ë¦¬</li></ul></li></ul><h3 id=-ì•„í‚¤í…ì²˜-íë¦„>ğŸ§© ì•„í‚¤í…ì²˜ íë¦„<a hidden class=anchor aria-hidden=true href=#-ì•„í‚¤í…ì²˜-íë¦„>#</a></h3><p><img alt=mermaid-observability-01.png loading=lazy src=/mlops-journey/images/mermaid-observability-01.png></p><blockquote><p>Slack, TLS, Loki, FastAPI Metrics ë“±ì€ ë’¤í¸ì—ì„œ ì´ êµ¬ì¡° ìœ„ì— ë ˆì´ì–´ì²˜ëŸ¼ í•˜ë‚˜ì”© ì˜¬ë¦¬ëŠ” ë°©ì‹ìœ¼ë¡œ ê°‘ë‹ˆë‹¤.</p></blockquote><hr><h2 id=2-ì‚¬ì „-ì¤€ë¹„-ì²´í¬ë¦¬ìŠ¤íŠ¸>2ï¸âƒ£ ì‚¬ì „ ì¤€ë¹„ ì²´í¬ë¦¬ìŠ¤íŠ¸<a hidden class=anchor aria-hidden=true href=#2-ì‚¬ì „-ì¤€ë¹„-ì²´í¬ë¦¬ìŠ¤íŠ¸>#</a></h2><h3 id=-ì¸í”„ë¼-ì „ì œ>âœ… ì¸í”„ë¼ ì „ì œ<a hidden class=anchor aria-hidden=true href=#-ì¸í”„ë¼-ì „ì œ>#</a></h3><ul><li><input disabled type=checkbox> Kubernetes í´ëŸ¬ìŠ¤í„° (master + worker êµ¬ì¡°)</li><li><input disabled type=checkbox> <code>kubectl</code> + <code>helm</code> ì‚¬ìš© ê°€ëŠ¥</li><li><input disabled type=checkbox> <code>ArgoCD</code> ì„¤ì¹˜ ë° ë™ì‘ ì¤‘ (<code>argocd</code> ë„¤ì„ìŠ¤í˜ì´ìŠ¤)</li><li><input disabled type=checkbox> <code>nginx-ingress</code> ì»¨íŠ¸ë¡¤ëŸ¬ ì„¤ì¹˜ ì™„ë£Œ</li><li><input disabled type=checkbox> Git ë¦¬í¬ì§€í† ë¦¬ êµ¬ì¡°ì— <code>apps/</code> ë””ë ‰í„°ë¦¬ ì¡´ì¬</li></ul><h3 id=-nfs--storage>âœ… NFS / Storage<a hidden class=anchor aria-hidden=true href=#-nfs--storage>#</a></h3><ul><li><input disabled type=checkbox> NFS ì„œë²„ (ì˜ˆ: <code>192.168.18.141</code>)</li><li><input disabled type=checkbox> <code>/mnt/nfs_share/mlops/monitoring</code> ë””ë ‰í„°ë¦¬ ìƒì„±</li><li><input disabled type=checkbox> <code>nfs-monitoring</code> StorageClass (ë™ì  í”„ë¡œë¹„ì €ë„ˆ) ìƒì„±</li></ul><blockquote><p>PrometheusëŠ” 1ì°¨ ë²„ì „ì—ì„œëŠ” NFS ìœ„ì— ì˜¬ë ¤ë‘ê³ ,</p><p>ë‚˜ì¤‘ì— <strong>local-path ê¸°ë°˜ TSDB ìµœì í™”</strong>ë¡œ ë°”ê¿”ê°€ëŠ” ìŠ¤í† ë¦¬ë¡œ ì´ì–´ê°‘ë‹ˆë‹¤.</p></blockquote><hr><h2 id=3-nfs-ë°-storageclass-êµ¬ì„±>3ï¸âƒ£ NFS ë° StorageClass êµ¬ì„±<a hidden class=anchor aria-hidden=true href=#3-nfs-ë°-storageclass-êµ¬ì„±>#</a></h2><h3 id=3-1-nfs-ì„œë²„-ì„¤ì •>3-1. NFS ì„œë²„ ì„¤ì •<a hidden class=anchor aria-hidden=true href=#3-1-nfs-ì„œë²„-ì„¤ì •>#</a></h3><p>NFS ì„œë²„(ì˜ˆ: 192.168.18.141)ì—ì„œ:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>sudo mkdir -p /mnt/nfs_share/mlops/monitoring
</span></span><span style=display:flex><span>sudo chmod -R <span style=color:#ae81ff>0777</span> /mnt/nfs_share/mlops/monitoring
</span></span></code></pre></div><p><code>/etc/exports</code>:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>/mnt/nfs_share/mlops/monitoring 192.168.18.0/24<span style=color:#f92672>(</span>rw,sync,no_subtree_check,no_root_squash<span style=color:#f92672>)</span>
</span></span></code></pre></div><p>ì ìš© & í™•ì¸:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>sudo exportfs -ra
</span></span><span style=display:flex><span>showmount -e 192.168.18.141
</span></span><span style=display:flex><span><span style=color:#75715e># /mnt/nfs_share/mlops/monitoring 192.168.18.0/24</span>
</span></span></code></pre></div><h3 id=3-2-nfs-ë™ì -í”„ë¡œë¹„ì €ë„ˆ-ì„¤ì¹˜>3-2. NFS ë™ì  í”„ë¡œë¹„ì €ë„ˆ ì„¤ì¹˜<a hidden class=anchor aria-hidden=true href=#3-2-nfs-ë™ì -í”„ë¡œë¹„ì €ë„ˆ-ì„¤ì¹˜>#</a></h3><p>ê´€ë¦¬ê°€ í¸í•´ì•¼ í•˜ë‹ˆ, <strong>nfs-subdir-external-provisioner</strong>ë¡œ ë™ì  í”„ë¡œë¹„ì €ë‹ì„ ì”ë‹ˆë‹¤.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>helm repo add nfs-subdir-external-provisioner https://kubernetes-sigs.github.io/nfs-subdir-external-provisioner/
</span></span><span style=display:flex><span>helm repo update
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>kubectl create ns storage --dry-run<span style=color:#f92672>=</span>client -o yaml | kubectl apply -f -
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>helm upgrade --install nfs-monitoring <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  nfs-subdir-external-provisioner/nfs-subdir-external-provisioner <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  -n storage <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  --set nfs.server<span style=color:#f92672>=</span>192.168.18.141 <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  --set nfs.path<span style=color:#f92672>=</span>/mnt/nfs_share/mlops/monitoring <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  --set storageClass.name<span style=color:#f92672>=</span>nfs-monitoring <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  --set storageClass.defaultClass<span style=color:#f92672>=</span>false <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  --set storageClass.allowVolumeExpansion<span style=color:#f92672>=</span>true <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  --set storageClass.archiveOnDelete<span style=color:#f92672>=</span>true
</span></span></code></pre></div><p>í™•ì¸:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>kubectl get sc
</span></span><span style=display:flex><span><span style=color:#75715e># NAME             PROVISIONER                                        DEFAULT</span>
</span></span><span style=display:flex><span><span style=color:#75715e># nfs-monitoring   k8s-sigs.io/nfs-subdir-external-provisioner        no</span>
</span></span></code></pre></div><blockquote><p>ì´í›„ì— ìƒì„±í•˜ëŠ” PVCì—ì„œ storageClassName: nfs-monitoringë§Œ ì§€ì •í•˜ë©´</p><p>ìë™ìœ¼ë¡œ PV + í•˜ìœ„ ë””ë ‰í„°ë¦¬ê°€ ìƒì„±ë©ë‹ˆë‹¤.</p></blockquote><hr><h2 id=4-namespace--ê¸°ë³¸-secret-êµ¬ì„±>4ï¸âƒ£ Namespace & ê¸°ë³¸ Secret êµ¬ì„±<a hidden class=anchor aria-hidden=true href=#4-namespace--ê¸°ë³¸-secret-êµ¬ì„±>#</a></h2><h3 id=4-1-namespace-ìƒì„±>4-1. Namespace ìƒì„±<a hidden class=anchor aria-hidden=true href=#4-1-namespace-ìƒì„±>#</a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>kubectl create ns monitoring-dev
</span></span><span style=display:flex><span>kubectl create ns monitoring-prod
</span></span></code></pre></div><p>ì´ë¯¸ ìˆë‹¤ë©´ ì—ëŸ¬ê°€ ë‚˜ì™€ë„ ìƒê´€ ì—†ìŠµë‹ˆë‹¤.</p><h3 id=4-2-grafana-admin-secret>4-2. Grafana Admin Secret<a hidden class=anchor aria-hidden=true href=#4-2-grafana-admin-secret>#</a></h3><p><strong>ì´ˆê¸° ë¡œê·¸ì¸ìš© ê³„ì •</strong>ì„ ë„¤ì„ìŠ¤í˜ì´ìŠ¤ë³„ë¡œ ë¶„ë¦¬í•©ë‹ˆë‹¤.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># dev</span>
</span></span><span style=display:flex><span>kubectl -n monitoring-dev create secret generic grafana-admin-secret-dev <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  --from-literal<span style=color:#f92672>=</span>admin-user<span style=color:#f92672>=</span>admin <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  --from-literal<span style=color:#f92672>=</span>admin-password<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;ChangeMe123!&#39;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># prod</span>
</span></span><span style=display:flex><span>kubectl -n monitoring-prod create secret generic grafana-admin-secret-prod <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  --from-literal<span style=color:#f92672>=</span>admin-user<span style=color:#f92672>=</span>admin <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  --from-literal<span style=color:#f92672>=</span>admin-password<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;ChangeMe123!&#39;</span>
</span></span></code></pre></div><blockquote><p>ì‹¤ì œ í™˜ê²½ì—ì„œëŠ” ChangeMe123! ëŒ€ì‹ </p><p>ë³„ë„ íŒ¨ìŠ¤ì›Œë“œ ê´€ë¦¬ìì—ì„œ ê°€ì ¸ì˜¨ ê°’ì„ ì‚¬ìš©í•˜ê³ ,</p><p>ì´í›„ì—ëŠ” SealedSecretë¡œ ì „í™˜í•˜ëŠ” ê²ƒì„ ê°•í•˜ê²Œ ì¶”ì²œí•©ë‹ˆë‹¤.</p></blockquote><h3 id=-sealedsecret-ë³€í™˜-ì˜ˆì‹œdev>â–¶ SealedSecret ë³€í™˜ ì˜ˆì‹œ(dev)<a hidden class=anchor aria-hidden=true href=#-sealedsecret-ë³€í™˜-ì˜ˆì‹œdev>#</a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>kubectl -n monitoring-dev create secret generic grafana-admin-secret-dev <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  --from-literal<span style=color:#f92672>=</span>admin-user<span style=color:#f92672>=</span>admin <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  --from-literal<span style=color:#f92672>=</span>admin-password<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;&lt;ì‹¤ì œ_ê´€ë¦¬ì_íŒ¨ìŠ¤ì›Œë“œ&gt;&#39;</span> <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  --dry-run<span style=color:#f92672>=</span>client -o yaml <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>| kubeseal --controller-namespace<span style=color:#f92672>=</span>sealed-secrets <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>           --controller-name<span style=color:#f92672>=</span>sealed-secrets <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>           --format<span style=color:#f92672>=</span>yaml <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>&gt; sealed-secrets/grafana-admin-secret-dev.yaml
</span></span></code></pre></div><p>prodë„ ë™ì¼í•©ë‹ˆë‹¤.</p><hr><h2 id=5-argocd-application-ì •ì˜-kube-prometheus-stack>5ï¸âƒ£ ArgoCD Application ì •ì˜ (kube-prometheus-stack)<a hidden class=anchor aria-hidden=true href=#5-argocd-application-ì •ì˜-kube-prometheus-stack>#</a></h2><p>ì´ì œ Git ë¦¬í¬ì§€í† ë¦¬ì˜ <code>apps/</code> ì•„ë˜ì—</p><p><code>monitoring-dev</code>ì™€ <code>monitoring-prod</code> Applicationì„ ì •ì˜í•©ë‹ˆë‹¤.</p><h3 id=5-1-monitoring-dev-application>5-1. monitoring-dev Application<a hidden class=anchor aria-hidden=true href=#5-1-monitoring-dev-application>#</a></h3><p><code>apps/monitoring-dev.yaml</code>:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#f92672>apiVersion</span>: <span style=color:#ae81ff>argoproj.io/v1alpha1</span>
</span></span><span style=display:flex><span><span style=color:#f92672>kind</span>: <span style=color:#ae81ff>Application</span>
</span></span><span style=display:flex><span><span style=color:#f92672>metadata</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>name</span>: <span style=color:#ae81ff>monitoring-dev</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>namespace</span>: <span style=color:#ae81ff>argocd</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>annotations</span>:
</span></span><span style=display:flex><span>    <span style=color:#f92672>argocd.argoproj.io/sync-options</span>: &gt;<span style=color:#e6db74>
</span></span></span><span style=display:flex><span><span style=color:#e6db74>      SkipDryRunOnMissingResource=true,PruneLast=true,ServerSideApply=true</span>
</span></span><span style=display:flex><span><span style=color:#f92672>spec</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>project</span>: <span style=color:#ae81ff>dev</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>destination</span>:
</span></span><span style=display:flex><span>    <span style=color:#f92672>server</span>: <span style=color:#ae81ff>https://kubernetes.default.svc</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>namespace</span>: <span style=color:#ae81ff>monitoring-dev</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>source</span>:
</span></span><span style=display:flex><span>    <span style=color:#f92672>repoURL</span>: <span style=color:#ae81ff>https://prometheus-community.github.io/helm-charts</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>chart</span>: <span style=color:#ae81ff>kube-prometheus-stack</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>targetRevision</span>: <span style=color:#ae81ff>65.5.0</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>helm</span>:
</span></span><span style=display:flex><span>      <span style=color:#f92672>skipCrds</span>: <span style=color:#66d9ef>true</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>values</span>: |<span style=color:#e6db74>
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        global:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>          imageRegistry: &#34;&#34;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        grafana:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>          admin:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>            existingSecret: grafana-admin-secret-dev
</span></span></span><span style=display:flex><span><span style=color:#e6db74>            userKey: admin-user
</span></span></span><span style=display:flex><span><span style=color:#e6db74>            passwordKey: admin-password
</span></span></span><span style=display:flex><span><span style=color:#e6db74>          ingress:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>            enabled: true
</span></span></span><span style=display:flex><span><span style=color:#e6db74>            ingressClassName: nginx
</span></span></span><span style=display:flex><span><span style=color:#e6db74>            hosts:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>              - grafana-dev.local
</span></span></span><span style=display:flex><span><span style=color:#e6db74>            tls:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>              - hosts: [grafana-dev.local]
</span></span></span><span style=display:flex><span><span style=color:#e6db74>                secretName: grafana-tls
</span></span></span><span style=display:flex><span><span style=color:#e6db74>          persistence:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>            enabled: true
</span></span></span><span style=display:flex><span><span style=color:#e6db74>            storageClassName: nfs-monitoring
</span></span></span><span style=display:flex><span><span style=color:#e6db74>            size: 10Gi
</span></span></span><span style=display:flex><span><span style=color:#e6db74>
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        alertmanager:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>          alertmanagerSpec:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>            configSecret: alertmanager-config-dev   # A2ì—ì„œ SealedSecretë¡œ ì±„ì›€
</span></span></span><span style=display:flex><span><span style=color:#e6db74>            storage:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>              volumeClaimTemplate:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>                spec:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>                  storageClassName: nfs-monitoring
</span></span></span><span style=display:flex><span><span style=color:#e6db74>                  accessModes: [&#34;ReadWriteOnce&#34;]
</span></span></span><span style=display:flex><span><span style=color:#e6db74>                  resources:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>                    requests:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>                      storage: 10Gi
</span></span></span><span style=display:flex><span><span style=color:#e6db74>          ingress:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>            enabled: true
</span></span></span><span style=display:flex><span><span style=color:#e6db74>            ingressClassName: nginx
</span></span></span><span style=display:flex><span><span style=color:#e6db74>            hosts:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>              - alert-dev.local
</span></span></span><span style=display:flex><span><span style=color:#e6db74>            tls:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>              - hosts: [alert-dev.local]
</span></span></span><span style=display:flex><span><span style=color:#e6db74>                secretName: alertmanager-tls
</span></span></span><span style=display:flex><span><span style=color:#e6db74>
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        prometheus:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>          ingress:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>            enabled: true
</span></span></span><span style=display:flex><span><span style=color:#e6db74>            ingressClassName: nginx
</span></span></span><span style=display:flex><span><span style=color:#e6db74>            hosts:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>              - prometheus-dev.local
</span></span></span><span style=display:flex><span><span style=color:#e6db74>            tls:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>              - hosts: [prometheus-dev.local]
</span></span></span><span style=display:flex><span><span style=color:#e6db74>                secretName: prometheus-tls
</span></span></span><span style=display:flex><span><span style=color:#e6db74>          prometheusSpec:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>            externalUrl: &#34;https://prometheus-dev.local&#34;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>            serviceMonitorSelector:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>              matchLabels:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>                release: monitoring-dev
</span></span></span><span style=display:flex><span><span style=color:#e6db74>            podMonitorSelector:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>              matchLabels:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>                release: monitoring-dev
</span></span></span><span style=display:flex><span><span style=color:#e6db74>            ruleSelector:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>              matchLabels:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>                release: monitoring-dev
</span></span></span><span style=display:flex><span><span style=color:#e6db74>            storageSpec:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>              volumeClaimTemplate:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>                spec:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>                  storageClassName: nfs-monitoring
</span></span></span><span style=display:flex><span><span style=color:#e6db74>                  accessModes: [&#34;ReadWriteOnce&#34;]
</span></span></span><span style=display:flex><span><span style=color:#e6db74>                  resources:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>                    requests:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>                      storage: 50Gi
</span></span></span><span style=display:flex><span><span style=color:#e6db74>            retention: 15d
</span></span></span><span style=display:flex><span><span style=color:#e6db74>            retentionSize: 30GiB
</span></span></span><span style=display:flex><span><span style=color:#e6db74>
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        kubeEtcd:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>          enabled: false
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        kubeControllerManager:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>          enabled: false
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        kubeScheduler:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>          enabled: false
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        kubeProxy:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>          enabled: false
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        coreDns:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>          enabled: false</span>
</span></span></code></pre></div><blockquote><p>ì—¬ê¸°ì„œëŠ” ì´ˆê¸° ë²„ì „ì´ë¼ Prometheusë„ NFSë¥¼ ì“°ê³  ìˆìŠµë‹ˆë‹¤.</p><p>ë‚˜ì¤‘ì— ê³µì‹ë¬¸ì„œì—ì„œ ê¶Œì¥í•˜ëŠ” â€œPrometheusë§Œ local-pathë¡œ ì˜®ê¸°ëŠ” ê³¼ì •â€ì„</p><p>ë³„ë„ ê¸€ë¡œ ë‹¤ë£¨ë©´ì„œ ì§„ì§œ ì‹¤ë¬´í˜• êµ¬ì¡°ë¡œ ì—…ê·¸ë ˆì´ë“œí•©ë‹ˆë‹¤.</p></blockquote><h3 id=5-2-monitoring-prod-application>5-2. monitoring-prod Application<a hidden class=anchor aria-hidden=true href=#5-2-monitoring-prod-application>#</a></h3><p><code>apps/monitoring-prod.yaml</code>:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#f92672>apiVersion</span>: <span style=color:#ae81ff>argoproj.io/v1alpha1</span>
</span></span><span style=display:flex><span><span style=color:#f92672>kind</span>: <span style=color:#ae81ff>Application</span>
</span></span><span style=display:flex><span><span style=color:#f92672>metadata</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>name</span>: <span style=color:#ae81ff>monitoring-prod</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>namespace</span>: <span style=color:#ae81ff>argocd</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>annotations</span>:
</span></span><span style=display:flex><span>    <span style=color:#f92672>argocd.argoproj.io/sync-options</span>: &gt;<span style=color:#e6db74>
</span></span></span><span style=display:flex><span><span style=color:#e6db74>      SkipDryRunOnMissingResource=true,PruneLast=true,ServerSideApply=true</span>
</span></span><span style=display:flex><span><span style=color:#f92672>spec</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>project</span>: <span style=color:#ae81ff>prod</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>destination</span>:
</span></span><span style=display:flex><span>    <span style=color:#f92672>server</span>: <span style=color:#ae81ff>https://kubernetes.default.svc</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>namespace</span>: <span style=color:#ae81ff>monitoring-prod</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>source</span>:
</span></span><span style=display:flex><span>    <span style=color:#f92672>repoURL</span>: <span style=color:#ae81ff>https://prometheus-community.github.io/helm-charts</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>chart</span>: <span style=color:#ae81ff>kube-prometheus-stack</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>targetRevision</span>: <span style=color:#ae81ff>65.5.0</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>helm</span>:
</span></span><span style=display:flex><span>      <span style=color:#f92672>skipCrds</span>: <span style=color:#66d9ef>true</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>values</span>: |<span style=color:#e6db74>
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        global:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>          imageRegistry: &#34;&#34;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        grafana:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>          admin:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>            existingSecret: grafana-admin-secret-prod
</span></span></span><span style=display:flex><span><span style=color:#e6db74>            userKey: admin-user
</span></span></span><span style=display:flex><span><span style=color:#e6db74>            passwordKey: admin-password
</span></span></span><span style=display:flex><span><span style=color:#e6db74>          ingress:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>            enabled: true
</span></span></span><span style=display:flex><span><span style=color:#e6db74>            ingressClassName: nginx
</span></span></span><span style=display:flex><span><span style=color:#e6db74>            hosts:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>              - grafana-prod.local
</span></span></span><span style=display:flex><span><span style=color:#e6db74>            tls:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>              - hosts: [grafana-prod.local]
</span></span></span><span style=display:flex><span><span style=color:#e6db74>                secretName: grafana-tls
</span></span></span><span style=display:flex><span><span style=color:#e6db74>          persistence:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>            enabled: true
</span></span></span><span style=display:flex><span><span style=color:#e6db74>            storageClassName: nfs-monitoring
</span></span></span><span style=display:flex><span><span style=color:#e6db74>            size: 10Gi
</span></span></span><span style=display:flex><span><span style=color:#e6db74>
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        alertmanager:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>          alertmanagerSpec:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>            configSecret: alertmanager-config-prod
</span></span></span><span style=display:flex><span><span style=color:#e6db74>            storage:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>              volumeClaimTemplate:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>                spec:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>                  storageClassName: nfs-monitoring
</span></span></span><span style=display:flex><span><span style=color:#e6db74>                  accessModes: [&#34;ReadWriteOnce&#34;]
</span></span></span><span style=display:flex><span><span style=color:#e6db74>                  resources:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>                    requests:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>                      storage: 10Gi
</span></span></span><span style=display:flex><span><span style=color:#e6db74>          ingress:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>            enabled: true
</span></span></span><span style=display:flex><span><span style=color:#e6db74>            ingressClassName: nginx
</span></span></span><span style=display:flex><span><span style=color:#e6db74>            hosts:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>              - alert-prod.local
</span></span></span><span style=display:flex><span><span style=color:#e6db74>            tls:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>              - hosts: [alert-prod.local]
</span></span></span><span style=display:flex><span><span style=color:#e6db74>                secretName: alertmanager-tls
</span></span></span><span style=display:flex><span><span style=color:#e6db74>
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        prometheus:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>          ingress:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>            enabled: true
</span></span></span><span style=display:flex><span><span style=color:#e6db74>            ingressClassName: nginx
</span></span></span><span style=display:flex><span><span style=color:#e6db74>            hosts:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>              - prometheus-prod.local
</span></span></span><span style=display:flex><span><span style=color:#e6db74>            tls:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>              - hosts: [prometheus-prod.local]
</span></span></span><span style=display:flex><span><span style=color:#e6db74>                secretName: prometheus-tls
</span></span></span><span style=display:flex><span><span style=color:#e6db74>          prometheusSpec:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>            externalUrl: &#34;https://prometheus-prod.local&#34;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>            serviceMonitorSelector:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>              matchLabels:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>                release: monitoring-prod
</span></span></span><span style=display:flex><span><span style=color:#e6db74>            podMonitorSelector:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>              matchLabels:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>                release: monitoring-prod
</span></span></span><span style=display:flex><span><span style=color:#e6db74>            ruleSelector:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>              matchLabels:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>                release: monitoring-prod
</span></span></span><span style=display:flex><span><span style=color:#e6db74>            storageSpec:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>              volumeClaimTemplate:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>                spec:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>                  storageClassName: nfs-monitoring
</span></span></span><span style=display:flex><span><span style=color:#e6db74>                  accessModes: [&#34;ReadWriteOnce&#34;]
</span></span></span><span style=display:flex><span><span style=color:#e6db74>                  resources:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>                    requests:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>                      storage: 50Gi
</span></span></span><span style=display:flex><span><span style=color:#e6db74>            retention: 30d
</span></span></span><span style=display:flex><span><span style=color:#e6db74>            retentionSize: 50GiB
</span></span></span><span style=display:flex><span><span style=color:#e6db74>
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        kubeEtcd:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>          enabled: false
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        kubeControllerManager:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>          enabled: false
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        kubeScheduler:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>          enabled: false
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        kubeProxy:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>          enabled: false
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        coreDns:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>          enabled: false</span>
</span></span></code></pre></div><hr><h2 id=6-argocd-sync--ì²«-ê¸°ë™-ê²€ì¦>6ï¸âƒ£ ArgoCD Sync & ì²« ê¸°ë™ ê²€ì¦<a hidden class=anchor aria-hidden=true href=#6-argocd-sync--ì²«-ê¸°ë™-ê²€ì¦>#</a></h2><h3 id=6-1-application-ì ìš©>6-1. Application ì ìš©<a hidden class=anchor aria-hidden=true href=#6-1-application-ì ìš©>#</a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>kubectl -n argocd apply -f apps/monitoring-dev.yaml
</span></span><span style=display:flex><span>kubectl -n argocd apply -f apps/monitoring-prod.yaml
</span></span></code></pre></div><p>ArgoCD UI ë˜ëŠ” CLIì—ì„œ:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>argocd app sync monitoring-dev
</span></span><span style=display:flex><span>argocd app sync monitoring-prod
</span></span></code></pre></div><h3 id=6-2-ë¦¬ì†ŒìŠ¤-ìƒíƒœ-í™•ì¸>6-2. ë¦¬ì†ŒìŠ¤ ìƒíƒœ í™•ì¸<a hidden class=anchor aria-hidden=true href=#6-2-ë¦¬ì†ŒìŠ¤-ìƒíƒœ-í™•ì¸>#</a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>kubectl -n monitoring-dev get pods,svc,pvc
</span></span><span style=display:flex><span>kubectl -n monitoring-prod get pods,svc,pvc
</span></span></code></pre></div><p>í™•ì¸ í¬ì¸íŠ¸:</p><ul><li><input disabled type=checkbox> <code>prometheus-...</code>, <code>alertmanager-...</code>, <code>grafana-...</code> Pod ëª¨ë‘ <strong>Running</strong></li><li><input disabled type=checkbox> <code>prometheus-kube-prometheus-stack-...</code>, <code>alertmanager-...</code>, <code>grafana</code> Service ì¡´ì¬</li><li><input disabled type=checkbox> <code>nfs-monitoring</code> StorageClass ê¸°ë°˜ PVCê°€ <strong>Bound</strong> ìƒíƒœ</li></ul><h3 id=6-3-ingress--etchosts>6-3. Ingress & /etc/hosts<a hidden class=anchor aria-hidden=true href=#6-3-ingress--etchosts>#</a></h3><p>ë¡œì»¬ PCì˜ <code>/etc/hosts</code> ì— ë‹¤ìŒì„ ì¶”ê°€í•©ë‹ˆë‹¤.</p><pre tabindex=0><code>192.168.18.240 grafana-dev.local alert-dev.local prometheus-dev.local
192.168.18.240 grafana-prod.local alert-prod.local prometheus-prod.local
</code></pre><p>ì´í›„ ë¸Œë¼ìš°ì €ì—ì„œ:</p><ul><li><code>https://grafana-dev.local</code></li><li><code>https://grafana-prod.local</code></li></ul><p>ì´ˆê¸° ë¡œê·¸ì¸:</p><ul><li>ID: <code>admin</code></li><li>PW: <code>ChangeMe123!</code> (ì•ì—ì„œ Secretì— ë„£ì€ ê°’)</li></ul><blockquote><p>TLS ì¸ì¦ì„œëŠ” A5ì—ì„œ SealedSecret + self-signed ë°œê¸‰ ê³¼ì •ì„ ìì„¸íˆ ì •ë¦¬í•©ë‹ˆë‹¤.</p><p>ì—¬ê¸°ì„œëŠ” â€œIngress â†’ Service â†’ Podâ€ ê²½ë¡œê°€ ì •ìƒì¸ì§€ì—ë§Œ ì§‘ì¤‘í•˜ì…”ë„ ì¶©ë¶„í•©ë‹ˆë‹¤.</p></blockquote><hr><h2 id=7-ì•„ì£¼-ê°„ë‹¨í•œ-smoke-check>7ï¸âƒ£ ì•„ì£¼ ê°„ë‹¨í•œ Smoke Check<a hidden class=anchor aria-hidden=true href=#7-ì•„ì£¼-ê°„ë‹¨í•œ-smoke-check>#</a></h2><p>Slack ì—°ë™ê¹Œì§€ëŠ” ë‹¤ìŒ ë‹¨ê³„ì—ì„œ ê¹Šê²Œ ë‹¤ë£° ì˜ˆì •ì´ê³ ,</p><p>ì—¬ê¸°ì„œëŠ” â€œPrometheusRule â†’ Prometheus â†’ Alertmanagerâ€ ê¸°ë³¸ ì—°ê²°ë§Œ í…ŒìŠ¤íŠ¸í•´ ë´…ë‹ˆë‹¤.</p><h3 id=7-1-devìš©-smoke-rule>7-1. devìš© Smoke Rule<a hidden class=anchor aria-hidden=true href=#7-1-devìš©-smoke-rule>#</a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>cat <span style=color:#e6db74>&lt;&lt;&#39;EOF&#39; | kubectl -n monitoring-dev apply -f -
</span></span></span><span style=display:flex><span><span style=color:#e6db74>apiVersion: monitoring.coreos.com/v1
</span></span></span><span style=display:flex><span><span style=color:#e6db74>kind: PrometheusRule
</span></span></span><span style=display:flex><span><span style=color:#e6db74>metadata:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>  name: monitoring-smoke
</span></span></span><span style=display:flex><span><span style=color:#e6db74>  labels:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    release: monitoring-dev
</span></span></span><span style=display:flex><span><span style=color:#e6db74>spec:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>  groups:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    - name: smoke.rules
</span></span></span><span style=display:flex><span><span style=color:#e6db74>      rules:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        - alert: Monitoring_Smoke_Dev
</span></span></span><span style=display:flex><span><span style=color:#e6db74>          expr: vector(1)
</span></span></span><span style=display:flex><span><span style=color:#e6db74>          for: 1m
</span></span></span><span style=display:flex><span><span style=color:#e6db74>          labels:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>            severity: warning
</span></span></span><span style=display:flex><span><span style=color:#e6db74>            namespace: monitoring-dev
</span></span></span><span style=display:flex><span><span style=color:#e6db74>          annotations:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>            summary: &#34;Monitoring dev smoke alert&#34;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>            description: &#34;kube-prometheus-stack(dev) ê²½ë¡œ ì ê²€ìš© í…ŒìŠ¤íŠ¸ ì•ŒëŒ&#34;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>EOF</span>
</span></span></code></pre></div><h3 id=7-2-ìƒíƒœ-í™•ì¸>7-2. ìƒíƒœ í™•ì¸<a hidden class=anchor aria-hidden=true href=#7-2-ìƒíƒœ-í™•ì¸>#</a></h3><p>1ë¶„ í›„ ë‹¤ìŒ ëª…ë ¹ìœ¼ë¡œ í™•ì¸:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>curl -sk https://prometheus-dev.local/api/v1/alerts <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>| jq <span style=color:#e6db74>&#39;.data.alerts[] | select(.labels.alertname==&#34;Monitoring_Smoke_Dev&#34;) | {state:.state, labels:.labels}&#39;</span>
</span></span></code></pre></div><ul><li><code>state: "firing"</code> ì´ ë‚˜ì˜¤ë©´,<ul><li>PrometheusRule â†’ Prometheus í‰ê°€ê¹Œì§€ëŠ” ì •ìƒì…ë‹ˆë‹¤.</li><li>Alertmanager/Slack ë¼ìš°íŒ…ì€ A2ì—ì„œ ì´ì–´ì„œ êµ¬ì„±í•©ë‹ˆë‹¤.</li></ul></li></ul><p>í…ŒìŠ¤íŠ¸ê°€ ëë‚˜ë©´:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>kubectl -n monitoring-dev delete prometheusrule monitoring-smoke
</span></span></code></pre></div><hr><h2 id=-íŒ>ğŸ§© íŒ<a hidden class=anchor aria-hidden=true href=#-íŒ>#</a></h2><ul><li><p><strong>kubeEtcd / kubeScheduler ë¹„í™œì„±í™”</strong></p><p>ìì²´ ê´€ë¦¬í•˜ëŠ” ì»¨íŠ¸ë¡¤ í”Œë ˆì¸ + self-managed í´ëŸ¬ìŠ¤í„°ì¸ ê²½ìš°,</p><p>êµ³ì´ etcd/ìŠ¤ì¼€ì¤„ëŸ¬ê¹Œì§€ ëª¨ë‹ˆí„°ë§í•˜ì§€ ì•Šì•„ë„ ì¶©ë¶„í•œ ê²½ìš°ê°€ ë§ìŠµë‹ˆë‹¤.</p><p>ì²˜ìŒì—ëŠ” êº¼ë‘ê³ , ì •ë§ í•„ìš”í•  ë•Œë§Œ ì¼œëŠ” ê²Œ ë…¸ì´ì¦ˆ ê´€ë¦¬ì— ì¢‹ìŠµë‹ˆë‹¤.</p></li><li><p><strong>ë¼ë²¨(<code>release=monitoring-{env}</code>)ì€ í‘œì¤€ì²˜ëŸ¼ ì‚¬ìš©</strong></p><p>ë‚˜ì¤‘ì— ServiceMonitor/PodMonitor/PrometheusRuleì„ ì¶”ê°€í•  ë•Œ</p><p>ì´ ë¼ë²¨ë§Œ ë§ì¶°ì£¼ë©´ dev/prod Prometheusì— ìì—°ìŠ¤ëŸ½ê²Œ ë¶™ìŠµë‹ˆë‹¤.</p></li><li><p><strong>ìŠ¤í† ë¦¬í…”ë§ì„ ìœ„í•´ â€œì²˜ìŒì—” NFS â†’ ë‚˜ì¤‘ì— local-pathâ€ë„ ê´œì°®ìŠµë‹ˆë‹¤</strong></p><p>ë¸”ë¡œê·¸ ì…ì¥ì—ì„œëŠ”, ì§€ê¸ˆì²˜ëŸ¼ NFS ê¸°ë°˜ìœ¼ë¡œ ë¨¼ì € ì•ˆì •ì ì¸ êµ¬ì¡°ë¥¼ ë§Œë“¤ê³ ,</p><p>A4ì—ì„œ â€œì™œ PrometheusëŠ” local-pathê°€ ë‚˜ì€ì§€â€ë¥¼ ê·¼ê±°ì™€ í•¨ê»˜ ë³´ì—¬ì£¼ëŠ” ê²Œ</p><p>ì½ëŠ” ì‚¬ëŒ ì…ì¥ì—ì„œ í›¨ì”¬ êµìœ¡ì ì¸ íë¦„ì´ ë©ë‹ˆë‹¤.</p></li></ul><hr><h2 id=-mlops-ì‹¤ì „-ì—°ê²°>ğŸ”§ MLOps ì‹¤ì „ ì—°ê²°<a hidden class=anchor aria-hidden=true href=#-mlops-ì‹¤ì „-ì—°ê²°>#</a></h2><ul><li><p>ì´ Observability ìŠ¤íƒì€ <strong>ë‹¨ìˆœ ëª¨ë‹ˆí„°ë§</strong>ì´ ì•„ë‹ˆë¼,</p><ul><li><p>Airflow, MLflow, FastAPI, Lokiê¹Œì§€ ë¶™ì–´ ìˆëŠ”</p><p><strong>ML Platform ê´€ì¸¡ ë ˆì´ì–´ì˜ ê¸°ë°˜</strong>ì´ ë©ë‹ˆë‹¤.</p></li></ul></li><li><p>ë‚˜ì¤‘ì—:</p><ul><li>FastAPIì˜ <code>/metrics</code> â†’ ServiceMonitor</li><li>Airflow Exporter â†’ PodMonitor</li><li>MLflow ì„œë²„ ë©”íŠ¸ë¦­ â†’ ServiceMonitor</li></ul></li><li><p>ì´ëŸ° ê²ƒë“¤ì„ í•˜ë‚˜ì”© ì¶”ê°€í•˜ë©´ì„œ</p><p><strong>â€œëª¨ë¸ í•™ìŠµ â†’ ë°°í¬ â†’ ì„œë¹™ â†’ ëª¨ë‹ˆí„°ë§ â†’ ì•ŒëŒ â†’ ë¡¤ë°±â€</strong> ê¹Œì§€ ì´ì–´ì§€ëŠ”</p><p>MLOps ì „ì²´ ê·¸ë¦¼ì„ ì™„ì„±í•´ ë‚˜ê°ˆ ì˜ˆì •ì…ë‹ˆë‹¤.</p></li></ul><hr><h2 id=--ì •ë¦¬>ğŸ ì •ë¦¬<a hidden class=anchor aria-hidden=true href=#--ì •ë¦¬>#</a></h2><table><thead><tr><th>í•­ëª©</th><th>ìƒíƒœ</th></tr></thead><tbody><tr><td>dev/prod Namespace</td><td>ë¶„ë¦¬ ì™„ë£Œ</td></tr><tr><td>kube-prometheus-stack</td><td>dev/prod ê°ê° ë°°í¬</td></tr><tr><td>NFS ê¸°ë°˜ PVC</td><td>Prometheus/Grafana/Alertmanagerì— ì—°ê²°</td></tr><tr><td>ArgoCD GitOps</td><td><code>apps/monitoring-{dev,prod}.yaml</code> ê¸°ì¤€ìœ¼ë¡œ ê´€ë¦¬</td></tr><tr><td>Ingress</td><td>grafana/alertmanager/prometheus ë„ë©”ì¸ ë¶„ë¦¬</td></tr><tr><td>ê°„ë‹¨ Smoke Rule</td><td>Prometheus í‰ê°€ê¹Œì§€ ê²€ì¦ ì™„ë£Œ</td></tr></tbody></table></div><footer class=post-footer><ul class=post-tags></ul><nav class=paginav><a class=prev href=https://keonhoban.github.io/mlops-journey/posts/mlops-platform-observability/02/><span class=title>Â« Prev</span><br><span>[MLOps í”Œë«í¼ Observability & Data Pipeline - 2ë‹¨ê³„ : Alertmanager Slack & íŠ¸ëŸ¬ë¸”ìŠˆíŒ…]</span>
</a><a class=next href=https://keonhoban.github.io/mlops-journey/posts/mlops-platform-gitops/10/><span class=title>Next Â»</span><br><span>[MLOps ìš´ì˜ ê³ ë„í™” - 9ë‹¨ê³„: ì‹œí¬ë¦¿ ê´€ë¦¬ & í‚¤ íšŒì „ ìë™í™” (AWSÂ·SealedSecret)]</span></a></nav></footer></article></main><footer class=footer><p style=margin-top:1rem>Â© 2025 Keonho Ban | <a href=https://github.com/keonhoban target=_blank>GitHub</a> | <a href=mailto:keonho0510@naver.com>Email</a></p></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>