<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:content="http://purl.org/rss/1.0/modules/content/"><channel><title>FastAPI on ğŸ”ï¸ MLOps Journey</title><link>https://keonhoban.github.io/mlops-journey/categories/fastapi/</link><description>Recent content in FastAPI on ğŸ”ï¸ MLOps Journey</description><generator>Hugo -- 0.145.0</generator><language>ko</language><lastBuildDate>Tue, 15 Jul 2025 17:55:05 +0900</lastBuildDate><atom:link href="https://keonhoban.github.io/mlops-journey/categories/fastapi/index.xml" rel="self" type="application/rss+xml"/><item><title>[MLOps í”Œë«í¼ êµ¬ì¶• : Airflow-MLflow-FastAPI (Helm)]</title><link>https://keonhoban.github.io/mlops-journey/projects/mlops_pipeline/helm/</link><pubDate>Tue, 15 Jul 2025 17:55:05 +0900</pubDate><guid>https://keonhoban.github.io/mlops-journey/projects/mlops_pipeline/helm/</guid><description>&lt;h2 id="-ì‹¤ì „-ì‹œë‚˜ë¦¬ì˜¤-ê¸°ë°˜-êµ¬ì„±-ë°°ê²½">ğŸ§© ì‹¤ì „ ì‹œë‚˜ë¦¬ì˜¤ ê¸°ë°˜ êµ¬ì„± ë°°ê²½&lt;/h2>
&lt;blockquote>
&lt;p>ì´ í”„ë¡œì íŠ¸ëŠ” ë‹¨ìˆœ ì‹¤ìŠµì„ ë„˜ì–´ì„œ, ì‹¤ì œ ë°œìƒí•˜ëŠ” ë‹¤ìŒê³¼ ê°™ì€ ë¬¸ì œë“¤ì„ í•´ê²°í•˜ê¸° ìœ„í•œ MLOps ì¸í”„ë¼ êµ¬ì¶•ì„ ëª©í‘œë¡œ ì„¤ê³„ë˜ì—ˆìŠµë‹ˆë‹¤.&lt;/p>&lt;/blockquote>
&lt;ul>
&lt;li>
&lt;p>&lt;strong>ì—¬ëŸ¬ ëª¨ë¸ ì‹¤í—˜ ê²°ê³¼ê°€ ë’¤ì„ì—¬ ì¶”ì ì´ ì–´ë ¤ìš´ ë¬¸ì œ&lt;/strong>&lt;br>
â†’ MLflow Tracking ì„œë²„ + PostgreSQL ë©”íƒ€ë°ì´í„° ì €ì¥ì†Œ êµ¬ì„±&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;strong>ëª¨ë¸ íŒŒì¼ ë° ë¡œê·¸ê°€ ë¡œì»¬ì—ë§Œ ì €ì¥ë˜ì–´ í˜‘ì—… ë° ì¬í˜„ì„±ì´ ë–¨ì–´ì§€ëŠ” ë¬¸ì œ&lt;/strong>&lt;br>
â†’ S3 ê¸°ë°˜ artifact store êµ¬ì„± + pyfunc ê¸°ë°˜ ëª¨ë¸ ì„œë¹™ êµ¬ì¡° ì„¤ê³„&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;strong>ìˆ˜ì‘ì—… DAG ë“±ë¡, ëª¨ë¸ ë°°í¬ ë“±ì˜ ë¹„íš¨ìœ¨ì  ìš´ì˜ ë¬¸ì œ&lt;/strong>&lt;br>
â†’ Airflow + GitSync ì—°ë™ìœ¼ë¡œ íŒŒì´í”„ë¼ì¸ ìë™í™” ë° ë²„ì „ ê´€ë¦¬ ê°€ëŠ¥&lt;/p></description></item><item><title>[MLOps í”Œë«í¼ êµ¬ì¶• - 6ë‹¨ê³„: ì‹¤ì‹œê°„ ëª¨ë¸ í•«ìŠ¤ì™‘ êµ¬ì¡° ì‹¤í—˜]</title><link>https://keonhoban.github.io/mlops-journey/posts/mlops-pipeline-helm/06/</link><pubDate>Thu, 10 Jul 2025 17:12:00 +0900</pubDate><guid>https://keonhoban.github.io/mlops-journey/posts/mlops-pipeline-helm/06/</guid><description>&lt;h2 id="-ì‹œë‚˜ë¦¬ì˜¤-ì„¤ëª…">ğŸ§  ì‹œë‚˜ë¦¬ì˜¤ ì„¤ëª…&lt;/h2>
&lt;blockquote>
&lt;p>â€œëª¨ë¸ ë°°í¬ ì‹œ ì‹¤ë¬´ì—ì„œëŠ” ìƒˆ ëª¨ë¸ì´ í•™ìŠµëœ ë’¤,&lt;/p>
&lt;p>ê¸°ì¡´ ëª¨ë¸ê³¼ êµì²´ë˜ëŠ” ê³¼ì •ì„ ìë™í™”í•  í•„ìš”ê°€ ìˆìŠµë‹ˆë‹¤.&lt;/p>
&lt;p>Airflowì—ì„œ í•™ìŠµ DAG ì‹¤í–‰ â†’ MLflow ë“±ë¡ â†’ FastAPIê°€ ìƒˆ ëª¨ë¸ ë¡œë”© êµ¬ì¡°ëŠ”,&lt;/p>
&lt;p>ì´ˆê¸° í•«ìŠ¤ì™‘ í˜•íƒœë¥¼ ì‹¤í—˜í•œ ì˜ˆì œì…ë‹ˆë‹¤.â€&lt;/p>&lt;/blockquote>
&lt;ul>
&lt;li>DAGë¡œ train_model_v1/v2 í•™ìŠµ â†’ MLflowì— ë“±ë¡&lt;/li>
&lt;li>FastAPI ì¬ì‹œì‘ìœ¼ë¡œ ëª¨ë¸ í•«ìŠ¤ì™‘ â†’ ìˆ˜ë™ ì´ˆê¸° êµ¬ì¡°ì§€ë§Œ &lt;strong>ë°°í¬ ìë™í™” ì‹¤í—˜&lt;/strong>ì˜ ê¸°ë°˜&lt;/li>
&lt;li>ì¶”í›„ì—” A/B Test, Canary, Zero-Downtime êµ¬ì„±ìœ¼ë¡œ í™•ì¥ ê°€ëŠ¥&lt;/li>
&lt;/ul>
&lt;hr>
&lt;h2 id="-tldr">âœ… TL;DR&lt;/h2>
&lt;ul>
&lt;li>&lt;code>Airflow&lt;/code>ì—ì„œ ì„ íƒí•œ ëª¨ë¸ ë²„ì „ì— ë”°ë¼ í•™ìŠµ ìŠ¤í¬ë¦½íŠ¸ë¥¼ ë‹¤ë¥´ê²Œ ì‹¤í–‰&lt;/li>
&lt;li>í•™ìŠµëœ ëª¨ë¸ì„ &lt;code>MLflow Model Registry&lt;/code>ì— ë“±ë¡ â†’ Production ë‹¨ê³„ë¡œ ìë™ ìŠ¹ê²©&lt;/li>
&lt;li>&lt;code>FastAPI&lt;/code> ì„œë²„ëŠ” &lt;code>Production ëª¨ë¸&lt;/code>ì„ ë‹¤ì‹œ ë¡œë“œ â†’ ë³„ë„ ì½”ë“œ ìˆ˜ì • ì—†ì´ í•«ìŠ¤ì™‘ ì™„ë£Œ&lt;/li>
&lt;li>ì‹¤ë¬´ì—ì„œ ëª¨ë¸ ê²€ì¦/ë°°í¬ ì‚¬ì´í´ ìë™í™”ì— ë°”ë¡œ ì‘ìš© ê°€ëŠ¥&lt;/li>
&lt;/ul>
&lt;hr>
&lt;h2 id="-êµ¬ì¡°-ë‹¤ì´ì–´ê·¸ë¨-í•«ìŠ¤ì™‘-íë¦„">ğŸ§  êµ¬ì¡° ë‹¤ì´ì–´ê·¸ë¨ (í•«ìŠ¤ì™‘ íë¦„)&lt;/h2>
&lt;p>&lt;img alt="06" loading="lazy" src="https://keonhoban.github.io/mlops-journey/images/06.png">&lt;/p></description></item><item><title>[MLOps í”Œë«í¼ êµ¬ì¶• - 5ë‹¨ê³„: FastAPI ì„œë¹™: MLflow ëª¨ë¸ ì—°ë™ ë° í•«ìŠ¤ì™‘ êµ¬ì¡° êµ¬ì¶•]</title><link>https://keonhoban.github.io/mlops-journey/posts/mlops-pipeline-helm/05/</link><pubDate>Mon, 07 Jul 2025 17:11:55 +0900</pubDate><guid>https://keonhoban.github.io/mlops-journey/posts/mlops-pipeline-helm/05/</guid><description>&lt;h2 id="-ì‹œë‚˜ë¦¬ì˜¤-ì„¤ëª…">ğŸ§  ì‹œë‚˜ë¦¬ì˜¤ ì„¤ëª…&lt;/h2>
&lt;blockquote>
&lt;p>â€œ ëª¨ë¸ì„ ìˆ˜ë™ìœ¼ë¡œ ë„£ëŠ” ê²ƒì´ ì•„ë‹ˆë¼,&lt;/p>
&lt;p>MLflowì— ë“±ë¡ëœ Production ëª¨ë¸ì„ ì„œë¹™ APIì—ì„œ &lt;strong>ìë™ ë¡œë”©&lt;/strong>í•˜ëŠ” êµ¬ì¡°ë¥¼ ì§€í–¥í•©ë‹ˆë‹¤.â€&lt;/p>&lt;/blockquote>
&lt;ul>
&lt;li>FastAPIëŠ” ê²½ëŸ‰í™”ëœ ì„œë¹™ ì„œë²„ë¡œì„œ ì í•©&lt;/li>
&lt;li>MLflow &lt;code>pyfunc.load_model()&lt;/code>ì„ í†µí•´ ìë™ ë¡œë”© â†’ CI/CD ë° ëª¨ë¸ ìë™í™” ê°€ëŠ¥&lt;/li>
&lt;li>S3ì™€ ì—°ê²°ë˜ë¯€ë¡œ, â€œë¡œì»¬ ë³µì‚¬ë³¸ ê´€ë¦¬ Xâ€, ì¬í˜„ì„± ìœ ì§€&lt;/li>
&lt;li>API í˜¸ì¶œì„ í†µí•´ ì‹¤ì œ ì¶”ë¡  ê²°ê³¼ í™•ì¸ ê°€ëŠ¥&lt;/li>
&lt;/ul>
&lt;hr>
&lt;h2 id="-tldr">âœ¨ TL;DR&lt;/h2>
&lt;ul>
&lt;li>MLflowì—ì„œ ë“±ë¡í•œ ëª¨ë¸ì„ &lt;strong>FastAPI ê¸°ë°˜ REST API&lt;/strong>ë¡œ ì„œë¹™í•©ë‹ˆë‹¤.&lt;/li>
&lt;li>&lt;code>mlflow.pyfunc.load_model()&lt;/code>ì„ í†µí•´ &lt;strong>Stageë³„ ë²„ì „ ê´€ë¦¬&lt;/strong>, &lt;strong>í•«ìŠ¤ì™‘&lt;/strong>, &lt;strong>ëª¨ë¸ ì •ë³´ ì¡°íšŒ&lt;/strong>ê°€ ê°€ëŠ¥í•©ë‹ˆë‹¤.&lt;/li>
&lt;li>ì¿ ë²„ë„¤í‹°ìŠ¤ ê¸°ë°˜ìœ¼ë¡œ Helm Chart ë°°í¬ + AWS ì¸ì¦ Secret + Ingress ì ‘ê·¼ê¹Œì§€ ì—°ë™í•©ë‹ˆë‹¤.&lt;/li>
&lt;/ul>
&lt;hr>
&lt;h2 id="-ì•„í‚¤í…ì²˜-êµ¬ì„±ë„">ğŸ“ ì•„í‚¤í…ì²˜ êµ¬ì„±ë„&lt;/h2>
&lt;p>&lt;img alt="05" loading="lazy" src="https://keonhoban.github.io/mlops-journey/images/05.png">&lt;/p></description></item><item><title>[Airflow ê¸°ì´ˆ ìë™í™” - Airflow â†’ MLflow â†’ FastAPI]</title><link>https://keonhoban.github.io/mlops-journey/projects/mlops_pipeline/basic/</link><pubDate>Fri, 13 Jun 2025 20:58:51 +0900</pubDate><guid>https://keonhoban.github.io/mlops-journey/projects/mlops_pipeline/basic/</guid><description>&lt;h2 id="-ì „ì²´-íë¦„-ì˜ˆì‹œ">ğŸ§­ ì „ì²´ íë¦„ ì˜ˆì‹œ&lt;/h2>
&lt;pre tabindex="0">&lt;code>[AIRFLOW DAG ì‹¤í–‰]
â†“
[train_mlflow.py]
- iris ëª¨ë¸ í•™ìŠµ
- íŒŒë¼ë¯¸í„°/ë©”íŠ¸ë¦­ ë¡œê¹…
- ëª¨ë¸ Registry ë“±ë¡
â†“
[promote_mlflow.py]
- ìµœì‹  ëª¨ë¸ì„ Productionìœ¼ë¡œ ì „í™˜
â†“
[FastAPI]
- models:/IrisModel/Production â†’ ì‹¤ì‹œê°„ ì˜ˆì¸¡
&lt;/code>&lt;/pre>&lt;p>ğŸ‘‰ ì‹¤ìŠµ ì½”ë“œëŠ” &lt;a href="https://github.com/keonhoban/mlops-infra-labs/tree/main/airflow_mlflow_fastapi_dockerCompose">ğŸ”— GitHub (Airflow + MLflow + FastAPI)&lt;/a>&lt;/p>
&lt;hr>
&lt;h2 id="-1ë‹¨ê³„-í”„ë¡œì íŠ¸-ê¸°ë³¸-í´ë”-êµ¬ì¡°-ì„¤ê³„">âœ… [1ë‹¨ê³„] í”„ë¡œì íŠ¸ ê¸°ë³¸ í´ë” êµ¬ì¡° ì„¤ê³„&lt;/h2>
&lt;h3 id="-1-ì „ì²´-ë””ë ‰í† ë¦¬-êµ¬ì„±ë„">ğŸ“ 1. ì „ì²´ ë””ë ‰í† ë¦¬ êµ¬ì„±ë„&lt;/h3>
&lt;pre tabindex="0">&lt;code>mlops_project/
â”œâ”€â”€ airflow/ ğŸ›« Airflow ì„¤ì • ë° DAG ìŠ¤ì¼€ì¤„ëŸ¬
â”‚ â”œâ”€â”€ dags/ â† DAG ì •ì˜ ë””ë ‰í† ë¦¬
â”‚ â”‚ â””â”€â”€ train_with_mlflow.py â† í•™ìŠµ DAG (MLflow ì—°ë™)
â”‚ â”œâ”€â”€ Dockerfile.airflow â† Airflowìš© Dockerfile
â”‚ â”œâ”€â”€ requirements.txt â† Airflow ì˜ì¡´ì„±
â”‚ â””â”€â”€ .dockerignore
â”‚
â”œâ”€â”€ fastapi/ âš¡ FastAPI ì˜ˆì¸¡ API ì„œë²„
â”‚ â”œâ”€â”€ app/
â”‚ â”‚ â””â”€â”€ main.py â† ëª¨ë¸ ì„œë¹™ ì—”ë“œí¬ì¸íŠ¸
â”‚ â”œâ”€â”€ Dockerfile.api â† FastAPIìš© Dockerfile
â”‚ â”œâ”€â”€ requirements.txt â† FastAPI ì˜ì¡´ì„±
â”‚ â””â”€â”€ .dockerignore
â”‚
â”œâ”€â”€ ml_code/ ğŸ§  ML í•™ìŠµ ë° í”„ë¡œëª¨ì…˜ ì½”ë“œ
â”‚ â”œâ”€â”€ train_mlflow.py â† ëª¨ë¸ í•™ìŠµ ë° MLflow ë¡œê¹…
â”‚ â””â”€â”€ promte_mlflow.py â† ëª¨ë¸ í”„ë¡œëª¨ì…˜ (Staging â†’ Production)
â”‚
â”œâ”€â”€ mlflow_store/ ğŸ—‚ï¸ MLflow ì €ì¥ì†Œ ê²½ë¡œ (ë³¼ë¥¨)
â”‚ â”œâ”€â”€ Dockerfile.mlflow â† MLflow ì„œë²„ ì»¤ìŠ¤í„°ë§ˆì´ì§•
â”‚ â”œâ”€â”€ mlflow.db â† Model Registry DB (sqlite)
â”‚ â”œâ”€â”€ mlruns/ â† ì‹¤í—˜ ë¡œê·¸ ë””ë ‰í† ë¦¬
â”‚ â”œâ”€â”€ artifacts/ â† ëª¨ë¸ ì•„í‹°íŒ©íŠ¸ ì €ì¥ì†Œ
â”‚ â””â”€â”€ .dockerignore
â”‚
â”œâ”€â”€ docker-compose.yaml ğŸ§© ì „ì²´ ì„œë¹„ìŠ¤ êµ¬ì„± ì •ì˜
â”œâ”€â”€ .env ğŸ” ë¯¼ê° ì •ë³´ (.envë¡œ ë¶„ë¦¬)
â”œâ”€â”€ README.md ğŸ“ ì „ì²´ í”„ë¡œì íŠ¸ ë¬¸ì„œí™”
â”œâ”€â”€ .gitignore
â””â”€â”€ .dockerignore
&lt;/code>&lt;/pre>&lt;hr>
&lt;h2 id="-2ë‹¨ê³„-docker-composeyaml-í†µí•©-êµ¬ì„±">âœ… [2ë‹¨ê³„] &lt;code>docker-compose.yaml&lt;/code> í†µí•© êµ¬ì„±&lt;/h2>
&lt;h3 id="-êµ¬ì„±-ëª©í‘œ">ğŸ§­ êµ¬ì„± ëª©í‘œ&lt;/h3>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>ì„œë¹„ìŠ¤ëª…&lt;/th>
&lt;th>ì„¤ëª…&lt;/th>
&lt;th>í¬íŠ¸&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>&lt;code>airflow&lt;/code>&lt;/td>
&lt;td>DAG ì‹¤í–‰ í™˜ê²½ (webserver/scheduler)&lt;/td>
&lt;td>&lt;code>8080&lt;/code>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>postgres&lt;/code>&lt;/td>
&lt;td>Airflow ë©”íƒ€ë°ì´í„° ì €ì¥ìš© DB&lt;/td>
&lt;td>ë‚´ë¶€ í†µì‹ &lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>mlflow&lt;/code>&lt;/td>
&lt;td>MLflow UI + Registry ê¸°ëŠ¥&lt;/td>
&lt;td>&lt;code>5000&lt;/code>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>fastapi&lt;/code>&lt;/td>
&lt;td>ì¶”ë¡  API ì„œë²„ (ëª¨ë¸ ë¡œë”©)&lt;/td>
&lt;td>&lt;code>8000&lt;/code>&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;ul>
&lt;li>ì´ë¯¸ì§€ ì‚¬ìš©ì‹œ ì£¼ì˜ (UIë§Œ ì œê³µí•˜ëŠ” ì´ë¯¸ì§€ ì¡´ì¬)&lt;/li>
&lt;/ul>
&lt;hr>
&lt;h3 id="-docker-composeyaml-ì „ì²´-ì˜ˆì‹œ">ğŸ“„ &lt;code>docker-compose.yaml&lt;/code> ì „ì²´ ì˜ˆì‹œ&lt;/h3>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-yaml" data-lang="yaml">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">version&lt;/span>: &lt;span style="color:#e6db74">&amp;#39;3.8&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">services&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#75715e"># ğŸ“¦ PostgreSQL: Airflow ë©”íƒ€ë°ì´í„° ì €ì¥ìš© DB&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">postgres&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">image&lt;/span>: &lt;span style="color:#ae81ff">postgres:13&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">container_name&lt;/span>: &lt;span style="color:#ae81ff">postgres&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">env_file&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - &lt;span style="color:#ae81ff">.env &lt;/span> &lt;span style="color:#75715e"># â† ë¯¼ê°ì •ë³´ ë¶„ë¦¬ (ì•„ì´ë””/ë¹„ë²ˆ)&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">environment&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">POSTGRES_USER&lt;/span>: &lt;span style="color:#ae81ff">${POSTGRES_USER}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">POSTGRES_PASSWORD&lt;/span>: &lt;span style="color:#ae81ff">${POSTGRES_PASSWORD}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">POSTGRES_DB&lt;/span>: &lt;span style="color:#ae81ff">${POSTGRES_DB}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">volumes&lt;/span>: &lt;span style="color:#75715e"># â† ì½”ë“œ/ë°ì´í„° ê³µìœ  ë° ì˜ì†ì„± ë³´ì¥&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - &lt;span style="color:#ae81ff">postgres_data:/var/lib/postgresql/data &lt;/span> &lt;span style="color:#75715e"># â† DB ë°ì´í„° ìœ ì§€ (ì¬ì‹œì‘ ëŒ€ë¹„)&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#75715e"># ğŸ›« Airflow: DAG ìŠ¤ì¼€ì¤„ëŸ¬ ë° íƒœìŠ¤í¬ ì‹¤í–‰&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">airflow&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">build&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">context&lt;/span>: &lt;span style="color:#ae81ff">./airflow &lt;/span> &lt;span style="color:#75715e"># â†’ Airflow ì „ìš© Dockerfile ê²½ë¡œ&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">dockerfile&lt;/span>: &lt;span style="color:#ae81ff">Dockerfile.airflow&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">container_name&lt;/span>: &lt;span style="color:#ae81ff">airflow&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">command&lt;/span>: &lt;span style="color:#ae81ff">standalone &lt;/span> &lt;span style="color:#75715e"># â†’ ë¡œì»¬ í…ŒìŠ¤íŠ¸ìš© ê°„ë‹¨ ì‹¤í–‰ ëª…ë ¹ &lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#75715e"># (- Scheduler + Webserver + DB ì´ˆê¸°í™”ê¹Œì§€ ìë™ìœ¼ë¡œ í•œë²ˆì— ì‹¤í–‰)&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#75715e"># (- ì‹¤ë¬´/ìš´ì˜ì—ì„œëŠ” airflow-webserver, airflow-scheduler í•„ë“œ ë¶„ë¦¬)&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">ports&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - &lt;span style="color:#e6db74">&amp;#34;8080:8080&amp;#34;&lt;/span> &lt;span style="color:#75715e"># â†’ Airflow ì›¹ UI (localhost:8080)&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">depends_on&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - &lt;span style="color:#ae81ff">postgres &lt;/span> &lt;span style="color:#75715e"># â†’ DBê°€ ë¨¼ì € ì˜¬ë¼ì™€ì•¼ Airflow ì‹œì‘ ê°€ëŠ¥&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">env_file&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - &lt;span style="color:#ae81ff">.env&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">environment&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#75715e"># Airflow ë©”íƒ€ë°ì´í„° DB ì—°ê²° ì£¼ì†Œ&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">AIRFLOW__CORE__SQL_ALCHEMY_CONN&lt;/span>: &lt;span style="color:#ae81ff">${AIRFLOW__CORE__SQL_ALCHEMY_CONN}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#75715e"># Airflow ì˜ˆì œ DAG ë¶ˆëŸ¬ì˜¬ì§€ ì—¬ë¶€&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">AIRFLOW__CORE__LOAD_EXAMPLES&lt;/span>: &lt;span style="color:#ae81ff">${AIRFLOW__CORE__LOAD_EXAMPLES} &lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">MLFLOW_TRACKING_URI&lt;/span>: &lt;span style="color:#ae81ff">http://mlflow:5000 &lt;/span> &lt;span style="color:#75715e"># â†’ DAG ì½”ë“œì—ì„œ MLflow ì—°ë™&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">volumes&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - &lt;span style="color:#ae81ff">./airflow/dags:/opt/airflow/dags &lt;/span> &lt;span style="color:#75715e"># DAG íŒŒì¼ mount&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - &lt;span style="color:#ae81ff">./ml_code:/opt/airflow/ml_code &lt;/span> &lt;span style="color:#75715e"># í•™ìŠµ ì½”ë“œ ê³µìœ &lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - &lt;span style="color:#ae81ff">./mlflow_store:/mlflow &lt;/span> &lt;span style="color:#75715e"># ëª¨ë¸ ì €ì¥ì†Œ ê³µìœ &lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#75715e"># ğŸ”¬ MLflow: ì‹¤í—˜ ì¶”ì  + ëª¨ë¸ ë ˆì§€ìŠ¤íŠ¸ë¦¬ ì„œë²„&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">mlflow&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">build&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">context&lt;/span>: &lt;span style="color:#ae81ff">./mlflow_store &lt;/span> &lt;span style="color:#75715e"># ì»¤ìŠ¤í…€ Dockerfile ìœ„ì¹˜&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">dockerfile&lt;/span>: &lt;span style="color:#ae81ff">Dockerfile.mlflow&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">ports&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - &lt;span style="color:#e6db74">&amp;#34;5000:5000&amp;#34;&lt;/span> &lt;span style="color:#75715e"># â†’ MLflow UI (localhost:5000)&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">volumes&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - &lt;span style="color:#ae81ff">./mlflow_store:/mlflow &lt;/span> &lt;span style="color:#75715e"># ì‹¤í—˜ ë¡œê·¸ + DB + artifacts ì €ì¥&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">environment&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - &lt;span style="color:#ae81ff">MLFLOW_TRACKING_URI=http://0.0.0.0:5000 &lt;/span> &lt;span style="color:#75715e"># ë‚´ë¶€ ì»¨í…Œì´ë„ˆ ê¸°ì¤€ URI&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#75715e"># âš¡ FastAPI: ëª¨ë¸ ì„œë¹™ API&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">fastapi&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">build&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">context&lt;/span>: &lt;span style="color:#ae81ff">./fastapi&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">dockerfile&lt;/span>: &lt;span style="color:#ae81ff">Dockerfile.api&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">container_name&lt;/span>: &lt;span style="color:#ae81ff">fastapi&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">ports&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - &lt;span style="color:#e6db74">&amp;#34;8000:8000&amp;#34;&lt;/span> &lt;span style="color:#75715e"># â†’ ì˜ˆì¸¡ API ì—”ë“œí¬ì¸íŠ¸ (localhost:8000)&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">volumes&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - &lt;span style="color:#ae81ff">./fastapi/app:/app/app &lt;/span> &lt;span style="color:#75715e"># FastAPI app ë””ë ‰í† ë¦¬ mount&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - &lt;span style="color:#ae81ff">./ml_code:/app/ml_code &lt;/span> &lt;span style="color:#75715e"># í•™ìŠµ/ëª¨ë¸ ì½”ë“œ ê³µìœ &lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - &lt;span style="color:#ae81ff">./mlflow_store:/mlflow &lt;/span> &lt;span style="color:#75715e"># ì €ì¥ëœ ëª¨ë¸ ë¶ˆëŸ¬ì˜¤ê¸° ìœ„í•œ mount&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># ğŸ—‚ï¸ ë³¼ë¥¨ ì •ì˜ (Postgres DB ì˜ì†ì„± ìœ ì§€)&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">volumes&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">postgres_data&lt;/span>:
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;hr>
&lt;h2 id="-ì¶”ê°€ë¡œ-í•´ì•¼-í• -ê²ƒ">ğŸ ì¶”ê°€ë¡œ í•´ì•¼ í•  ê²ƒ&lt;/h2>
&lt;ul>
&lt;li>Airflow ì²« ì‹¤í–‰ í›„ì—” ë³´í†µ &lt;strong>ê´€ë¦¬ì ê³„ì • ìƒì„±&lt;/strong>ë„ í•´ì¤˜ì•¼ í•¨:&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># airflow ì»¨í…Œì´ë„ˆ ì ‘ì†&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>docker exec -it airflow bash
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># ê´€ë¦¬ì ê³„ì • ìƒì„±&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>airflow users create &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span> --username airflow &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span> --password airflow &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span> --firstname Keoho &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span> --lastname Ban &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span> --role Admin &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span> --email airflow@example.com
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;hr>
&lt;h3 id="-êµ¬ì¶•-tip-airflow-fastapi-mlflow-ê°„-ê³µìœ -ë³¼ë¥¨-êµ¬ì¡°-í™•ì¸">ğŸ” [êµ¬ì¶• Tip] &lt;strong>Airflow, FastAPI, MLflow ê°„ ê³µìœ  ë³¼ë¥¨ êµ¬ì¡° í™•ì¸&lt;/strong>&lt;/h3>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>ê³µìœ  ë¦¬ì†ŒìŠ¤&lt;/th>
&lt;th>ì„¤ëª…&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>&lt;code>./mlflow_store:/mlflow&lt;/code> (MLflow)&lt;/td>
&lt;td>MLflow ì„œë²„ê°€ ì“°ëŠ” ë¡œê·¸/ëª¨ë¸ ì €ì¥ì†Œ&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>./mlflow_store:/mlflow&lt;/code> (Airflow)&lt;/td>
&lt;td>í•™ìŠµ í›„ ëª¨ë¸ ì €ì¥ ìœ„ì¹˜ ê³µìœ &lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>./mlflow_store:/mlflow&lt;/code> (FastAPI)&lt;/td>
&lt;td>ëª¨ë¸ ì¶”ë¡  ì‹œ ë¡œë“œ ê²½ë¡œ ê³µìœ &lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;p>â¡ &lt;strong>ê²½ë¡œ í†µì¼ì„±&lt;/strong>ì´ ë§¤ìš° ì¤‘ìš”í•¨! ì§€ê¸ˆì€ ëª¨ë‘ &lt;code>./mlflow&lt;/code>ë¡œ ê³µìœ  (./mlflow í•˜ìœ„ì— /mlruns ì¡´ì¬)&lt;/p></description></item><item><title>[MLflow : Tracking + FastAPI ì—°ë™]</title><link>https://keonhoban.github.io/mlops-journey/projects/mlflow/01/</link><pubDate>Fri, 06 Jun 2025 15:14:40 +0900</pubDate><guid>https://keonhoban.github.io/mlops-journey/projects/mlflow/01/</guid><description>&lt;blockquote>
&lt;p>ëª©í‘œ&lt;/p>
&lt;ol>
&lt;li>MLflow Tracking Server êµ¬ì„±&lt;/li>
&lt;li>ì‹¤í—˜(Experiment), íŒŒë¼ë¯¸í„°, ë©”íŠ¸ë¦­, ì•„í‹°íŒ©íŠ¸ ê¸°ë¡&lt;/li>
&lt;li>ëª¨ë¸ ë“±ë¡ â†’ Stage ì´ë™ â†’ API ì—°ë™ê¹Œì§€&lt;/li>
&lt;/ol>&lt;/blockquote>
&lt;p>ğŸ‘‰ ì‹¤ìŠµ ì½”ë“œëŠ” &lt;a href="https://github.com/keonhoban/mlops-infra-labs/tree/main/mlflow">ğŸ”— GitHub (Mlflow - Tracking + FastAPI)&lt;/a>&lt;/p>
&lt;hr>
&lt;h2 id="-ì‹¤ìŠµ-ì „ì²´-íë¦„-ìš”ì•½">ğŸ§­ ì‹¤ìŠµ ì „ì²´ íë¦„ ìš”ì•½&lt;/h2>
&lt;pre tabindex="0">&lt;code>[1ë‹¨ê³„] MLflow Tracking Server êµ¬ì„± (ë¡œì»¬ í™˜ê²½ì—ì„œ ì‹¤í–‰)
[2ë‹¨ê³„] ì‹¤í—˜ ì‹¤í–‰ (train.py) â†’ ëª¨ë¸ í•™ìŠµ, ê¸°ë¡
[3ë‹¨ê³„] ëª¨ë¸ ë“±ë¡ ë° Stage ì„¤ì • (Production ì´ë™)
[4ë‹¨ê³„] FastAPI ì—°ë™ â†’ ì˜ˆì¸¡ API ì„œë¹„ìŠ¤
&lt;/code>&lt;/pre>&lt;hr>
&lt;h2 id="-ì‹¤ìŠµ-ë””ë ‰í† ë¦¬-ì˜ˆì‹œ">ğŸ§© ì‹¤ìŠµ ë””ë ‰í† ë¦¬ ì˜ˆì‹œ&lt;/h2>
&lt;pre tabindex="0">&lt;code>mlops-mlflow/
â”œâ”€â”€ app/
â”‚ â”œâ”€â”€ train.py # ëª¨ë¸ í›ˆë ¨ ë° ì‹¤í—˜ ê¸°ë¡
â”‚ â””â”€â”€ model.pkl # ì €ì¥ëœ ëª¨ë¸
â”œâ”€â”€ mlruns/ # ì‹¤í—˜ ë°ì´í„° ìë™ ìƒì„±
â”œâ”€â”€ fastapi_app/
â”‚ â””â”€â”€ app.py # FastAPI ì˜ˆì¸¡ API
â”œâ”€â”€ Dockerfile (ì„ íƒ)
â””â”€â”€ README.md
&lt;/code>&lt;/pre>&lt;hr>
&lt;h2 id="-1ë‹¨ê³„-mlflow-ì„¤ì¹˜--ì‹¤í–‰">âœ… [1ë‹¨ê³„] MLflow ì„¤ì¹˜ &amp;amp; ì‹¤í–‰&lt;/h2>
&lt;h3 id="-ê°€ìƒ-í™˜ê²½-ì„¤ì •">ğŸ› ï¸ ê°€ìƒ í™˜ê²½ ì„¤ì •&lt;/h3>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># 1. venv ì„¤ì¹˜&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>sudo apt install python3-venv -y
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># 2. ê°€ìƒí™˜ê²½ ìƒì„±&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>python3 -m venv .venv
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># 3. ê°€ìƒí™˜ê²½ í™œì„±í™”&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>source .venv/bin/activate
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># 4. íŒ¨í‚¤ì§€ ì„¤ì¹˜&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>pip install mlflow scikit-learn pandas fastapi uvicorn
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># 5. ë‚˜ê°ˆ ë•Œ&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>deactivate
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="-mlflow-ì„œë²„-ì‹¤í–‰">ğŸ”§ MLflow ì„œë²„ ì‹¤í–‰&lt;/h3>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>mlflow ui --port &lt;span style="color:#ae81ff">5000&lt;/span> &lt;span style="color:#75715e"># http://localhost:5000 ì—ì„œ UI í™•ì¸&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;hr>
&lt;h2 id="-2ë‹¨ê³„-ì‹¤í—˜-ì‹¤í–‰-trainpy">ğŸ§ª [2ë‹¨ê³„] ì‹¤í—˜ ì‹¤í–‰ (train.py)&lt;/h2>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-python" data-lang="python">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># app/train.py&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">import&lt;/span> mlflow
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">import&lt;/span> mlflow.sklearn
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">from&lt;/span> sklearn.ensemble &lt;span style="color:#f92672">import&lt;/span> RandomForestClassifier
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">from&lt;/span> sklearn.datasets &lt;span style="color:#f92672">import&lt;/span> load_iris
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">from&lt;/span> sklearn.model_selection &lt;span style="color:#f92672">import&lt;/span> train_test_split
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># MLflow ì„¤ì •&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>mlflow&lt;span style="color:#f92672">.&lt;/span>set_tracking_uri(&lt;span style="color:#e6db74">&amp;#34;http://localhost:5000&amp;#34;&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>mlflow&lt;span style="color:#f92672">.&lt;/span>set_experiment(&lt;span style="color:#e6db74">&amp;#34;iris-rf-exp&amp;#34;&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">with&lt;/span> mlflow&lt;span style="color:#f92672">.&lt;/span>start_run():
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> iris &lt;span style="color:#f92672">=&lt;/span> load_iris()
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> X_train, X_test, y_train, y_test &lt;span style="color:#f92672">=&lt;/span> train_test_split(iris&lt;span style="color:#f92672">.&lt;/span>data, iris&lt;span style="color:#f92672">.&lt;/span>target, test_size&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#ae81ff">0.2&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> clf &lt;span style="color:#f92672">=&lt;/span> RandomForestClassifier(n_estimators&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#ae81ff">100&lt;/span>, max_depth&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#ae81ff">3&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> clf&lt;span style="color:#f92672">.&lt;/span>fit(X_train, y_train)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> acc &lt;span style="color:#f92672">=&lt;/span> clf&lt;span style="color:#f92672">.&lt;/span>score(X_test, y_test)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> mlflow&lt;span style="color:#f92672">.&lt;/span>log_param(&lt;span style="color:#e6db74">&amp;#34;n_estimators&amp;#34;&lt;/span>, &lt;span style="color:#ae81ff">100&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> mlflow&lt;span style="color:#f92672">.&lt;/span>log_param(&lt;span style="color:#e6db74">&amp;#34;max_depth&amp;#34;&lt;/span>, &lt;span style="color:#ae81ff">3&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> mlflow&lt;span style="color:#f92672">.&lt;/span>log_metric(&lt;span style="color:#e6db74">&amp;#34;accuracy&amp;#34;&lt;/span>, acc)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> mlflow&lt;span style="color:#f92672">.&lt;/span>sklearn&lt;span style="color:#f92672">.&lt;/span>log_model(clf, &lt;span style="color:#e6db74">&amp;#34;model&amp;#34;&lt;/span>)
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># ì‹¤í—˜ ì‹¤í–‰&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>python app/train.py
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;blockquote>
&lt;p>ì‹¤í—˜ì´ ëë‚˜ë©´ mlruns/ í´ë”ì— ì‹¤í—˜ ê¸°ë¡ ë° ëª¨ë¸ì´ ì €ì¥&lt;/p></description></item></channel></rss>