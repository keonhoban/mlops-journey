<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>FastAPI | 🏔️ MLOps Journey</title>
<meta name=keywords content><meta name=description content><meta name=author content><link rel=canonical href=https://keonhoban.github.io/mlops-journey/categories/fastapi/><link crossorigin=anonymous href=/mlops-journey/assets/css/stylesheet.f49d66caae9ea0fd43f21f29e71a8d3e284517ed770f2aa86fa012953ad3c9ef.css integrity="sha256-9J1myq6eoP1D8h8p5xqNPihFF+13Dyqob6ASlTrTye8=" rel="preload stylesheet" as=style><link rel=icon href=https://keonhoban.github.io/mlops-journey/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://keonhoban.github.io/mlops-journey/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://keonhoban.github.io/mlops-journey/favicon-32x32.png><link rel=apple-touch-icon href=https://keonhoban.github.io/mlops-journey/apple-touch-icon.png><link rel=mask-icon href=https://keonhoban.github.io/mlops-journey/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate type=application/rss+xml href=https://keonhoban.github.io/mlops-journey/categories/fastapi/index.xml><link rel=alternate hreflang=en href=https://keonhoban.github.io/mlops-journey/categories/fastapi/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:url" content="https://keonhoban.github.io/mlops-journey/categories/fastapi/"><meta property="og:site_name" content="🏔️  MLOps Journey"><meta property="og:title" content="FastAPI"><meta property="og:locale" content="ko"><meta property="og:type" content="website"><meta name=twitter:card content="summary"><meta name=twitter:title content="FastAPI"><meta name=twitter:description content></head><body class=list id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://keonhoban.github.io/mlops-journey/ accesskey=h title="🏔️  MLOps Journey (Alt + H)">🏔️ MLOps Journey</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)" aria-label="Toggle theme"><svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://keonhoban.github.io/mlops-journey/ title="🏠 Home"><span>🏠 Home</span></a></li><li><a href=https://keonhoban.github.io/mlops-journey/projects/ title="📂 Projects"><span>📂 Projects</span></a></li><li><a href=https://keonhoban.github.io/mlops-journey/posts/ title="📝 Blog"><span>📝 Blog</span></a></li><li><a href=https://keonhoban.github.io/mlops-journey/about/ title="🧗 About"><span>🧗 About</span></a></li><li><a href=https://keonhoban.github.io/mlops-journey/categories/ title="📖 Categories"><span>📖 Categories</span></a></li></ul></nav></header><main class=main><header class=page-header><div class=breadcrumbs><a href=https://keonhoban.github.io/mlops-journey/>Home</a>&nbsp;»&nbsp;<a href=https://keonhoban.github.io/mlops-journey/categories/>Categories</a></div><h1>FastAPI</h1></header><article class="post-entry tag-entry"><header class=entry-header><h2 class=entry-hint-parent>[MLOps 플랫폼 Observability & Data Pipeline - 검증]</h2></header><div class=entry-content><p>🧭 목차 구분 증명 포인트 A. Observability 메트릭·로그·알람 dev/prod 완전 분리 B. FastAPI Observability RPS·p95·에러·로그 패널 정상 동작 C. Data Pipeline Raw→Feature ETL 자동 실행 성공 D. Data Pipeline Advanced 버전·스키마·메타데이터·관측 등 운영형 구조 A. Observability 계층 Observability 계층(모니터링 + 로그 수집 + 알람)이
GitOps 기반으로 dev/prod 완전 분리 + 자동화 되어 있음을 증명합니다.
1️⃣ ArgoCD Applications (GitOps 기반 구성) ✔ 1-1. CLI로 전체 Application 상태 확인 kubectl -n argocd get applications ...</p></div><footer class=entry-footer><span title='2025-11-30 02:50:21 +0900 +0900'>November 30, 2025</span>&nbsp;·&nbsp;9 min</footer><a class=entry-link aria-label="post link to [MLOps 플랫폼 Observability & Data Pipeline - 검증]" href=https://keonhoban.github.io/mlops-journey/projects/mlops_pipeline_observability/02/></a></article><article class="post-entry tag-entry"><header class=entry-header><h2 class=entry-hint-parent>[MLOps 플랫폼 Observability & Data Pipeline - 에필로그]</h2></header><div class=entry-content><p>에필로그 — “관측·알림·데이터까지 한 번에 이어지는 MLOps 운영 플랫폼” 📌 전체 경로 요약 순서 주제 1 🔗 kube-prometheus-stack + GitOps 구축 2 🔗 Alertmanager Slack & 트러블슈팅 3 🔗 Prometheus/KSM/Kubelet 완전 분리 구조 4 🔗 Loki/Promtail 로그 파이프라인 구축 5 🔗 운영 중 발생한 실제 이슈 & 해결 과정 6 🔗 FastAPI Observability Dashboard & Alert Library 7 🔗 Data Pipeline 구축 8 🔗 Data Pipeline 고도화 9 🔗 검증 🎯 전체 회고 요약 단계 핵심 목표 주요 개선점 1 모니터링 뼈대 구축 kube-prometheus-stack dev/prod 완전 분리 2 Slack 알람 통합 Alertmanager configSecret 표준화 + 알람 라우팅 3 메트릭 교차 수집 제거 KSM/Kubelet 라벨 통일, Prometheus TSDB local-path 4 로그 파이프라인 완성 Loki/Promtail dev/prod 분리 + LogQL Range Query 5 실제 운영 이슈 해결 라벨/Secret/NFS 권한/NFS unmount 문제 일괄 해결 6 FastAPI 관측 대시보드 RPS·p95·ErrorRate·로그·알람 템플릿 구축 7 Data Pipeline 구축 (v1) S3 Raw → Feature ETL 자동화 (Airflow DAG) 8 Data Pipeline 고도화 (v2) 버전·스키마·메타데이터 자동화 + 관측 대시보드 9 검증 Observability 계층, Grafana 대시보드, Datapipeline 🔄 핵심 문장:
...</p></div><footer class=entry-footer><span title='2025-11-20 17:10:21 +0900 +0900'>November 20, 2025</span>&nbsp;·&nbsp;3 min</footer><a class=entry-link aria-label="post link to [MLOps 플랫폼 Observability & Data Pipeline - 에필로그]" href=https://keonhoban.github.io/mlops-journey/projects/mlops_pipeline_observability/01/></a></article><article class="post-entry tag-entry"><header class=entry-header><h2 class=entry-hint-parent>[MLOps 플랫폼 Observability & Data Pipeline - 6단계 : FastAPI Observability Dashboard & Alert Library]</h2></header><div class=entry-content><p>FastAPI Observability Dashboard & Alert Library 🧠 시나리오 설명 “FastAPI는 모델을 서빙하는 ‘입구’이자,
장애가 나면 가장 먼저 흔들리는 지점입니다.”
“그래서 이번 단계에서는 실제 운영처럼
문제가 생기면 바로 감지되고, 원인을 바로 찾을 수 있는 관측체계를 만들었습니다.”
“A/B·Canary·핫스왑 구조 위에 안전망을 올리는 과정,
그 첫 단계가 바로 FastAPI Observability Dashboard & Alert Library입니다.”
🎯 핵심 요약 목표
FastAPI 기반 ML Serving 환경에서
실제 운영 가능한 수준의 관측·알람 체계 구축
장애 발생 시 즉시 감지하고
...</p></div><footer class=entry-footer><span title='2025-11-05 17:10:21 +0900 +0900'>November 5, 2025</span>&nbsp;·&nbsp;4 min</footer><a class=entry-link aria-label="post link to [MLOps 플랫폼 Observability & Data Pipeline - 6단계 : FastAPI Observability Dashboard & Alert Library]" href=https://keonhoban.github.io/mlops-journey/posts/mlops-platform-observability/06/></a></article><article class="post-entry tag-entry"><header class=entry-header><h2 class=entry-hint-parent>[MLOps 운영 고도화 - 5단계: Airflow 안정화 & FastAPI HTTPS 보안]</h2></header><div class=entry-content><p>Airflow 안정화 & FastAPI HTTPS 보안 적용 (cert-manager 어노테이션 반영 완료) 🧠 시나리오 설명 “모델을 등록하는 것보다 더 중요한 건
언제 Reload가 실행되느냐입니다. 여기가 운영 안정성을 나누는 지점이니까요.”
“그래서 이번 단계에서는 Airflow 흐름을 한 번 더 단단히 조이고,
FastAPI 쪽은 HTTPS·화이트리스트까지 적용해
‘안전하게 자동화된다’는 확신을 주는 구조를 만들었습니다.”
🎯 핵심 요약 Airflow: PythonSensor(mode="reschedule")로 READY 감시, TriggerRule.ALL_SUCCESS로 성공 체인에서만 /reload 데이터/상태 꼬임 방지: Variable 검증 유틸 + XCom 키 표준 FastAPI: Ingress TLS(HTTPS) + IP 화이트리스트 강화 cert-manager + ClusterIssuer(self-signed) 자동 발급/갱신: 템플릿에 어노테이션 자동 주입 반영 완료 5-1️⃣ Airflow 안정화: Sensor 리팩토링 & XCom/Variable 표준 1) DAG 구조 ...</p></div><footer class=entry-footer><span title='2025-08-18 17:11:21 +0900 +0900'>August 18, 2025</span>&nbsp;·&nbsp;5 min</footer><a class=entry-link aria-label="post link to [MLOps 운영 고도화 - 5단계: Airflow 안정화 & FastAPI HTTPS 보안]" href=https://keonhoban.github.io/mlops-journey/posts/mlops-platform-gitops/06/></a></article><article class="post-entry tag-entry"><header class=entry-header><h2 class=entry-hint-parent>[MLOps 운영 고도화 - 4단계: FastAPI 로그 안정화 (NFS + PV/PVC + Loguru)]</h2></header><div class=entry-content><p>FastAPI 앱 전면 개편: A/B · Canary · Blue-Green 서빙 베이스 🧠 시나리오 설명 “운영 환경에서 모델은 언제든 교체될 수 있고,
그 순간이 서비스 품질이 가장 크게 흔들리는 위험 구간입니다.”
“그래서 이번 단계에서는 이후 모든 자동화(학습·등록·핫스왑·롤백)의 기반이 되는
A/B · Canary · Blue-Green 전략을 모두 처리할 수 있는 FastAPI 서빙 구조부터 잡았습니다.”
“이 뼈대가 완성돼야 Airflow, MLflow, ArgoCD와 연결된
**진짜 ‘운영형 MLOps 파이프라인’**을 만들 수 있기 때문입니다.”
🎯 핵심 요약 전환 기준 = MLflow Alias(@A/@B)
...</p></div><footer class=entry-footer><span title='2025-08-08 17:10:21 +0900 +0900'>August 8, 2025</span>&nbsp;·&nbsp;5 min</footer><a class=entry-link aria-label="post link to [MLOps 운영 고도화 - 4단계: FastAPI 로그 안정화 (NFS + PV/PVC + Loguru)]" href=https://keonhoban.github.io/mlops-journey/posts/mlops-platform-gitops/05/></a></article><article class="post-entry tag-entry"><header class=entry-header><h2 class=entry-hint-parent>[MLOps 운영 고도화 - 3단계: 모델 롤백 자동화 (등록 실패 대비 복구)]</h2></header><div class=entry-content><p>모델 롤백 자동화: 등록 실패 대비 복구 루프 완성 🧠 시나리오 설명 “모델 배포는 성공했을 때보다, 실패했을 때의 회복 속도가 운영 품질을 결정합니다.”
“그래서 3단계에서는 등록이 실패하는 즉시,
이전 안정 버전으로 돌아가 FastAPI에 자동 반영되는 완전한 롤백 루프를 구축했습니다.”
“이 구조가 있어야 장애 상황에서도 서비스가 끊기지 않고 바로 복구될 수 있습니다.”
🎯 핵심 요약 등록 실패 → 즉시 롤백: 시도 직전 before_version(alias가 가리키던 버전)으로 복귀 READY 검증 → alias 재할당 → FastAPI /reload 까지 자동 수행(실서비스 반영 보장) 수동 롤백 전용 DAG 제공(운영자가 대상 버전 명시) Slack/로그 추적(성공/실패/복구 구분), 실패는 re-raise로 원인 명확화 1️⃣ 플로우 한 장 요약 ...</p></div><footer class=entry-footer><span title='2025-08-01 12:15:21 +0900 +0900'>August 1, 2025</span>&nbsp;·&nbsp;4 min</footer><a class=entry-link aria-label="post link to [MLOps 운영 고도화 - 3단계: 모델 롤백 자동화 (등록 실패 대비 복구)]" href=https://keonhoban.github.io/mlops-journey/posts/mlops-platform-gitops/04/></a></article><article class="post-entry tag-entry"><header class=entry-header><h2 class=entry-hint-parent>[MLOps 운영 고도화 - 2단계: Slack Alert 통합 (FastAPI·Airflow 공용)]</h2></header><div class=entry-content><p>Slack Alert 통합: FastAPI·Airflow 공용 구조 + 템플릿 확장 기반 🧠 시나리오 설명 “운영 환경에서 가장 무서운 건 문제가 생겼는데 아무도 모르고 있는 상황입니다.”
“그래서 2단계에서는 FastAPI와 Airflow가 각자 흩어져 보내던 알림을
하나의 Slack 인터페이스로 완전히 통합했습니다.”
“모델 학습·등록·센서·핫스왑·헬스체크까지
어디에서 무슨 일이 일어나도 즉시 눈에 들어오도록 만드는 것,
그게 이 단계의 핵심 목적이었습니다.”
🎯 핵심 요약 FastAPI와 Airflow가 공통 함수 send_slack_alert(text)를 사용해 알림 체계를 통합 Airflow는 전역 실패 콜백 alert_slack(context)로 DAG/Task 실패 자동 통보 Webhook URL은 SealedSecret → 환경변수(SLACK_WEBHOOK_URL)로 주입 dev(.local) / prod(.prod) 환경 완전 분리: 네임스페이스·시크릿·도메인 각각 대응 1️⃣ 구조 개요 구성 요소 역할 공용 함수 send_slack_alert(text) — FastAPI·Airflow 모두에서 호출 Airflow 전역 콜백 alert_slack(context) — DAG 실패 시 자동 호출 환경 주입 방식 slack-webhook-{env}-secret → SLACK_WEBHOOK_URL 분리 원칙 dev/prod 완전 분리 (네임스페이스·시크릿·도메인) 2️⃣ 시스템 흐름도 ...</p></div><footer class=entry-footer><span title='2025-07-26 17:10:21 +0900 +0900'>July 26, 2025</span>&nbsp;·&nbsp;3 min</footer><a class=entry-link aria-label="post link to [MLOps 운영 고도화 - 2단계: Slack Alert 통합 (FastAPI·Airflow 공용)]" href=https://keonhoban.github.io/mlops-journey/posts/mlops-platform-gitops/03/></a></article><article class="post-entry tag-entry"><header class=entry-header><h2 class=entry-hint-parent>[MLOps 운영 고도화 - 1단계: 핫스왑 고도화 (/reload 보안·DAG 자동화)]</h2></header><div class=entry-content><p>핫스왑 고도화: /reload 보안 강화 + DAG 자동화 연동 🧠 시나리오 설명 “모델을 잘 학습시키는 것도 중요하지만,
잘못된 모델이 실수로 핫스왑되는 순간이 더 치명적입니다.”
그래서 1단계에서는 /reload를 확실하게 잠그고,
학습 → 등록 → 감시 → 핫스왑까지가 Airflow에서 자동으로 흘러가도록 만들었습니다.
이 단계가 완성돼야 이후 단계에서 **안전한 자동 운영(MLOps)**을 구현할 수 있기 때문입니다.
🎯 핵심 요약 보안 3종: x-token(SealedSecret) + Ingress IP whitelist + TLS 자동화: Airflow Train → Register → Sensor(READY) → Reload 전체 시퀀스 일관성: MLflow Alias(@A/@B) 기반 등록·조회·핫스왑 관제: 모든 단계 성공/스킵/실패 Slack 알림 환경 분리: dev(.local) / prod(.prod) — 예: fastapi.local, fastapi.prod
...</p></div><footer class=entry-footer><span title='2025-07-22 12:10:21 +0900 +0900'>July 22, 2025</span>&nbsp;·&nbsp;5 min</footer><a class=entry-link aria-label="post link to [MLOps 운영 고도화 - 1단계: 핫스왑 고도화 (/reload 보안·DAG 자동화)]" href=https://keonhoban.github.io/mlops-journey/posts/mlops-platform-gitops/02/></a></article><article class="post-entry tag-entry"><header class=entry-header><h2 class=entry-hint-parent>[MLOps 운영 고도화 - 0단계: FastAPI A/B·Canary·Blue-Green 서빙 베이스]</h2></header><div class=entry-content><p>FastAPI 앱 전면 개편: A/B · Canary · Blue-Green 서빙 베이스 🧠 시나리오 설명 “운영 환경에서 모델은 언제든 교체될 수 있고,
그 순간이 서비스 품질이 가장 크게 흔들리는 위험 구간입니다.”
“그래서 이번 단계에서는 이후 모든 자동화(학습·등록·핫스왑·롤백)의 기반이 되는
A/B · Canary · Blue-Green 전략을 모두 처리할 수 있는 FastAPI 서빙 구조부터 잡았습니다.”
“이 뼈대가 완성돼야 Airflow, MLflow, ArgoCD와 연결된
**진짜 ‘운영형 MLOps 파이프라인’**을 만들 수 있기 때문입니다.”
🎯 핵심 요약 전환 기준 = MLflow Alias(@A/@B)
...</p></div><footer class=entry-footer><span title='2025-07-18 17:10:21 +0900 +0900'>July 18, 2025</span>&nbsp;·&nbsp;5 min</footer><a class=entry-link aria-label="post link to [MLOps 운영 고도화 - 0단계: FastAPI A/B·Canary·Blue-Green 서빙 베이스]" href=https://keonhoban.github.io/mlops-journey/posts/mlops-platform-gitops/01/></a></article><article class="post-entry tag-entry"><header class=entry-header><h2 class=entry-hint-parent>[MLOps 플랫폼 구축 : Airflow-MLflow-FastAPI (Helm)]</h2></header><div class=entry-content><p>🧩 실전 시나리오 기반 구성 배경 이 프로젝트는 단순 실습을 넘어서, 실제 발생하는 다음과 같은 문제들을 해결하기 위한 MLOps 인프라 구축을 목표로 설계되었습니다.
여러 모델 실험 결과가 뒤섞여 추적이 어려운 문제
→ MLflow Tracking 서버 + PostgreSQL 메타데이터 저장소 구성
모델 파일 및 로그가 로컬에만 저장되어 협업 및 재현성이 떨어지는 문제
→ S3 기반 artifact store 구성 + pyfunc 기반 모델 서빙 구조 설계
수작업 DAG 등록, 모델 배포 등의 비효율적 운영 문제
→ Airflow + GitSync 연동으로 파이프라인 자동화 및 버전 관리 가능
...</p></div><footer class=entry-footer><span title='2025-07-15 17:55:05 +0900 +0900'>July 15, 2025</span>&nbsp;·&nbsp;3 min</footer><a class=entry-link aria-label="post link to [MLOps 플랫폼 구축 : Airflow-MLflow-FastAPI (Helm)]" href=https://keonhoban.github.io/mlops-journey/projects/mlops_pipeline/helm/></a></article><footer class=page-footer><nav class=pagination><a class=next href=https://keonhoban.github.io/mlops-journey/categories/fastapi/page/2/>Next&nbsp;&nbsp;»</a></nav></footer></main><footer class=footer><p style=margin-top:1rem>© 2025 Keonho Ban | <a href=https://github.com/keonhoban target=_blank>GitHub</a> | <a href=mailto:keonho0510@naver.com>Email</a></p></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script></body></html>