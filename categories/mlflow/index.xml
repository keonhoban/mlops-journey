<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:content="http://purl.org/rss/1.0/modules/content/"><channel><title>MLflow on ğŸ”ï¸ MLOps Journey</title><link>https://keonhoban.github.io/mlops-journey/categories/mlflow/</link><description>Recent content in MLflow on ğŸ”ï¸ MLOps Journey</description><generator>Hugo -- 0.145.0</generator><language>ko</language><lastBuildDate>Fri, 06 Jun 2025 15:14:40 +0900</lastBuildDate><atom:link href="https://keonhoban.github.io/mlops-journey/categories/mlflow/index.xml" rel="self" type="application/rss+xml"/><item><title>[MLOps ì‹¤ìŠµ : Tracking + FastAPI ì—°ë™]</title><link>https://keonhoban.github.io/mlops-journey/projects/mlflow/01/</link><pubDate>Fri, 06 Jun 2025 15:14:40 +0900</pubDate><guid>https://keonhoban.github.io/mlops-journey/projects/mlflow/01/</guid><description>&lt;blockquote>
&lt;p>ëª©í‘œ&lt;/p>
&lt;ol>
&lt;li>MLflow Tracking Server êµ¬ì„±&lt;/li>
&lt;li>ì‹¤í—˜(Experiment), íŒŒë¼ë¯¸í„°, ë©”íŠ¸ë¦­, ì•„í‹°íŒ©íŠ¸ ê¸°ë¡&lt;/li>
&lt;li>ëª¨ë¸ ë“±ë¡ â†’ Stage ì´ë™ â†’ API ì—°ë™ê¹Œì§€&lt;/li>
&lt;/ol>&lt;/blockquote>
&lt;p>ğŸ‘‰ ì‹¤ìŠµ ì½”ë“œëŠ” &lt;a href="https://github.com/keonhoban/mlops-infra-labs/tree/main/mlflow">ğŸ”— GitHub (Mlflow - Tracking + FastAPI)&lt;/a>&lt;/p>
&lt;hr>
&lt;h2 id="-ì‹¤ìŠµ-ì „ì²´-íë¦„-ìš”ì•½">ğŸ§­ ì‹¤ìŠµ ì „ì²´ íë¦„ ìš”ì•½&lt;/h2>
&lt;pre tabindex="0">&lt;code>[1ë‹¨ê³„] MLflow Tracking Server êµ¬ì„± (ë¡œì»¬ í™˜ê²½ì—ì„œ ì‹¤í–‰)
[2ë‹¨ê³„] ì‹¤í—˜ ì‹¤í–‰ (train.py) â†’ ëª¨ë¸ í•™ìŠµ, ê¸°ë¡
[3ë‹¨ê³„] ëª¨ë¸ ë“±ë¡ ë° Stage ì„¤ì • (Production ì´ë™)
[4ë‹¨ê³„] FastAPI ì—°ë™ â†’ ì˜ˆì¸¡ API ì„œë¹„ìŠ¤
&lt;/code>&lt;/pre>&lt;hr>
&lt;h2 id="-ì‹¤ìŠµ-ë””ë ‰í† ë¦¬-ì˜ˆì‹œ">ğŸ§© ì‹¤ìŠµ ë””ë ‰í† ë¦¬ ì˜ˆì‹œ&lt;/h2>
&lt;pre tabindex="0">&lt;code>mlops-mlflow/
â”œâ”€â”€ app/
â”‚ â”œâ”€â”€ train.py # ëª¨ë¸ í›ˆë ¨ ë° ì‹¤í—˜ ê¸°ë¡
â”‚ â””â”€â”€ model.pkl # ì €ì¥ëœ ëª¨ë¸
â”œâ”€â”€ mlruns/ # ì‹¤í—˜ ë°ì´í„° ìë™ ìƒì„±
â”œâ”€â”€ fastapi_app/
â”‚ â””â”€â”€ app.py # FastAPI ì˜ˆì¸¡ API
â”œâ”€â”€ Dockerfile (ì„ íƒ)
â””â”€â”€ README.md
&lt;/code>&lt;/pre>&lt;hr>
&lt;h2 id="-1ë‹¨ê³„-mlflow-ì„¤ì¹˜--ì‹¤í–‰">âœ… [1ë‹¨ê³„] MLflow ì„¤ì¹˜ &amp;amp; ì‹¤í–‰&lt;/h2>
&lt;h3 id="-ê°€ìƒ-í™˜ê²½-ì„¤ì •">ğŸ› ï¸ ê°€ìƒ í™˜ê²½ ì„¤ì •&lt;/h3>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># 1. venv ì„¤ì¹˜&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>sudo apt install python3-venv -y
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># 2. ê°€ìƒí™˜ê²½ ìƒì„±&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>python3 -m venv .venv
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># 3. ê°€ìƒí™˜ê²½ í™œì„±í™”&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>source .venv/bin/activate
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># 4. íŒ¨í‚¤ì§€ ì„¤ì¹˜&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>pip install mlflow scikit-learn pandas fastapi uvicorn
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># 5. ë‚˜ê°ˆ ë•Œ&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>deactivate
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="-mlflow-ì„œë²„-ì‹¤í–‰">ğŸ”§ MLflow ì„œë²„ ì‹¤í–‰&lt;/h3>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>mlflow ui --port &lt;span style="color:#ae81ff">5000&lt;/span> &lt;span style="color:#75715e"># http://localhost:5000 ì—ì„œ UI í™•ì¸&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;hr>
&lt;h2 id="-2ë‹¨ê³„-ì‹¤í—˜-ì‹¤í–‰-trainpy">ğŸ§ª [2ë‹¨ê³„] ì‹¤í—˜ ì‹¤í–‰ (train.py)&lt;/h2>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-python" data-lang="python">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># app/train.py&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">import&lt;/span> mlflow
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">import&lt;/span> mlflow.sklearn
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">from&lt;/span> sklearn.ensemble &lt;span style="color:#f92672">import&lt;/span> RandomForestClassifier
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">from&lt;/span> sklearn.datasets &lt;span style="color:#f92672">import&lt;/span> load_iris
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">from&lt;/span> sklearn.model_selection &lt;span style="color:#f92672">import&lt;/span> train_test_split
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># MLflow ì„¤ì •&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>mlflow&lt;span style="color:#f92672">.&lt;/span>set_tracking_uri(&lt;span style="color:#e6db74">&amp;#34;http://localhost:5000&amp;#34;&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>mlflow&lt;span style="color:#f92672">.&lt;/span>set_experiment(&lt;span style="color:#e6db74">&amp;#34;iris-rf-exp&amp;#34;&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">with&lt;/span> mlflow&lt;span style="color:#f92672">.&lt;/span>start_run():
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> iris &lt;span style="color:#f92672">=&lt;/span> load_iris()
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> X_train, X_test, y_train, y_test &lt;span style="color:#f92672">=&lt;/span> train_test_split(iris&lt;span style="color:#f92672">.&lt;/span>data, iris&lt;span style="color:#f92672">.&lt;/span>target, test_size&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#ae81ff">0.2&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> clf &lt;span style="color:#f92672">=&lt;/span> RandomForestClassifier(n_estimators&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#ae81ff">100&lt;/span>, max_depth&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#ae81ff">3&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> clf&lt;span style="color:#f92672">.&lt;/span>fit(X_train, y_train)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> acc &lt;span style="color:#f92672">=&lt;/span> clf&lt;span style="color:#f92672">.&lt;/span>score(X_test, y_test)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> mlflow&lt;span style="color:#f92672">.&lt;/span>log_param(&lt;span style="color:#e6db74">&amp;#34;n_estimators&amp;#34;&lt;/span>, &lt;span style="color:#ae81ff">100&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> mlflow&lt;span style="color:#f92672">.&lt;/span>log_param(&lt;span style="color:#e6db74">&amp;#34;max_depth&amp;#34;&lt;/span>, &lt;span style="color:#ae81ff">3&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> mlflow&lt;span style="color:#f92672">.&lt;/span>log_metric(&lt;span style="color:#e6db74">&amp;#34;accuracy&amp;#34;&lt;/span>, acc)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> mlflow&lt;span style="color:#f92672">.&lt;/span>sklearn&lt;span style="color:#f92672">.&lt;/span>log_model(clf, &lt;span style="color:#e6db74">&amp;#34;model&amp;#34;&lt;/span>)
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># ì‹¤í—˜ ì‹¤í–‰&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>python app/train.py
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;blockquote>
&lt;p>ğŸ“Œ ì‹¤í—˜ì´ ëë‚˜ë©´ mlruns/ í´ë”ì— ì‹¤í—˜ ê¸°ë¡ ë° ëª¨ë¸ì´ ì €ì¥ë¼!&lt;/p></description></item></channel></rss>