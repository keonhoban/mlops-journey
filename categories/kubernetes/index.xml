<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:content="http://purl.org/rss/1.0/modules/content/"><channel><title>Kubernetes on ğŸ”ï¸ MLOps Journey</title><link>https://keonhoban.github.io/mlops-journey/categories/kubernetes/</link><description>Recent content in Kubernetes on ğŸ”ï¸ MLOps Journey</description><generator>Hugo -- 0.145.0</generator><language>ko</language><lastBuildDate>Tue, 15 Jul 2025 17:55:05 +0900</lastBuildDate><atom:link href="https://keonhoban.github.io/mlops-journey/categories/kubernetes/index.xml" rel="self" type="application/rss+xml"/><item><title>[MLOps í”Œë«í¼ êµ¬ì¶• : Airflow-MLflow-FastAPI (Helm)]</title><link>https://keonhoban.github.io/mlops-journey/projects/mlops_pipeline/helm/</link><pubDate>Tue, 15 Jul 2025 17:55:05 +0900</pubDate><guid>https://keonhoban.github.io/mlops-journey/projects/mlops_pipeline/helm/</guid><description>&lt;h2 id="-ì‹¤ì „-ì‹œë‚˜ë¦¬ì˜¤-ê¸°ë°˜-êµ¬ì„±-ë°°ê²½">ğŸ§© ì‹¤ì „ ì‹œë‚˜ë¦¬ì˜¤ ê¸°ë°˜ êµ¬ì„± ë°°ê²½&lt;/h2>
&lt;blockquote>
&lt;p>ì´ í”„ë¡œì íŠ¸ëŠ” ë‹¨ìˆœ ì‹¤ìŠµì„ ë„˜ì–´ì„œ, ì‹¤ì œ ë°œìƒí•˜ëŠ” ë‹¤ìŒê³¼ ê°™ì€ ë¬¸ì œë“¤ì„ í•´ê²°í•˜ê¸° ìœ„í•œ MLOps ì¸í”„ë¼ êµ¬ì¶•ì„ ëª©í‘œë¡œ ì„¤ê³„ë˜ì—ˆìŠµë‹ˆë‹¤.&lt;/p>&lt;/blockquote>
&lt;ul>
&lt;li>
&lt;p>&lt;strong>ì—¬ëŸ¬ ëª¨ë¸ ì‹¤í—˜ ê²°ê³¼ê°€ ë’¤ì„ì—¬ ì¶”ì ì´ ì–´ë ¤ìš´ ë¬¸ì œ&lt;/strong>&lt;br>
â†’ MLflow Tracking ì„œë²„ + PostgreSQL ë©”íƒ€ë°ì´í„° ì €ì¥ì†Œ êµ¬ì„±&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;strong>ëª¨ë¸ íŒŒì¼ ë° ë¡œê·¸ê°€ ë¡œì»¬ì—ë§Œ ì €ì¥ë˜ì–´ í˜‘ì—… ë° ì¬í˜„ì„±ì´ ë–¨ì–´ì§€ëŠ” ë¬¸ì œ&lt;/strong>&lt;br>
â†’ S3 ê¸°ë°˜ artifact store êµ¬ì„± + pyfunc ê¸°ë°˜ ëª¨ë¸ ì„œë¹™ êµ¬ì¡° ì„¤ê³„&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;strong>ìˆ˜ì‘ì—… DAG ë“±ë¡, ëª¨ë¸ ë°°í¬ ë“±ì˜ ë¹„íš¨ìœ¨ì  ìš´ì˜ ë¬¸ì œ&lt;/strong>&lt;br>
â†’ Airflow + GitSync ì—°ë™ìœ¼ë¡œ íŒŒì´í”„ë¼ì¸ ìë™í™” ë° ë²„ì „ ê´€ë¦¬ ê°€ëŠ¥&lt;/p></description></item><item><title>[MLOps í”Œë«í¼ êµ¬ì¶• - 6ë‹¨ê³„: ì‹¤ì‹œê°„ ëª¨ë¸ í•«ìŠ¤ì™‘ êµ¬ì¡° ì‹¤í—˜]</title><link>https://keonhoban.github.io/mlops-journey/posts/mlops-pipeline-helm/06/</link><pubDate>Thu, 10 Jul 2025 17:12:00 +0900</pubDate><guid>https://keonhoban.github.io/mlops-journey/posts/mlops-pipeline-helm/06/</guid><description>&lt;h2 id="-ì‹œë‚˜ë¦¬ì˜¤-ì„¤ëª…">ğŸ§  ì‹œë‚˜ë¦¬ì˜¤ ì„¤ëª…&lt;/h2>
&lt;blockquote>
&lt;p>ë¨¸ì‹ ëŸ¬ë‹ ëª¨ë¸ì„ ì‹¤ì„œë¹„ìŠ¤ì— ë°°í¬í•  ë•Œ,
ê¸°ì¡´ ëª¨ë¸ì„ ìƒˆ ëª¨ë¸ë¡œ ì•ˆì „í•˜ê²Œ êµì²´(hot-swap)í•˜ëŠ” ìë™í™” êµ¬ì¡°ëŠ”
ë§¤ìš° ì¤‘ìš”í•œ ìš”êµ¬ì‚¬í•­ì…ë‹ˆë‹¤.&lt;/p>&lt;/blockquote>
&lt;hr>
&lt;h2 id="-tldr">âœ… TL;DR&lt;/h2>
&lt;ul>
&lt;li>&lt;code>Airflow&lt;/code>ì—ì„œ í•™ìŠµ ìŠ¤í¬ë¦½íŠ¸ë¥¼ ì‹¤í–‰í•˜ê³  ì¡°ê±´ë¶€ë¡œ ëª¨ë¸ ë“±ë¡&lt;/li>
&lt;li>ì„±ëŠ¥ ê¸°ì¤€ì„ ì¶©ì¡±í•œ ëª¨ë¸ì€ &lt;code>Staging&lt;/code>ìœ¼ë¡œ ìë™ ìŠ¹ê²©&lt;/li>
&lt;li>&lt;code>FastAPI&lt;/code>ëŠ” &lt;code>/reload&lt;/code> ìš”ì²­ ì‹œ &lt;code>Staging ëª¨ë¸&lt;/code>ì„ ë‹¤ì‹œ ë¡œë”© â†’ ì½”ë“œ ìˆ˜ì • ì—†ì´ í•«ìŠ¤ì™‘&lt;/li>
&lt;li>&lt;strong>ìš´ì˜ í™˜ê²½ì—ì„œì˜ ì‹¤í—˜ ìë™í™”, ëª¨ë¸ A/B í…ŒìŠ¤íŠ¸, ëª¨ë¸ ë¡¤ë°±&lt;/strong> ë“±ì— í™•ì¥ ê°€ëŠ¥í•˜ë„ë¡ ì„¤ê³„&lt;/li>
&lt;/ul>
&lt;hr>
&lt;h2 id="-êµ¬ì¡°-ë‹¤ì´ì–´ê·¸ë¨-í•«ìŠ¤ì™‘-íë¦„">ğŸ§  êµ¬ì¡° ë‹¤ì´ì–´ê·¸ë¨ (í•«ìŠ¤ì™‘ íë¦„)&lt;/h2>
&lt;p>&lt;img alt="06" loading="lazy" src="https://keonhoban.github.io/mlops-journey/images/06.png">&lt;/p>
&lt;hr>
&lt;h2 id="-í•µì‹¬-êµ¬ì„±-ìš”ì†Œ">ğŸ§© í•µì‹¬ êµ¬ì„± ìš”ì†Œ&lt;/h2>
&lt;h3 id="1-airflow-dag---ì¡°ê±´ë¶€-ëª¨ë¸-ë“±ë¡">1. Airflow DAG - ì¡°ê±´ë¶€ ëª¨ë¸ ë“±ë¡&lt;/h3>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-python" data-lang="python">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># dags/dag_ml_experiment.py&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">from&lt;/span> airflow &lt;span style="color:#f92672">import&lt;/span> DAG
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">from&lt;/span> airflow.operators.python &lt;span style="color:#f92672">import&lt;/span> PythonOperator, BranchPythonOperator
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">from&lt;/span> airflow.operators.empty &lt;span style="color:#f92672">import&lt;/span> EmptyOperator
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">from&lt;/span> airflow.models &lt;span style="color:#f92672">import&lt;/span> Variable
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">from&lt;/span> datetime &lt;span style="color:#f92672">import&lt;/span> datetime, timedelta, timezone
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">import&lt;/span> sys
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>sys&lt;span style="color:#f92672">.&lt;/span>path&lt;span style="color:#f92672">.&lt;/span>append(&lt;span style="color:#e6db74">&amp;#39;/opt/airflow/dags/repo/ml_code&amp;#39;&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">from&lt;/span> train_and_log_model_fastapi &lt;span style="color:#f92672">import&lt;/span> train_model
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>default_args &lt;span style="color:#f92672">=&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#e6db74">&amp;#39;start_date&amp;#39;&lt;/span>: datetime&lt;span style="color:#f92672">.&lt;/span>now(timezone&lt;span style="color:#f92672">.&lt;/span>utc) &lt;span style="color:#f92672">-&lt;/span> timedelta(days&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#ae81ff">1&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">def&lt;/span> &lt;span style="color:#a6e22e">run_and_check&lt;/span>():
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#75715e"># Variableë¡œ íŒŒë¼ë¯¸í„° ë™ì  ì œì–´&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">try&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> C &lt;span style="color:#f92672">=&lt;/span> float(Variable&lt;span style="color:#f92672">.&lt;/span>get(&lt;span style="color:#e6db74">&amp;#34;logreg_C&amp;#34;&lt;/span>, default_var&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#ae81ff">1.0&lt;/span>))
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> max_iter &lt;span style="color:#f92672">=&lt;/span> int(Variable&lt;span style="color:#f92672">.&lt;/span>get(&lt;span style="color:#e6db74">&amp;#34;logreg_max_iter&amp;#34;&lt;/span>, default_var&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#ae81ff">200&lt;/span>))
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">except&lt;/span> &lt;span style="color:#a6e22e">Exception&lt;/span> &lt;span style="color:#66d9ef">as&lt;/span> e:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> print(&lt;span style="color:#e6db74">f&lt;/span>&lt;span style="color:#e6db74">&amp;#34;[ERROR] íŒŒë¼ë¯¸í„° ë¶ˆëŸ¬ì˜¤ê¸° ì‹¤íŒ¨: &lt;/span>&lt;span style="color:#e6db74">{&lt;/span>str(e)&lt;span style="color:#e6db74">}&lt;/span>&lt;span style="color:#e6db74">. ê¸°ë³¸ê°’ ì‚¬ìš©.&amp;#34;&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> C, max_iter &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#ae81ff">1.0&lt;/span>, &lt;span style="color:#ae81ff">200&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#75715e"># ì •í™•ë„ ê¸°ì¤€ìœ¼ë¡œ ì„±ê³µ/ì‹¤íŒ¨ ë¶„ê¸°&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> acc &lt;span style="color:#f92672">=&lt;/span> train_model(C&lt;span style="color:#f92672">=&lt;/span>C, max_iter&lt;span style="color:#f92672">=&lt;/span>max_iter)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">if&lt;/span> acc &lt;span style="color:#f92672">&amp;gt;&lt;/span> &lt;span style="color:#ae81ff">0.9&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">return&lt;/span> &lt;span style="color:#e6db74">&amp;#39;notify_success&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">else&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">return&lt;/span> &lt;span style="color:#e6db74">&amp;#39;notify_failure&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">def&lt;/span> &lt;span style="color:#a6e22e">notify_success&lt;/span>():
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> print(&lt;span style="color:#e6db74">&amp;#34;ğŸ‰ ëª¨ë¸ ë“±ë¡ ë° í•«ìŠ¤ì™‘ ì„±ê³µ! FastAPIì— ìµœì‹  ëª¨ë¸ ë°˜ì˜ ì™„ë£Œ.&amp;#34;&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">def&lt;/span> &lt;span style="color:#a6e22e">notify_failure&lt;/span>():
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> print(&lt;span style="color:#e6db74">&amp;#34;âŒ ì„±ëŠ¥ ê¸°ì¤€ ë¯¸ë‹¬. ëª¨ë¸ ë“±ë¡/ì„œë¹™ ìƒëµë¨.&amp;#34;&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">with&lt;/span> DAG(
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> dag_id&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">&amp;#34;mlflow_experiment_conditional_register_runner_fastapi&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> default_args&lt;span style="color:#f92672">=&lt;/span>default_args,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> schedule&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#66d9ef">None&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> catchup&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#66d9ef">False&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>) &lt;span style="color:#66d9ef">as&lt;/span> dag:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> branch_task &lt;span style="color:#f92672">=&lt;/span> BranchPythonOperator(
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> task_id&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">&amp;#39;branch_by_accuracy&amp;#39;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> python_callable&lt;span style="color:#f92672">=&lt;/span>run_and_check
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> )
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> success_notify_task &lt;span style="color:#f92672">=&lt;/span> PythonOperator(
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> task_id&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">&amp;#39;notify_success&amp;#39;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> python_callable&lt;span style="color:#f92672">=&lt;/span>notify_success
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> )
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> failure_notify_task &lt;span style="color:#f92672">=&lt;/span> PythonOperator(
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> task_id&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">&amp;#39;notify_failure&amp;#39;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> python_callable&lt;span style="color:#f92672">=&lt;/span>notify_failure
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> )
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> branch_task &lt;span style="color:#f92672">&amp;gt;&amp;gt;&lt;/span> [success_notify_task, failure_notify_task]
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;hr>
&lt;h3 id="2-ëª¨ë¸-í•™ìŠµ-ë°-ë“±ë¡">2. ëª¨ë¸ í•™ìŠµ ë° ë“±ë¡&lt;/h3>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-python" data-lang="python">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># ml_code/train_and_log_model_fastapi.py&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">import&lt;/span> mlflow
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">import&lt;/span> mlflow.sklearn
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">from&lt;/span> mlflow.tracking &lt;span style="color:#f92672">import&lt;/span> MlflowClient
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">from&lt;/span> sklearn.datasets &lt;span style="color:#f92672">import&lt;/span> load_iris
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">from&lt;/span> sklearn.linear_model &lt;span style="color:#f92672">import&lt;/span> LogisticRegression
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">from&lt;/span> sklearn.model_selection &lt;span style="color:#f92672">import&lt;/span> train_test_split
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">from&lt;/span> sklearn.metrics &lt;span style="color:#f92672">import&lt;/span> accuracy_score
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">import&lt;/span> sys
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">import&lt;/span> requests
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">import&lt;/span> time
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>mlflow&lt;span style="color:#f92672">.&lt;/span>set_tracking_uri(&lt;span style="color:#e6db74">&amp;#34;http://mlflow-service.mlflow.svc.cluster.local:5000&amp;#34;&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>mlflow&lt;span style="color:#f92672">.&lt;/span>set_experiment(&lt;span style="color:#e6db74">&amp;#34;train_and_register_model_exp&amp;#34;&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">def&lt;/span> &lt;span style="color:#a6e22e">train_model&lt;/span>(C, max_iter):
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> X, y &lt;span style="color:#f92672">=&lt;/span> load_iris(return_X_y&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#66d9ef">True&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> X_train, X_test, y_train, y_test &lt;span style="color:#f92672">=&lt;/span> train_test_split(X, y, test_size&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#ae81ff">0.2&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">with&lt;/span> mlflow&lt;span style="color:#f92672">.&lt;/span>start_run() &lt;span style="color:#66d9ef">as&lt;/span> run:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> clf &lt;span style="color:#f92672">=&lt;/span> LogisticRegression(C&lt;span style="color:#f92672">=&lt;/span>C, max_iter&lt;span style="color:#f92672">=&lt;/span>max_iter)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> clf&lt;span style="color:#f92672">.&lt;/span>fit(X_train, y_train)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> y_pred &lt;span style="color:#f92672">=&lt;/span> clf&lt;span style="color:#f92672">.&lt;/span>predict(X_test)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> acc &lt;span style="color:#f92672">=&lt;/span> accuracy_score(y_test, y_pred)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> mlflow&lt;span style="color:#f92672">.&lt;/span>log_param(&lt;span style="color:#e6db74">&amp;#34;C&amp;#34;&lt;/span>, C)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> mlflow&lt;span style="color:#f92672">.&lt;/span>log_param(&lt;span style="color:#e6db74">&amp;#34;max_iter&amp;#34;&lt;/span>, max_iter)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> mlflow&lt;span style="color:#f92672">.&lt;/span>log_metric(&lt;span style="color:#e6db74">&amp;#34;accuracy&amp;#34;&lt;/span>, acc)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> mlflow&lt;span style="color:#f92672">.&lt;/span>sklearn&lt;span style="color:#f92672">.&lt;/span>log_model(clf, &lt;span style="color:#e6db74">&amp;#34;model&amp;#34;&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> print(&lt;span style="color:#e6db74">f&lt;/span>&lt;span style="color:#e6db74">&amp;#34;[INFO] Logged model with accuracy=&lt;/span>&lt;span style="color:#e6db74">{&lt;/span>acc&lt;span style="color:#e6db74">}&lt;/span>&lt;span style="color:#e6db74">&amp;#34;&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">if&lt;/span> acc &lt;span style="color:#f92672">&amp;gt;&lt;/span> &lt;span style="color:#ae81ff">0.9&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#75715e"># ëª¨ë¸ ë“±ë¡&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> result &lt;span style="color:#f92672">=&lt;/span> mlflow&lt;span style="color:#f92672">.&lt;/span>register_model(
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> model_uri&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">f&lt;/span>&lt;span style="color:#e6db74">&amp;#34;runs:/&lt;/span>&lt;span style="color:#e6db74">{&lt;/span>run&lt;span style="color:#f92672">.&lt;/span>info&lt;span style="color:#f92672">.&lt;/span>run_id&lt;span style="color:#e6db74">}&lt;/span>&lt;span style="color:#e6db74">/model&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> name&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">&amp;#34;best_model&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> )
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> version &lt;span style="color:#f92672">=&lt;/span> result&lt;span style="color:#f92672">.&lt;/span>version
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> print(&lt;span style="color:#e6db74">f&lt;/span>&lt;span style="color:#e6db74">&amp;#34;[INFO] âœ… ëª¨ë¸ ë“±ë¡ ì™„ë£Œ (version=&lt;/span>&lt;span style="color:#e6db74">{&lt;/span>version&lt;span style="color:#e6db74">}&lt;/span>&lt;span style="color:#e6db74">)&amp;#34;&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#75715e"># ë“±ë¡ ì§í›„ DB ì—…ë°ì´íŠ¸ ì‹œê°„ í•„ìš”&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> time&lt;span style="color:#f92672">.&lt;/span>sleep(&lt;span style="color:#ae81ff">3&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#75715e"># ìŠ¤í…Œì´ì§€ ìŠ¹ê²© + ê¸°ì¡´ ë²„ì „ Archive&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> client &lt;span style="color:#f92672">=&lt;/span> MlflowClient()
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> client&lt;span style="color:#f92672">.&lt;/span>transition_model_version_stage(
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> name&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">&amp;#34;best_model&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> version&lt;span style="color:#f92672">=&lt;/span>version,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> stage&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">&amp;#34;Staging&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> archive_existing_versions&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#66d9ef">False&lt;/span> &lt;span style="color:#75715e"># ìŠ¤í…Œì´ì§•ì€ ì—¬ëŸ¬ ê°œ ê°€ëŠ¥&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> )
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> print(&lt;span style="color:#e6db74">f&lt;/span>&lt;span style="color:#e6db74">&amp;#34;[INFO] ğŸš€ ëª¨ë¸ version &lt;/span>&lt;span style="color:#e6db74">{&lt;/span>version&lt;span style="color:#e6db74">}&lt;/span>&lt;span style="color:#e6db74"> â†’ Staging ë°˜ì˜ ì™„ë£Œ&amp;#34;&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#75715e"># FastAPI í•«ìŠ¤ì™‘ ìš”ì²­ (reload í˜¸ì¶œ)&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">try&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> response &lt;span style="color:#f92672">=&lt;/span> requests&lt;span style="color:#f92672">.&lt;/span>post(&lt;span style="color:#e6db74">&amp;#34;http://fastapi.local/reload&amp;#34;&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> print(&lt;span style="color:#e6db74">f&lt;/span>&lt;span style="color:#e6db74">&amp;#34;[INFO] ğŸ” FastAPI ëª¨ë¸ ë¦¬ë¡œë“œ ìš”ì²­ ê²°ê³¼: &lt;/span>&lt;span style="color:#e6db74">{&lt;/span>response&lt;span style="color:#f92672">.&lt;/span>status_code&lt;span style="color:#e6db74">}&lt;/span>&lt;span style="color:#e6db74"> &lt;/span>&lt;span style="color:#e6db74">{&lt;/span>response&lt;span style="color:#f92672">.&lt;/span>text&lt;span style="color:#e6db74">}&lt;/span>&lt;span style="color:#e6db74">&amp;#34;&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">except&lt;/span> &lt;span style="color:#a6e22e">Exception&lt;/span> &lt;span style="color:#66d9ef">as&lt;/span> e:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> print(&lt;span style="color:#e6db74">f&lt;/span>&lt;span style="color:#e6db74">&amp;#34;[ERROR] âŒ FastAPI ë¦¬ë¡œë“œ ìš”ì²­ ì‹¤íŒ¨: &lt;/span>&lt;span style="color:#e6db74">{&lt;/span>str(e)&lt;span style="color:#e6db74">}&lt;/span>&lt;span style="color:#e6db74">&amp;#34;&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">else&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> print(&lt;span style="color:#e6db74">&amp;#34;[WARN] âŒ ì„±ëŠ¥ ê¸°ì¤€ ë¯¸ë‹¬ (accuracy &amp;lt;= 0.9)&amp;#34;&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#75715e"># ëª¨ë¸ ë²„ì „ ì¶œë ¥ (ì „í›„ ë¹„êµ ê°€ëŠ¥)&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> client &lt;span style="color:#f92672">=&lt;/span> MlflowClient()
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> versions &lt;span style="color:#f92672">=&lt;/span> client&lt;span style="color:#f92672">.&lt;/span>get_latest_versions(&lt;span style="color:#e6db74">&amp;#34;best_model&amp;#34;&lt;/span>, stages&lt;span style="color:#f92672">=&lt;/span>[&lt;span style="color:#e6db74">&amp;#34;None&amp;#34;&lt;/span>, &lt;span style="color:#e6db74">&amp;#34;Staging&amp;#34;&lt;/span>, &lt;span style="color:#e6db74">&amp;#34;Production&amp;#34;&lt;/span>])
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">for&lt;/span> v &lt;span style="color:#f92672">in&lt;/span> versions:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> print(&lt;span style="color:#e6db74">f&lt;/span>&lt;span style="color:#e6db74">&amp;#34;[INFO] ğŸ”„ ëª¨ë¸ Version=&lt;/span>&lt;span style="color:#e6db74">{&lt;/span>v&lt;span style="color:#f92672">.&lt;/span>version&lt;span style="color:#e6db74">}&lt;/span>&lt;span style="color:#e6db74">, Stage=&lt;/span>&lt;span style="color:#e6db74">{&lt;/span>v&lt;span style="color:#f92672">.&lt;/span>current_stage&lt;span style="color:#e6db74">}&lt;/span>&lt;span style="color:#e6db74">&amp;#34;&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">return&lt;/span> acc
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">if&lt;/span> __name__ &lt;span style="color:#f92672">==&lt;/span> &lt;span style="color:#e6db74">&amp;#34;__main__&amp;#34;&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> acc &lt;span style="color:#f92672">=&lt;/span> train_model(float(sys&lt;span style="color:#f92672">.&lt;/span>argv[&lt;span style="color:#ae81ff">1&lt;/span>]), int(sys&lt;span style="color:#f92672">.&lt;/span>argv[&lt;span style="color:#ae81ff">2&lt;/span>]))
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;hr>
&lt;h3 id="3-fastapi-ëª¨ë¸-ì¬ë¡œë”©-êµ¬ì¡°">3. FastAPI ëª¨ë¸ ì¬ë¡œë”© êµ¬ì¡°&lt;/h3>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-python" data-lang="python">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># FastAPI app/main.py&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">from&lt;/span> fastapi &lt;span style="color:#f92672">import&lt;/span> FastAPI, Request
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">import&lt;/span> mlflow.pyfunc
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">import&lt;/span> mlflow
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">from&lt;/span> mlflow.tracking &lt;span style="color:#f92672">import&lt;/span> MlflowClient
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">import&lt;/span> os
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>app &lt;span style="color:#f92672">=&lt;/span> FastAPI()
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>model &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#66d9ef">None&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>model_info &lt;span style="color:#f92672">=&lt;/span> {}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">def&lt;/span> &lt;span style="color:#a6e22e">load_model_from_mlflow&lt;/span>():
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">global&lt;/span> model, model_info
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> tracking_uri &lt;span style="color:#f92672">=&lt;/span> os&lt;span style="color:#f92672">.&lt;/span>environ&lt;span style="color:#f92672">.&lt;/span>get(&lt;span style="color:#e6db74">&amp;#34;MLFLOW_TRACKING_URI&amp;#34;&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> model_name &lt;span style="color:#f92672">=&lt;/span> os&lt;span style="color:#f92672">.&lt;/span>environ&lt;span style="color:#f92672">.&lt;/span>get(&lt;span style="color:#e6db74">&amp;#34;MODEL_NAME&amp;#34;&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> model_stage &lt;span style="color:#f92672">=&lt;/span> os&lt;span style="color:#f92672">.&lt;/span>environ&lt;span style="color:#f92672">.&lt;/span>get(&lt;span style="color:#e6db74">&amp;#34;MODEL_STAGE&amp;#34;&lt;/span>, &lt;span style="color:#e6db74">&amp;#34;Staging&amp;#34;&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> mlflow&lt;span style="color:#f92672">.&lt;/span>set_tracking_uri(tracking_uri)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> model_uri &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#e6db74">f&lt;/span>&lt;span style="color:#e6db74">&amp;#34;models:/&lt;/span>&lt;span style="color:#e6db74">{&lt;/span>model_name&lt;span style="color:#e6db74">}&lt;/span>&lt;span style="color:#e6db74">/&lt;/span>&lt;span style="color:#e6db74">{&lt;/span>model_stage&lt;span style="color:#e6db74">}&lt;/span>&lt;span style="color:#e6db74">&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> model &lt;span style="color:#f92672">=&lt;/span> mlflow&lt;span style="color:#f92672">.&lt;/span>pyfunc&lt;span style="color:#f92672">.&lt;/span>load_model(model_uri)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> client &lt;span style="color:#f92672">=&lt;/span> MlflowClient()
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> latest &lt;span style="color:#f92672">=&lt;/span> client&lt;span style="color:#f92672">.&lt;/span>get_latest_versions(name&lt;span style="color:#f92672">=&lt;/span>model_name, stages&lt;span style="color:#f92672">=&lt;/span>[model_stage])[&lt;span style="color:#ae81ff">0&lt;/span>]
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> run_id &lt;span style="color:#f92672">=&lt;/span> latest&lt;span style="color:#f92672">.&lt;/span>run_id
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> version &lt;span style="color:#f92672">=&lt;/span> latest&lt;span style="color:#f92672">.&lt;/span>version
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> print(&lt;span style="color:#e6db74">f&lt;/span>&lt;span style="color:#e6db74">&amp;#34;âœ… Reloaded model: name=&lt;/span>&lt;span style="color:#e6db74">{&lt;/span>model_name&lt;span style="color:#e6db74">}&lt;/span>&lt;span style="color:#e6db74">, stage=&lt;/span>&lt;span style="color:#e6db74">{&lt;/span>model_stage&lt;span style="color:#e6db74">}&lt;/span>&lt;span style="color:#e6db74">, version=&lt;/span>&lt;span style="color:#e6db74">{&lt;/span>version&lt;span style="color:#e6db74">}&lt;/span>&lt;span style="color:#e6db74">, run_id=&lt;/span>&lt;span style="color:#e6db74">{&lt;/span>run_id&lt;span style="color:#e6db74">}&lt;/span>&lt;span style="color:#e6db74">&amp;#34;&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> model_info &lt;span style="color:#f92672">=&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#e6db74">&amp;#34;model_name&amp;#34;&lt;/span>: model_name,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#e6db74">&amp;#34;stage&amp;#34;&lt;/span>: model_stage,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#e6db74">&amp;#34;version&amp;#34;&lt;/span>: version,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#e6db74">&amp;#34;run_id&amp;#34;&lt;/span>: run_id,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#e6db74">&amp;#34;model_uri&amp;#34;&lt;/span>: model_uri,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#a6e22e">@app.on_event&lt;/span>(&lt;span style="color:#e6db74">&amp;#34;startup&amp;#34;&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">def&lt;/span> &lt;span style="color:#a6e22e">startup_event&lt;/span>():
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> load_model_from_mlflow()
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#a6e22e">@app.get&lt;/span>(&lt;span style="color:#e6db74">&amp;#34;/&amp;#34;&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">def&lt;/span> &lt;span style="color:#a6e22e">root&lt;/span>():
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">return&lt;/span> {&lt;span style="color:#e6db74">&amp;#34;message&amp;#34;&lt;/span>: &lt;span style="color:#e6db74">&amp;#34;FastAPI MLOps is running!&amp;#34;&lt;/span>}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># í˜„ì¬ ëª¨ë¸ í™•ì¸ ê°€ëŠ¥&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#a6e22e">@app.get&lt;/span>(&lt;span style="color:#e6db74">&amp;#34;/model-info&amp;#34;&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">def&lt;/span> &lt;span style="color:#a6e22e">get_model_info&lt;/span>():
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">return&lt;/span> model_info
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#a6e22e">@app.post&lt;/span>(&lt;span style="color:#e6db74">&amp;#34;/predict&amp;#34;&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">async&lt;/span> &lt;span style="color:#66d9ef">def&lt;/span> &lt;span style="color:#a6e22e">predict&lt;/span>(request: Request):
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> input_data &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#66d9ef">await&lt;/span> request&lt;span style="color:#f92672">.&lt;/span>json()
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> prediction &lt;span style="color:#f92672">=&lt;/span> model&lt;span style="color:#f92672">.&lt;/span>predict(input_data)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">return&lt;/span> {&lt;span style="color:#e6db74">&amp;#34;prediction&amp;#34;&lt;/span>: prediction&lt;span style="color:#f92672">.&lt;/span>tolist()}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># Staging ëª¨ë¸ ë‹¤ì‹œ ë¡œë“œ&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#a6e22e">@app.post&lt;/span>(&lt;span style="color:#e6db74">&amp;#34;/reload&amp;#34;&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">def&lt;/span> &lt;span style="color:#a6e22e">reload_model&lt;/span>():
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">try&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> load_model_from_mlflow()
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">return&lt;/span> {&lt;span style="color:#e6db74">&amp;#34;status&amp;#34;&lt;/span>: &lt;span style="color:#e6db74">&amp;#34;success&amp;#34;&lt;/span>, &lt;span style="color:#e6db74">&amp;#34;message&amp;#34;&lt;/span>: &lt;span style="color:#e6db74">&amp;#34;ğŸ” Model reloaded successfully.&amp;#34;&lt;/span>}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">except&lt;/span> &lt;span style="color:#a6e22e">Exception&lt;/span> &lt;span style="color:#66d9ef">as&lt;/span> e:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">return&lt;/span> {&lt;span style="color:#e6db74">&amp;#34;status&amp;#34;&lt;/span>: &lt;span style="color:#e6db74">&amp;#34;error&amp;#34;&lt;/span>, &lt;span style="color:#e6db74">&amp;#34;message&amp;#34;&lt;/span>: &lt;span style="color:#e6db74">f&lt;/span>&lt;span style="color:#e6db74">&amp;#34;Reload failed: &lt;/span>&lt;span style="color:#e6db74">{&lt;/span>str(e)&lt;span style="color:#e6db74">}&lt;/span>&lt;span style="color:#e6db74">&amp;#34;&lt;/span>}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;hr>
&lt;h2 id="-í…ŒìŠ¤íŠ¸-ê²°ê³¼-ìš”ì•½">âœ… í…ŒìŠ¤íŠ¸ ê²°ê³¼ ìš”ì•½&lt;/h2>
&lt;ul>
&lt;li>&lt;code>logreg_C&lt;/code>, &lt;code>logreg_max_iter&lt;/code> íŒŒë¼ë¯¸í„°ë¡œ í•™ìŠµ DAG ì„¤ì • ê°€ëŠ¥&lt;/li>
&lt;li>ëª¨ë¸ ë“±ë¡ ì‹œ &lt;code>Staging&lt;/code>ìœ¼ë¡œ ìë™ ìŠ¹ê²©&lt;/li>
&lt;li>FastAPI ì„œë²„ì— &lt;code>/reload&lt;/code> í˜¸ì¶œ ì‹œ í•«ìŠ¤ì™‘ ì ìš©ë¨&lt;/li>
&lt;li>&lt;code>/model-info&lt;/code>, &lt;code>/predict&lt;/code>ì—ì„œ ìƒˆë¡œìš´ ëª¨ë¸ ì •ë³´ ë° ì˜ˆì¸¡ ê²°ê³¼ í™•ì¸ ì™„ë£Œ&lt;/li>
&lt;/ul>
&lt;hr>
&lt;h2 id="-í…ŒìŠ¤íŠ¸-ê²€ì¦-ëª¨ë¸-ë“±ë¡--í•«ìŠ¤ì™‘-í™•ì¸">ğŸ“ í…ŒìŠ¤íŠ¸ ê²€ì¦ (ëª¨ë¸ ë“±ë¡ + í•«ìŠ¤ì™‘ í™•ì¸)&lt;/h2>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># ê¸°ì¡´ ëª¨ë¸ ë²„ì „ í™•ì¸&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>curl http://fastapi.local/model-info | jq
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> % Total % Received % Xferd Average Speed Time Time Time Current
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Dload Upload Total Spent Left Speed
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">100&lt;/span> &lt;span style="color:#ae81ff">144&lt;/span> &lt;span style="color:#ae81ff">100&lt;/span> &lt;span style="color:#ae81ff">144&lt;/span> &lt;span style="color:#ae81ff">0&lt;/span> &lt;span style="color:#ae81ff">0&lt;/span> &lt;span style="color:#ae81ff">19251&lt;/span> &lt;span style="color:#ae81ff">0&lt;/span> --:--:-- --:--:-- --:--:-- &lt;span style="color:#ae81ff">20571&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#e6db74">&amp;#34;model_name&amp;#34;&lt;/span>: &lt;span style="color:#e6db74">&amp;#34;best_model&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#e6db74">&amp;#34;stage&amp;#34;&lt;/span>: &lt;span style="color:#e6db74">&amp;#34;Staging&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#e6db74">&amp;#34;version&amp;#34;&lt;/span>: &lt;span style="color:#e6db74">&amp;#34;1&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#e6db74">&amp;#34;run_id&amp;#34;&lt;/span>: &lt;span style="color:#e6db74">&amp;#34;8bd09505eabf40648337e811110ab22c&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#e6db74">&amp;#34;model_uri&amp;#34;&lt;/span>: &lt;span style="color:#e6db74">&amp;#34;models:/best_model/Staging&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># ì˜ˆì¸¡ ê²°ê³¼ í™•ì¸&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>curl -X POST http://fastapi.local/predict &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span> -H &lt;span style="color:#e6db74">&amp;#34;Content-Type: application/json&amp;#34;&lt;/span> &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span> -d &lt;span style="color:#e6db74">&amp;#39;[ [5.1, 3.5, 1.4, 0.2] ]&amp;#39;&lt;/span> | jq
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> % Total % Received % Xferd Average Speed Time Time Time Current
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Dload Upload Total Spent Left Speed
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">100&lt;/span> &lt;span style="color:#ae81ff">42&lt;/span> &lt;span style="color:#ae81ff">100&lt;/span> &lt;span style="color:#ae81ff">18&lt;/span> &lt;span style="color:#ae81ff">100&lt;/span> &lt;span style="color:#ae81ff">24&lt;/span> &lt;span style="color:#ae81ff">311&lt;/span> &lt;span style="color:#ae81ff">415&lt;/span> --:--:-- --:--:-- --:--:-- &lt;span style="color:#ae81ff">736&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#e6db74">&amp;#34;prediction&amp;#34;&lt;/span>: &lt;span style="color:#f92672">[&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ae81ff">0&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">]&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># ëª¨ë¸ reload (í•«ìŠ¤ì™‘)&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>curl -X POST http://fastapi.local/reload | jq
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> % Total % Received % Xferd Average Speed Time Time Time Current
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Dload Upload Total Spent Left Speed
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">100&lt;/span> &lt;span style="color:#ae81ff">66&lt;/span> &lt;span style="color:#ae81ff">100&lt;/span> &lt;span style="color:#ae81ff">66&lt;/span> &lt;span style="color:#ae81ff">0&lt;/span> &lt;span style="color:#ae81ff">0&lt;/span> &lt;span style="color:#ae81ff">186&lt;/span> &lt;span style="color:#ae81ff">0&lt;/span> --:--:-- --:--:-- --:--:-- &lt;span style="color:#ae81ff">186&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#e6db74">&amp;#34;status&amp;#34;&lt;/span>: &lt;span style="color:#e6db74">&amp;#34;success&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#e6db74">&amp;#34;message&amp;#34;&lt;/span>: &lt;span style="color:#e6db74">&amp;#34;ğŸ” Model reloaded successfully.&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># ì‹ ê·œ ëª¨ë¸ ë²„ì „ í™•ì¸&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>curl http://fastapi.local/model-info | jq
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> % Total % Received % Xferd Average Speed Time Time Time Current
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Dload Upload Total Spent Left Speed
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">100&lt;/span> &lt;span style="color:#ae81ff">144&lt;/span> &lt;span style="color:#ae81ff">100&lt;/span> &lt;span style="color:#ae81ff">144&lt;/span> &lt;span style="color:#ae81ff">0&lt;/span> &lt;span style="color:#ae81ff">0&lt;/span> &lt;span style="color:#ae81ff">42985&lt;/span> &lt;span style="color:#ae81ff">0&lt;/span> --:--:-- --:--:-- --:--:-- &lt;span style="color:#ae81ff">48000&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#e6db74">&amp;#34;model_name&amp;#34;&lt;/span>: &lt;span style="color:#e6db74">&amp;#34;best_model&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#e6db74">&amp;#34;stage&amp;#34;&lt;/span>: &lt;span style="color:#e6db74">&amp;#34;Staging&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#e6db74">&amp;#34;version&amp;#34;&lt;/span>: &lt;span style="color:#e6db74">&amp;#34;2&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#e6db74">&amp;#34;run_id&amp;#34;&lt;/span>: &lt;span style="color:#e6db74">&amp;#34;72f388927f5749c185b828a1a16bb063&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#e6db74">&amp;#34;model_uri&amp;#34;&lt;/span>: &lt;span style="color:#e6db74">&amp;#34;models:/best_model/Staging&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># ì˜ˆì¸¡ ê²°ê³¼ í™•ì¸&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>curl -X POST http://fastapi.local/predict &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span> -H &lt;span style="color:#e6db74">&amp;#34;Content-Type: application/json&amp;#34;&lt;/span> &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span> -d &lt;span style="color:#e6db74">&amp;#39;[ [5.1, 3.5, 1.4, 0.2] ]&amp;#39;&lt;/span> | jq
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> % Total % Received % Xferd Average Speed Time Time Time Current
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Dload Upload Total Spent Left Speed
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">100&lt;/span> &lt;span style="color:#ae81ff">42&lt;/span> &lt;span style="color:#ae81ff">100&lt;/span> &lt;span style="color:#ae81ff">18&lt;/span> &lt;span style="color:#ae81ff">100&lt;/span> &lt;span style="color:#ae81ff">24&lt;/span> &lt;span style="color:#ae81ff">3831&lt;/span> &lt;span style="color:#ae81ff">5108&lt;/span> --:--:-- --:--:-- --:--:-- &lt;span style="color:#ae81ff">10500&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#e6db74">&amp;#34;prediction&amp;#34;&lt;/span>: &lt;span style="color:#f92672">[&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ae81ff">0&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">]&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div></description></item><item><title>[MLOps í”Œë«í¼ êµ¬ì¶• - 5ë‹¨ê³„: FastAPI ì„œë¹™: MLflow ëª¨ë¸ ì—°ë™ ë° í•«ìŠ¤ì™‘ êµ¬ì¡° êµ¬ì¶•]</title><link>https://keonhoban.github.io/mlops-journey/posts/mlops-pipeline-helm/05/</link><pubDate>Mon, 07 Jul 2025 17:11:55 +0900</pubDate><guid>https://keonhoban.github.io/mlops-journey/posts/mlops-pipeline-helm/05/</guid><description>&lt;h2 id="-ì‹œë‚˜ë¦¬ì˜¤-ì„¤ëª…">ğŸ§  ì‹œë‚˜ë¦¬ì˜¤ ì„¤ëª…&lt;/h2>
&lt;blockquote>
&lt;p>â€œ ëª¨ë¸ì„ ìˆ˜ë™ìœ¼ë¡œ ë„£ëŠ” ê²ƒì´ ì•„ë‹ˆë¼,&lt;/p>
&lt;p>MLflowì— ë“±ë¡ëœ Staging ëª¨ë¸ì„ ì„œë¹™ APIì—ì„œ &lt;strong>ìë™ ë¡œë”©&lt;/strong>í•˜ëŠ” êµ¬ì¡°ë¥¼ ì§€í–¥í•©ë‹ˆë‹¤.â€&lt;/p>&lt;/blockquote>
&lt;ul>
&lt;li>FastAPIëŠ” ê²½ëŸ‰í™”ëœ ì„œë¹™ ì„œë²„ë¡œì„œ ì í•©&lt;/li>
&lt;li>MLflow &lt;code>pyfunc.load_model()&lt;/code>ì„ í†µí•´ ìë™ ë¡œë”© â†’ CI/CD ë° ëª¨ë¸ ìë™í™” ê°€ëŠ¥&lt;/li>
&lt;li>S3ì™€ ì—°ê²°ë˜ë¯€ë¡œ, â€œë¡œì»¬ ë³µì‚¬ë³¸ ê´€ë¦¬ Xâ€, ì¬í˜„ì„± ìœ ì§€&lt;/li>
&lt;li>API í˜¸ì¶œì„ í†µí•´ ì‹¤ì œ ì¶”ë¡  ê²°ê³¼ í™•ì¸ ê°€ëŠ¥&lt;/li>
&lt;/ul>
&lt;hr>
&lt;h2 id="-tldr">âœ¨ TL;DR&lt;/h2>
&lt;ul>
&lt;li>MLflowì—ì„œ ë“±ë¡í•œ ëª¨ë¸ì„ &lt;strong>FastAPI ê¸°ë°˜ REST API&lt;/strong>ë¡œ ì„œë¹™í•©ë‹ˆë‹¤.&lt;/li>
&lt;li>&lt;code>mlflow.pyfunc.load_model()&lt;/code>ì„ í†µí•´ &lt;strong>Stageë³„ ë²„ì „ ê´€ë¦¬&lt;/strong>, &lt;strong>í•«ìŠ¤ì™‘&lt;/strong>, &lt;strong>ëª¨ë¸ ì •ë³´ ì¡°íšŒ&lt;/strong>ê°€ ê°€ëŠ¥í•©ë‹ˆë‹¤.&lt;/li>
&lt;li>ì¿ ë²„ë„¤í‹°ìŠ¤ ê¸°ë°˜ìœ¼ë¡œ Helm Chart ë°°í¬ + AWS ì¸ì¦ Secret + Ingress ì ‘ê·¼ê¹Œì§€ ì—°ë™í•©ë‹ˆë‹¤.&lt;/li>
&lt;/ul>
&lt;hr>
&lt;h2 id="-ì•„í‚¤í…ì²˜-êµ¬ì„±ë„">ğŸ“ ì•„í‚¤í…ì²˜ êµ¬ì„±ë„&lt;/h2>
&lt;p>&lt;img alt="05" loading="lazy" src="https://keonhoban.github.io/mlops-journey/images/05.png">&lt;/p></description></item><item><title>[MLOps í”Œë«í¼ êµ¬ì¶• - 4ë‹¨ê³„: Airflow : GitSync + ì™¸ë¶€ PostgreSQL + Secret ì—°ë™]</title><link>https://keonhoban.github.io/mlops-journey/posts/mlops-pipeline-helm/04/</link><pubDate>Thu, 03 Jul 2025 17:11:53 +0900</pubDate><guid>https://keonhoban.github.io/mlops-journey/posts/mlops-pipeline-helm/04/</guid><description>&lt;h2 id="-ì‹œë‚˜ë¦¬ì˜¤-ì„¤ëª…">ğŸ§  ì‹œë‚˜ë¦¬ì˜¤ ì„¤ëª…&lt;/h2>
&lt;blockquote>
&lt;p>â€œì‹¤ë¬´ì—ì„œëŠ” ë°ì´í„° íŒŒì´í”„ë¼ì¸ì´ë‚˜ ëª¨ë¸ í•™ìŠµ ì‘ì—…ì„ ìˆ˜ì‹œë¡œ ì—…ë°ì´íŠ¸í•˜ê²Œ ë˜ë©°,&lt;/p>
&lt;p>ì´ë¥¼ ìˆ˜ë™ìœ¼ë¡œ ì—…ë¡œë“œí•˜ì§€ ì•Šê³  Git ê¸°ë°˜ìœ¼ë¡œ ê´€ë¦¬í•˜ëŠ” ê²ƒì´ í•„ìˆ˜ì…ë‹ˆë‹¤.&lt;/p>
&lt;p>AirflowëŠ” GitSync ê¸°ëŠ¥ì„ í†µí•´ DAGë¥¼ ìë™ ë™ê¸°í™”í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.â€&lt;/p>&lt;/blockquote>
&lt;ul>
&lt;li>DAG ì½”ë“œê°€ Gitìœ¼ë¡œ ê´€ë¦¬ë˜ì–´ì•¼ ë¦¬ë·°, íˆìŠ¤í† ë¦¬, í˜‘ì—… ê°€ëŠ¥&lt;/li>
&lt;li>GitSync â†’ DAG ìë™ ë°°í¬ (CI/CD ê°œë… ì ìš©)&lt;/li>
&lt;li>Secretìœ¼ë¡œ Git ì¸ì¦ â†’ ì¡°ì§ ë‚´ GitOps ë¬¸í™”ì™€ ì—°ê³„&lt;/li>
&lt;/ul>
&lt;hr>
&lt;h2 id="-tldr">âœ¨ TL;DR&lt;/h2>
&lt;ul>
&lt;li>Helmì„ í†µí•´ Airflowë¥¼ ë°°í¬í•˜ë©´ì„œ DAG ì½”ë“œë¥¼ Git ì €ì¥ì†Œì—ì„œ ìë™ìœ¼ë¡œ ë™ê¸°í™”í•˜ëŠ” êµ¬ì¡° ì„¤ê³„&lt;/li>
&lt;li>GitSync, Secret ê¸°ë°˜ SSH ì¸ì¦, ì™¸ë¶€ PostgreSQL, AWS S3 ì—°ë™ê¹Œì§€ í¬í•¨í•´ êµ¬ì„±&lt;/li>
&lt;li>UI ì ‘ê·¼ì€ Ingressë¥¼ í†µí•´ ì´ë£¨ì–´ì§€ë©°, ë¡œê·¸ëŠ” PVC ë˜ëŠ” S3ë¡œ ì„¤ì • ê°€ëŠ¥&lt;/li>
&lt;/ul>
&lt;hr>
&lt;h2 id="-ì•„í‚¤í…ì²˜-êµ¬ì„±ë„">ğŸ“ ì•„í‚¤í…ì²˜ êµ¬ì„±ë„&lt;/h2>
&lt;p>&lt;img alt="04" loading="lazy" src="https://keonhoban.github.io/mlops-journey/images/04.png">&lt;/p></description></item><item><title>[MLOps í”Œë«í¼ êµ¬ì¶• - 3ë‹¨ê³„: MLflow : PostgreSQL + S3 ì—°ë™ ê¸°ë°˜ Helm êµ¬ì„±]</title><link>https://keonhoban.github.io/mlops-journey/posts/mlops-pipeline-helm/03/</link><pubDate>Mon, 30 Jun 2025 17:11:51 +0900</pubDate><guid>https://keonhoban.github.io/mlops-journey/posts/mlops-pipeline-helm/03/</guid><description>&lt;h2 id="-ì‹œë‚˜ë¦¬ì˜¤-ì„¤ëª…">ğŸ§  ì‹œë‚˜ë¦¬ì˜¤ ì„¤ëª…&lt;/h2>
&lt;blockquote>
&lt;p>â€œMLflow Tracking ì„œë²„ëŠ” ë‹¨ìˆœ ëª¨ë¸ í•™ìŠµì´ ì•„ë‹Œ ëª¨ë¸ì˜ ì‹¤í—˜ ì´ë ¥, í•˜ì´í¼íŒŒë¼ë¯¸í„°, ì„±ëŠ¥ ì§€í‘œ ë“±ì„ ì¶”ì í•˜ëŠ” ì—­í• ì„ í•©ë‹ˆë‹¤.&lt;/p>
&lt;p>ë”°ë¼ì„œ ë‹¨ì¼ ë¨¸ì‹ /ë¡œì»¬ í™˜ê²½ì´ ì•„ë‹Œ, &lt;strong>ì„œë²„ ê¸°ë°˜ Tracking í™˜ê²½ì´ í•„ìš”í•©ë‹ˆë‹¤.&lt;/strong>â€&lt;/p>&lt;/blockquote>
&lt;ul>
&lt;li>
&lt;p>í•œ í”„ë¡œì íŠ¸ì— ì—¬ëŸ¬ ë²„ì „ì˜ ëª¨ë¸ì´ ë“±ì¥í•˜ê³ ,&lt;/p>
&lt;p>ê°ê° ì–´ë–¤ ì‹¤í—˜ìœ¼ë¡œë¶€í„° ë‚˜ì™”ëŠ”ì§€ **â€˜íšŒê³  ê°€ëŠ¥í•œ ë¡œê·¸â€™**ê°€ í•„ìš”í•¨&lt;/p>
&lt;/li>
&lt;li>
&lt;p>MLflow Tracking Server + PostgreSQL â†’ ëª¨ë¸ ì‹¤í—˜ ë¡œê·¸ ì €ì¥&lt;/p>
&lt;/li>
&lt;li>
&lt;p>S3 ì—°ë™ â†’ ëª¨ë¸ íŒŒì¼ ì €ì¥ ìœ„ì¹˜ ë¶„ë¦¬ (ì„œë¹™, ì¬ì‚¬ìš© ëŒ€ë¹„)&lt;/p>
&lt;/li>
&lt;/ul>
&lt;hr>
&lt;h2 id="-tldr">âœ¨ TL;DR&lt;/h2>
&lt;ul>
&lt;li>MLflowë¥¼ ë„ì…ì‹œ &lt;strong>PostgreSQL, S3, ì¸ì¦ ì •ë³´ ì£¼ì…, Helm ë°°í¬, Ingress ì—°ë™ ë“±&lt;/strong> ì„¤ê³„&lt;/li>
&lt;li>MLflowë¥¼ Helmìœ¼ë¡œ ë°°í¬í•˜ë©´ì„œ ê³ ë ¤í•œ í•­ëª©(ë³´ì•ˆ, ì•„í‹°íŒ©íŠ¸ ì €ì¥ì†Œ, UI ì ‘ê·¼ ë“±) êµ¬ì„±&lt;/li>
&lt;li>ì»¤ìŠ¤í…€ Docker ì´ë¯¸ì§€ë¡œ &lt;code>psycopg2&lt;/code> ì„¤ì¹˜, Helm chart êµ¬ì„±, Secret ì—°ê²°ê¹Œì§€ í¬í•¨&lt;/li>
&lt;/ul>
&lt;hr>
&lt;h2 id="-ì•„í‚¤í…ì²˜-êµ¬ì„±ë„-with-secret--ì—°ë™-íë¦„">ğŸ“ ì•„í‚¤í…ì²˜ êµ¬ì„±ë„ (with Secret &amp;amp; ì—°ë™ íë¦„)&lt;/h2>
&lt;p>&lt;img alt="03" loading="lazy" src="https://keonhoban.github.io/mlops-journey/images/03.png">&lt;/p></description></item><item><title>[MLOps í”Œë«í¼ êµ¬ì¶• - 2ë‹¨ê³„: S3 &amp; PostgreSQL ì—°ë™ì„ ìœ„í•œ êµ¬ì„± ë° Secret ê´€ë¦¬ ì „ëµ]</title><link>https://keonhoban.github.io/mlops-journey/posts/mlops-pipeline-helm/02/</link><pubDate>Thu, 26 Jun 2025 17:11:49 +0900</pubDate><guid>https://keonhoban.github.io/mlops-journey/posts/mlops-pipeline-helm/02/</guid><description>&lt;h2 id="-ì‹œë‚˜ë¦¬ì˜¤-ì„¤ëª…">ğŸ§  ì‹œë‚˜ë¦¬ì˜¤ ì„¤ëª…&lt;/h2>
&lt;blockquote>
&lt;p>â€œëª¨ë“  êµ¬ì„± ìš”ì†Œê°€ ì™¸ë¶€ DB, GitHub, S3 ë“± ë¯¼ê°í•œ ë¦¬ì†ŒìŠ¤ì™€ ì—°ë™ë˜ê¸° ë•Œë¬¸ì—,&lt;/p>
&lt;p>API í‚¤ ë° ë¹„ë°€ë²ˆí˜¸ë¥¼ ì§ì ‘ ë„£ëŠ” ê±´ ë³´ì•ˆìƒ ìœ„í—˜í•©ë‹ˆë‹¤.&lt;/p>
&lt;p>ë”°ë¼ì„œ Kubernetes Secretì„ í™œìš©í•´ ë¯¼ê°í•œ ì •ë³´ ë…¸ì¶œì„ ìµœì†Œí™”í•©ë‹ˆë‹¤.â€&lt;/p>&lt;/blockquote>
&lt;ul>
&lt;li>GitSyncìš© &lt;strong>SSH Key&lt;/strong>ë¥¼ Secretìœ¼ë¡œ ì£¼ì… â†’ GitHub ì¸ì¦&lt;/li>
&lt;li>Airflow DAG ë‚´ì—ì„œ DB ì ‘ì†ì„ ìœ„í•œ ì»¤ë„¥ì…˜ ì •ë³´ë„ Secret ì²˜ë¦¬&lt;/li>
&lt;/ul>
&lt;hr>
&lt;h2 id="-tldr">âœ¨ TL;DR&lt;/h2>
&lt;ul>
&lt;li>ì™¸ë¶€ ë¦¬ì†ŒìŠ¤(AWS S3, DB ë“±)ì™€ ì—°ê²°í•  ë•Œ, ì¸ì¦ ì •ë³´ë¥¼ ì§ì ‘ ì½”ë“œë‚˜ YAMLì— ë…¸ì¶œí•˜ëŠ” ê±´ ë³´ì•ˆìƒ ìœ„í—˜&lt;/li>
&lt;li>Kubernetesì—ì„œëŠ” &lt;code>Secret&lt;/code>ê³¼ &lt;code>ConfigMap&lt;/code>, ê·¸ë¦¬ê³  &lt;code>envFrom&lt;/code>, &lt;code>volumeMount&lt;/code> ë°©ì‹ì„ ì¡°í•©í•˜ì—¬ ì‚¬ìš© ê°€ëŠ¥&lt;/li>
&lt;li>ì´ë²ˆ í¬ìŠ¤íŒ…ì—ì„œëŠ” MLflow, Airflow, FastAPIì™€ AWS S3 &amp;amp; PostgreSQLì„ ì—°ë™í•  ë•Œ ì‚¬ìš©í•œ &lt;strong>Secret êµ¬ì„± ì „ëµ&lt;/strong>ê³¼ ë§ˆì£¼ì¹œ ì´ìŠˆ ë° í•´ê²°ì±… ê³µìœ &lt;/li>
&lt;/ul>
&lt;hr>
&lt;h2 id="-ì•„í‚¤í…ì²˜-êµ¬ì„±ë„">ğŸ§± ì•„í‚¤í…ì²˜ êµ¬ì„±ë„&lt;/h2>
&lt;p>&lt;img alt="02" loading="lazy" src="https://keonhoban.github.io/mlops-journey/images/02.png">&lt;/p></description></item><item><title>[MLOps í”Œë«í¼ êµ¬ì¶• - 1ë‹¨ê³„: ì¸í”„ë¼ ì„¤ê³„ ë° í™˜ê²½ ì¤€ë¹„]</title><link>https://keonhoban.github.io/mlops-journey/posts/mlops-pipeline-helm/01/</link><pubDate>Mon, 23 Jun 2025 17:11:47 +0900</pubDate><guid>https://keonhoban.github.io/mlops-journey/posts/mlops-pipeline-helm/01/</guid><description>&lt;h2 id="-ì‹œë‚˜ë¦¬ì˜¤-ì„¤ëª…">ğŸ§  ì‹œë‚˜ë¦¬ì˜¤ ì„¤ëª…&lt;/h2>
&lt;blockquote>
&lt;p>â€œML ëª¨ë¸ì„ ì‹¤í—˜í•˜ê³  ì¶”ì í•˜ë ¤ë©´ ë‹¨ìˆœ Jupyter Notebookìœ¼ë¡  ë¶€ì¡±í•©ë‹ˆë‹¤.&lt;/p>
&lt;p>Kubernetes ê¸°ë°˜ì˜ ì¸í”„ë¼ë¥¼ ì„ íƒí•œ ì´ìœ ëŠ” ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤.â€&lt;/p>&lt;/blockquote>
&lt;ul>
&lt;li>
&lt;p>&lt;strong>Kubernetes&lt;/strong>:&lt;/p>
&lt;p>ğŸ‘‰ ML ëª¨ë¸ í•™ìŠµ ë° ì„œë¹™ì´ ì ì  ì»¨í…Œì´ë„ˆ ê¸°ë°˜ìœ¼ë¡œ ì´ë¤„ì§€ê³  ìˆìœ¼ë©°,&lt;/p>
&lt;p>ìì› í• ë‹¹, ìŠ¤ì¼€ì¼ë§, ë¦¬ì†ŒìŠ¤ ê²©ë¦¬ë¥¼ ìœ„í•œ í”Œë«í¼ìœ¼ë¡œ &lt;strong>ì‚¬ì‹¤ìƒ í‘œì¤€&lt;/strong>ì´ ë˜ì—ˆìŒ&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;strong>NFS êµ¬ì„±&lt;/strong>:&lt;/p>
&lt;p>ğŸ‘‰ MLflow UI ë‚´ì˜ ë¡œê·¸, ë©”íƒ€ë°ì´í„° ë“± &lt;strong>íŒŒì¼ ê¸°ë°˜ ê³µìœ  ìŠ¤í† ë¦¬ì§€ í•„ìš”&lt;/strong>,&lt;/p>
&lt;p>ë¡œì»¬ ë³¼ë¥¨ì€ Podê°€ ì¬ì‹œì‘ë˜ê±°ë‚˜ ì´ë™í•˜ë©´ íœ˜ë°œë˜ë¯€ë¡œ,&lt;/p>
&lt;p>&lt;strong>ì—¬ëŸ¬ Pod ê°„ ê³µìœ ê°€ ê°€ëŠ¥í•œ íŒŒì¼ ìŠ¤í† ë¦¬ì§€ê°€ í•„ìˆ˜&lt;/strong>&lt;/p>
&lt;p>(â€» ì‹¤ë¬´ì—ì„œëŠ” AWS EFS, GCP Filestore ë“±ì„ ëŒ€ì²´ë¡œ ì‚¬ìš©)&lt;/p></description></item><item><title>[Kubernetes - 5ë‹¨ê³„: Prometheus + Grafana ëª¨ë‹ˆí„°ë§]</title><link>https://keonhoban.github.io/mlops-journey/posts/kubernetes/05/</link><pubDate>Thu, 05 Jun 2025 20:06:43 +0900</pubDate><guid>https://keonhoban.github.io/mlops-journey/posts/kubernetes/05/</guid><description>&lt;blockquote>
&lt;p>ëª©í‘œ&lt;/p>
&lt;ol>
&lt;li>ì¿ ë²„ë„¤í‹°ìŠ¤ í´ëŸ¬ìŠ¤í„° ë‚´ ìì›(Pod, Node ë“±) ì‹¤ì‹œê°„ ëª¨ë‹ˆí„°ë§&lt;/li>
&lt;li>Prometheusë¡œ ë©”íŠ¸ë¦­ ìˆ˜ì§‘ â†’ Grafana ëŒ€ì‹œë³´ë“œ ì‹œê°í™”&lt;/li>
&lt;li>ì‹¤ë¬´ MLOps í™˜ê²½ì—ì„œ ëª¨ë‹ˆí„°ë§ ì•„í‚¤í…ì²˜ êµ¬ì¶• ê¸°ë°˜ ë‹¤ì§€ê¸°&lt;/li>
&lt;/ol>&lt;/blockquote>
&lt;p>ğŸ‘‰ ì‹¤ìŠµ ì½”ë“œ: &lt;a href="https://github.com/keonhoban/mlops-infra-labs/tree/main/k8s-basic/05_Prometheus_and_Grafana">ğŸ”— GitHub (Monitoring)&lt;/a>&lt;/p>
&lt;hr>
&lt;h2 id="-ì „ì²´-íë¦„-ìš”ì•½">ğŸ§­ ì „ì²´ íë¦„ ìš”ì•½&lt;/h2>
&lt;pre tabindex="0">&lt;code>â‘  Helm ì €ì¥ì†Œ ì¶”ê°€
â‘¡ Prometheus ì„¤ì¹˜ (ë©”íŠ¸ë¦­ ìˆ˜ì§‘)
â‘¢ Grafana ì„¤ì¹˜ (ëŒ€ì‹œë³´ë“œ ì‹œê°í™”)
â‘£ Web UI ì ‘ì† â†’ Prometheus ì—°ê²° â†’ ëŒ€ì‹œë³´ë“œ ë¶ˆëŸ¬ì˜¤ê¸°
&lt;/code>&lt;/pre>&lt;hr>
&lt;h2 id="-ë””ë ‰í† ë¦¬-êµ¬ì„±">ğŸ“‚ ë””ë ‰í† ë¦¬ êµ¬ì„±&lt;/h2>
&lt;pre tabindex="0">&lt;code>k8s-monitoring/
â”œâ”€â”€ values-prometheus.yaml # Prometheus ì»¤ìŠ¤í„°ë§ˆì´ì§• ì„¤ì •
â”œâ”€â”€ values-grafana.yaml # Grafana ì„¤ì • + ë¹„ë°€ë²ˆí˜¸ ì§€ì •
â”œâ”€â”€ README.md
&lt;/code>&lt;/pre>&lt;hr>
&lt;h2 id="-1ë‹¨ê³„-helm-ì €ì¥ì†Œ-ì¶”ê°€">âš™ï¸ [1ë‹¨ê³„] Helm ì €ì¥ì†Œ ì¶”ê°€&lt;/h2>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>helm repo add prometheus-community https://prometheus-community.github.io/helm-charts
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>helm repo add grafana https://grafana.github.io/helm-charts
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>helm repo update
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;hr>
&lt;h2 id="-2ë‹¨ê³„-prometheus-ì„¤ì¹˜">ğŸ“¦ [2ë‹¨ê³„] Prometheus ì„¤ì¹˜&lt;/h2>
&lt;h3 id="-ê¸°ë³¸-ì„¤ì¹˜">ğŸ”¹ ê¸°ë³¸ ì„¤ì¹˜&lt;/h3>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>helm install prometheus prometheus-community/prometheus
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>kubectl port-forward svc/prometheus-server 9090:80
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>ì ‘ì†: &lt;code>http://localhost:9090&lt;/code>&lt;/p></description></item><item><title>[Kubernetes - 4ë‹¨ê³„: Helm]</title><link>https://keonhoban.github.io/mlops-journey/posts/kubernetes/04/</link><pubDate>Thu, 05 Jun 2025 20:06:41 +0900</pubDate><guid>https://keonhoban.github.io/mlops-journey/posts/kubernetes/04/</guid><description>&lt;blockquote>
&lt;p>ëª©í‘œ&lt;/p>
&lt;ol>
&lt;li>Helm CLI ì„¤ì¹˜ ë° Chart ê°œë… ì´í•´&lt;/li>
&lt;li>Nginxë¥¼ Helmìœ¼ë¡œ ë°°í¬ &amp;amp; ê¸°ì¡´ YAML ë°©ì‹ê³¼ ì°¨ì´ ì²´ê°&lt;/li>
&lt;li>&lt;code>values.yaml&lt;/code>ë¡œ ì„¤ì •ì„ ë°”ê¾¸ê³  ì¬ë°°í¬í•˜ëŠ” ë°©ë²• ìµíˆê¸°&lt;/li>
&lt;/ol>&lt;/blockquote>
&lt;p>ğŸ‘‰ ì‹¤ìŠµ ì½”ë“œëŠ” &lt;a href="https://github.com/keonhoban/mlops-infra-labs/tree/main/k8s-basic/04_helm">ğŸ”— GitHub (Helm)&lt;/a>&lt;/p>
&lt;hr>
&lt;h2 id="-ì „ì²´-íë¦„-ìš”ì•½">ğŸ§­ ì „ì²´ íë¦„ ìš”ì•½&lt;/h2>
&lt;pre tabindex="0">&lt;code>â‘  Helm ì„¤ì¹˜ ë° Chart ì €ì¥ì†Œ ë“±ë¡
â‘¡ bitnami/nginx Chart ê²€ìƒ‰ â†’ ì„¤ì¹˜
â‘¢ ê¸°ë³¸ ì„¤ì¹˜ ê²°ê³¼ í™•ì¸ (LoadBalancer â†’ Pending)
â‘£ values.yamlë¡œ NodePort ì„¤ì • ë³€ê²½
â‘¤ ì„¤ì • ì ìš©í•˜ì—¬ ì¬ì„¤ì¹˜ + í¬íŠ¸ ì ‘ì† í™•ì¸
&lt;/code>&lt;/pre>&lt;hr>
&lt;h2 id="-ì‹¤ìŠµ-ë””ë ‰í† ë¦¬-êµ¬ì„±">ğŸ“ ì‹¤ìŠµ ë””ë ‰í† ë¦¬ êµ¬ì„±&lt;/h2>
&lt;pre tabindex="0">&lt;code>k8s-helm/
â”œâ”€â”€ values-nginx.yaml # ì»¤ìŠ¤í„°ë§ˆì´ì§•ìš© ì„¤ì • íŒŒì¼
â””â”€â”€ README.md
&lt;/code>&lt;/pre>&lt;hr>
&lt;h2 id="-1ë‹¨ê³„-helm-ì„¤ì¹˜">âš™ï¸ [1ë‹¨ê³„] Helm ì„¤ì¹˜&lt;/h2>
&lt;h3 id="-ubuntu-ì„¤ì¹˜-ëª…ë ¹ì–´">ğŸ”§ Ubuntu ì„¤ì¹˜ ëª…ë ¹ì–´&lt;/h3>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>curl https://raw.githubusercontent.com/helm/helm/main/scripts/get-helm-3 | bash
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>helm version
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;hr>
&lt;h2 id="-2ë‹¨ê³„-chart-ì €ì¥ì†Œ-ë“±ë¡--ê²€ìƒ‰">ğŸ“¦ [2ë‹¨ê³„] Chart ì €ì¥ì†Œ ë“±ë¡ &amp;amp; ê²€ìƒ‰&lt;/h2>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>helm repo add bitnami https://charts.bitnami.com/bitnami
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>helm repo update
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>helm search repo nginx
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;blockquote>
&lt;p>helm search repoëŠ” Chart ëª©ë¡ì„ ê²€ìƒ‰í•˜ëŠ” ëª…ë ¹ì–´&lt;/p></description></item><item><title>[Kubernetes - 3ë‹¨ê³„ : Ingress &amp; Nginx Controller]</title><link>https://keonhoban.github.io/mlops-journey/posts/kubernetes/03/</link><pubDate>Thu, 05 Jun 2025 20:06:39 +0900</pubDate><guid>https://keonhoban.github.io/mlops-journey/posts/kubernetes/03/</guid><description>&lt;blockquote>
&lt;p>ëª©í‘œ&lt;/p>
&lt;ol>
&lt;li>ì—¬ëŸ¬ ì„œë¹„ìŠ¤ë¥¼ &lt;strong>ë„ë©”ì¸ ë˜ëŠ” ê²½ë¡œ ê¸°ë°˜&lt;/strong>ìœ¼ë¡œ ë¼ìš°íŒ…&lt;/li>
&lt;li>Cluster ì™¸ë¶€ì—ì„œ ì„œë¹„ìŠ¤ë¥¼ &lt;code>http://foo.local&lt;/code> í˜•ì‹ìœ¼ë¡œ ì ‘ê·¼&lt;/li>
&lt;li>ì‹¤ë¬´ì—ì„œ ê°€ì¥ ë§ì´ ì“°ëŠ” Ingress êµ¬ì¡°(Nginx Ingress Controller) ìµíˆê¸°&lt;/li>
&lt;/ol>&lt;/blockquote>
&lt;p>ğŸ‘‰ ì‹¤ìŠµ ì½”ë“œëŠ” &lt;a href="https://github.com/keonhoban/mlops-infra-labs/tree/main/k8s-basic/03_Ingress_and_Nginx_Controller">ğŸ”— GitHub (Ingress_and_Nginx_Controller)&lt;/a>&lt;/p>
&lt;hr>
&lt;h2 id="-ì „ì²´-íë¦„-ìš”ì•½">ğŸ§­ ì „ì²´ íë¦„ ìš”ì•½&lt;/h2>
&lt;pre tabindex="0">&lt;code>â‘  Ingress Controller ì„¤ì¹˜ (minikube addons ì‚¬ìš©)
â‘¡ nginx / httpd ì„œë¹„ìŠ¤ ë°°í¬
â‘¢ Ingress ë¦¬ì†ŒìŠ¤ë¡œ ê²½ë¡œ ë¼ìš°íŒ… ì„¤ì •
â‘£ /etc/hosts ìˆ˜ì • â†’ curl í…ŒìŠ¤íŠ¸ë¡œ í™•ì¸
&lt;/code>&lt;/pre>&lt;hr>
&lt;h2 id="-ì‹¤ìŠµ-ë””ë ‰í† ë¦¬-êµ¬ì¡°">ğŸ“¦ ì‹¤ìŠµ ë””ë ‰í† ë¦¬ êµ¬ì¡°&lt;/h2>
&lt;pre tabindex="0">&lt;code>k8s-ingress/
â”œâ”€â”€ deploy-nginx.yaml # nginx ë°°í¬ + ì„œë¹„ìŠ¤
â”œâ”€â”€ deploy-httpd.yaml # httpd ë°°í¬ + ì„œë¹„ìŠ¤
â”œâ”€â”€ ingress.yaml # Ingress ë¼ìš°íŒ… ì •ì˜
â””â”€â”€ README.md
&lt;/code>&lt;/pre>&lt;hr>
&lt;h2 id="-1ë‹¨ê³„-ingress-controller-ì„¤ì¹˜">âš™ï¸ [1ë‹¨ê³„] Ingress Controller ì„¤ì¹˜&lt;/h2>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>minikube addons enable ingress
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>kubectl get pods -n ingress-nginx
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ul>
&lt;li>&lt;code>ingress-nginx-controller&lt;/code> Podê°€ &lt;code>Running&lt;/code> ìƒíƒœë©´ ì„¤ì¹˜ ì„±ê³µ&lt;/li>
&lt;li>NodePort ê¸°ë³¸ í¬íŠ¸: &lt;code>80&lt;/code>, &lt;code>443&lt;/code>&lt;/li>
&lt;/ul>
&lt;hr>
&lt;h2 id="-2ë‹¨ê³„-ì„œë¹„ìŠ¤-2ê°œ-ë°°í¬-nginx--httpd">ğŸ§± [2ë‹¨ê³„] ì„œë¹„ìŠ¤ 2ê°œ ë°°í¬ (nginx / httpd)&lt;/h2>
&lt;h3 id="-deploy-nginxyaml">ğŸ”¹ deploy-nginx.yaml&lt;/h3>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-yaml" data-lang="yaml">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">apiVersion&lt;/span>: &lt;span style="color:#ae81ff">apps/v1&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">kind&lt;/span>: &lt;span style="color:#ae81ff">Deployment&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">metadata&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">name&lt;/span>: &lt;span style="color:#ae81ff">nginx-deployment&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">spec&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">replicas&lt;/span>: &lt;span style="color:#ae81ff">1&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">selector&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">matchLabels&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">app&lt;/span>: &lt;span style="color:#ae81ff">nginx&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">template&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">metadata&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">labels&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">app&lt;/span>: &lt;span style="color:#ae81ff">nginx&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">spec&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">containers&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - &lt;span style="color:#f92672">name&lt;/span>: &lt;span style="color:#ae81ff">nginx&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">image&lt;/span>: &lt;span style="color:#ae81ff">nginx&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">ports&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - &lt;span style="color:#f92672">containerPort&lt;/span>: &lt;span style="color:#ae81ff">80&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>---
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">apiVersion&lt;/span>: &lt;span style="color:#ae81ff">v1&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">kind&lt;/span>: &lt;span style="color:#ae81ff">Service&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">metadata&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">name&lt;/span>: &lt;span style="color:#ae81ff">nginx-service&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">spec&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">selector&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">app&lt;/span>: &lt;span style="color:#ae81ff">nginx&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">ports&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - &lt;span style="color:#f92672">port&lt;/span>: &lt;span style="color:#ae81ff">80&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">targetPort&lt;/span>: &lt;span style="color:#ae81ff">80&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;hr>
&lt;h3 id="-deploy-httpdyaml">ğŸ”¹ deploy-httpd.yaml&lt;/h3>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-yaml" data-lang="yaml">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">apiVersion&lt;/span>: &lt;span style="color:#ae81ff">apps/v1&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">kind&lt;/span>: &lt;span style="color:#ae81ff">Deployment&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">metadata&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">name&lt;/span>: &lt;span style="color:#ae81ff">httpd-deployment&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">spec&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">replicas&lt;/span>: &lt;span style="color:#ae81ff">1&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">selector&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">matchLabels&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">app&lt;/span>: &lt;span style="color:#ae81ff">httpd&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">template&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">metadata&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">labels&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">app&lt;/span>: &lt;span style="color:#ae81ff">httpd&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">spec&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">containers&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - &lt;span style="color:#f92672">name&lt;/span>: &lt;span style="color:#ae81ff">httpd&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">image&lt;/span>: &lt;span style="color:#ae81ff">httpd&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">ports&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - &lt;span style="color:#f92672">containerPort&lt;/span>: &lt;span style="color:#ae81ff">80&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>---
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">apiVersion&lt;/span>: &lt;span style="color:#ae81ff">v1&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">kind&lt;/span>: &lt;span style="color:#ae81ff">Service&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">metadata&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">name&lt;/span>: &lt;span style="color:#ae81ff">httpd-service&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">spec&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">selector&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">app&lt;/span>: &lt;span style="color:#ae81ff">httpd&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">ports&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - &lt;span style="color:#f92672">port&lt;/span>: &lt;span style="color:#ae81ff">80&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">targetPort&lt;/span>: &lt;span style="color:#ae81ff">80&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;hr>
&lt;h2 id="-3ë‹¨ê³„-ingress-ë¼ìš°íŒ…-ì„¤ì •">ğŸ—ºï¸ [3ë‹¨ê³„] Ingress ë¼ìš°íŒ… ì„¤ì •&lt;/h2>
&lt;h3 id="-ingressyaml">ğŸ”¹ ingress.yaml&lt;/h3>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-yaml" data-lang="yaml">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">apiVersion&lt;/span>: &lt;span style="color:#ae81ff">networking.k8s.io/v1&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">kind&lt;/span>: &lt;span style="color:#ae81ff">Ingress&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">metadata&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">name&lt;/span>: &lt;span style="color:#ae81ff">example-ingress&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">annotations&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">nginx.ingress.kubernetes.io/rewrite-target&lt;/span>: &lt;span style="color:#ae81ff">/&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">spec&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">rules&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - &lt;span style="color:#f92672">host&lt;/span>: &lt;span style="color:#ae81ff">foo.local&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">http&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">paths&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - &lt;span style="color:#f92672">path&lt;/span>: &lt;span style="color:#ae81ff">/nginx&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">pathType&lt;/span>: &lt;span style="color:#ae81ff">Prefix&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">backend&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">service&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">name&lt;/span>: &lt;span style="color:#ae81ff">nginx-service&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">port&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">number&lt;/span>: &lt;span style="color:#ae81ff">80&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - &lt;span style="color:#f92672">path&lt;/span>: &lt;span style="color:#ae81ff">/httpd&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">pathType&lt;/span>: &lt;span style="color:#ae81ff">Prefix&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">backend&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">service&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">name&lt;/span>: &lt;span style="color:#ae81ff">httpd-service&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">port&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">number&lt;/span>: &lt;span style="color:#ae81ff">80&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;hr>
&lt;h2 id="-4ë‹¨ê³„-ì‹¤í–‰-ë°-í…ŒìŠ¤íŠ¸">ğŸš€ [4ë‹¨ê³„] ì‹¤í–‰ ë° í…ŒìŠ¤íŠ¸&lt;/h2>
&lt;h3 id="ì‹¤ìŠµ-ë¦¬ì†ŒìŠ¤-ì ìš©">ì‹¤ìŠµ ë¦¬ì†ŒìŠ¤ ì ìš©&lt;/h3>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>kubectl apply -f deploy-nginx.yaml
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>kubectl apply -f deploy-httpd.yaml
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>kubectl apply -f ingress.yaml
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="minikube-ip-í™•ì¸">minikube IP í™•ì¸&lt;/h3>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>minikube ip
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># ì˜ˆ: 192.168.49.2&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="etchosts-ìˆ˜ì •">&lt;code>/etc/hosts&lt;/code> ìˆ˜ì •&lt;/h3>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>sudo nano /etc/hosts
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># ì•„ë˜ ì¤„ ì¶”ê°€&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>192.168.49.2 foo.local
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="curlë¡œ-í…ŒìŠ¤íŠ¸">curlë¡œ í…ŒìŠ¤íŠ¸&lt;/h3>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>curl http://foo.local/nginx &lt;span style="color:#75715e"># nginx í™”ë©´ ë°˜í™˜&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>curl http://foo.local/httpd &lt;span style="color:#75715e"># httpd í˜ì´ì§€ ë°˜í™˜&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;hr>
&lt;h2 id="-ì •ë¦¬-ìš”ì•½">ğŸ¯ ì •ë¦¬ ìš”ì•½&lt;/h2>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>í•­ëª©&lt;/th>
&lt;th>ë‚´ìš©&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>Ingress&lt;/td>
&lt;td>HTTP(S) ìš”ì²­ì„ Path/Host ê¸°ë°˜ìœ¼ë¡œ ë‚´ë¶€ ì„œë¹„ìŠ¤ì— ë¼ìš°íŒ…&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Ingress Controller&lt;/td>
&lt;td>ì‹¤ì œ ë¼ìš°íŒ… ì²˜ë¦¬ ë‹´ë‹¹ (Nginx ë“±)&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>/etc/hosts&lt;/td>
&lt;td>ë¡œì»¬ DNS ì—­í•  (í´ëŸ¬ìŠ¤í„° ì™¸ë¶€ ì ‘ê·¼ ê°€ëŠ¥í•˜ê²Œ ì„¤ì •)&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>í™œìš© ì‚¬ë¡€&lt;/td>
&lt;td>&lt;code>/api&lt;/code>, &lt;code>/mlflow&lt;/code>, &lt;code>/jupyter&lt;/code> ë“± URLë³„ ì„œë¹„ìŠ¤ ë¶„ë¦¬ ê°€ëŠ¥&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;hr>
&lt;h2 id="-ì‹¤ë¬´-íŒ">ğŸ§© ì‹¤ë¬´ íŒ&lt;/h2>
&lt;ul>
&lt;li>&lt;strong>Ingress ControllerëŠ” ë‹¨ì¼ ì§„ì…ì  ì—­í• &lt;/strong> â†’ ë„ë©”ì¸ or ê²½ë¡œ ê¸°ë°˜ìœ¼ë¡œ ì„œë¹„ìŠ¤ ë¶„ë¦¬ ê°€ëŠ¥&lt;/li>
&lt;li>ì‹¤ë¬´ì—ì„œëŠ” TLS ì¸ì¦ì„œ ì—°ë™ (Let&amp;rsquo;s Encrypt, Cert Manager)ë„ í•¨ê»˜ êµ¬ì„±&lt;/li>
&lt;li>API Gateway ì—­í• ë¡œë„ í™•ì¥ ê°€ëŠ¥ (ex. Kong, Ambassador ë“±)&lt;/li>
&lt;li>&lt;code>/etc/hosts&lt;/code> ì„¤ì •ì€ &lt;strong>ê°œë°œ í™˜ê²½ ì „ìš©&lt;/strong> (ìš´ì˜ì—ì„œëŠ” DNS ì„œë²„ì™€ ì—°ë™)&lt;/li>
&lt;/ul>
&lt;hr>
&lt;h2 id="-mlops-ì‹¤ì „-ì—°ê²°">ğŸ”§ MLOps ì‹¤ì „ ì—°ê²°&lt;/h2>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>ìƒí™©&lt;/th>
&lt;th>Ingress í™œìš© ë°©ì‹&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>ì‹¤í—˜ ì¶”ì  íˆ´ MLflow&lt;/td>
&lt;td>&lt;code>/mlflow&lt;/code> ê²½ë¡œë¡œ ë…¸ì¶œ&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>ë…¸íŠ¸ë¶ í™˜ê²½ JupyterHub&lt;/td>
&lt;td>&lt;code>/jupyter&lt;/code> ê²½ë¡œë¡œ ì ‘ì†&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>LLM ì„œë¹™ ì—”ë“œí¬ì¸íŠ¸&lt;/td>
&lt;td>&lt;code>/v1/chat/completions&lt;/code> ë“±ìœ¼ë¡œ êµ¬ì„±&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>ë³´ì•ˆ ì—°ë™&lt;/td>
&lt;td>&lt;code>cert-manager&lt;/code> + Ingress â†’ TLS ì ìš©&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table></description></item><item><title>[Kubernetes - 2ë‹¨ê³„: ConfigMap &amp; Secret]</title><link>https://keonhoban.github.io/mlops-journey/posts/kubernetes/02/</link><pubDate>Thu, 05 Jun 2025 20:06:38 +0900</pubDate><guid>https://keonhoban.github.io/mlops-journey/posts/kubernetes/02/</guid><description>&lt;blockquote>
&lt;p>ëª©í‘œ&lt;/p>
&lt;ol>
&lt;li>í™˜ê²½ ë³€ìˆ˜ì™€ ì„¤ì •ì„ ì™¸ë¶€ë¡œ ë¶„ë¦¬í•´ì„œ ê´€ë¦¬í•˜ëŠ” ë²• ìµíˆê¸°&lt;/li>
&lt;li>ë¯¼ê°í•œ ì •ë³´(ë¹„ë°€ë²ˆí˜¸ ë“±)ëŠ” Secretìœ¼ë¡œ ì•ˆì „í•˜ê²Œ ì£¼ì…&lt;/li>
&lt;li>ì• í”Œë¦¬ì¼€ì´ì…˜ì—ì„œ ConfigMap/Secretì„ í™˜ê²½ ë³€ìˆ˜ ë˜ëŠ” íŒŒì¼ë¡œ ì½ëŠ” êµ¬ì¡° í•™ìŠµ&lt;/li>
&lt;/ol>&lt;/blockquote>
&lt;p>ğŸ‘‰ ì‹¤ìŠµ ì½”ë“œëŠ” &lt;a href="https://github.com/keonhoban/mlops-infra-labs/tree/main/k8s-basic/02_Configmap_and_Secret">ğŸ”— GitHub (Configmap_and_Secret)&lt;/a>&lt;/p>
&lt;hr>
&lt;h2 id="-ì „ì²´-íë¦„-ìš”ì•½">ğŸ§­ ì „ì²´ íë¦„ ìš”ì•½&lt;/h2>
&lt;pre tabindex="0">&lt;code>â‘  ConfigMap ìƒì„± (ì¼ë°˜ ì„¤ì •ê°’)
â‘¡ Secret ìƒì„± (ë¯¼ê° ì •ë³´ â€“ base64 ì¸ì½”ë”©)
â‘¢ Podì— í™˜ê²½ ë³€ìˆ˜ë¡œ ì£¼ì…
â‘£ ì»¨í…Œì´ë„ˆ ì•ˆì—ì„œ ê°’ í™•ì¸ (env ëª…ë ¹ì–´)
â‘¤ ì‹¤ì „ ì ìš© ë° ë³´ì•ˆ ì£¼ì˜ì‚¬í•­ í•™ìŠµ
&lt;/code>&lt;/pre>&lt;hr>
&lt;h2 id="-ì‹¤ìŠµì—-ì‚¬ìš©ëœ-íŒŒì¼-êµ¬ì„±">ğŸ“‚ ì‹¤ìŠµì— ì‚¬ìš©ëœ íŒŒì¼ êµ¬ì„±&lt;/h2>
&lt;pre tabindex="0">&lt;code>k8s-configmap-secret/
â”œâ”€â”€ configmap.yaml # ì¼ë°˜ ì„¤ì •ê°’ ì •ì˜
â”œâ”€â”€ secret.yaml # ë¯¼ê° ì •ë³´ (base64 ì¸ì½”ë”©)
â”œâ”€â”€ pod-env.yaml # Pod í™˜ê²½ ë³€ìˆ˜ë¡œ ì£¼ì…
â””â”€â”€ README.md
&lt;/code>&lt;/pre>&lt;hr>
&lt;h2 id="-ì£¼ìš”-yaml-íŒŒì¼-ì •ë¦¬">ğŸ“„ ì£¼ìš” YAML íŒŒì¼ ì •ë¦¬&lt;/h2>
&lt;h3 id="-configmapyaml">ğŸ”¹ &lt;code>configmap.yaml&lt;/code>&lt;/h3>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-yaml" data-lang="yaml">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">apiVersion&lt;/span>: &lt;span style="color:#ae81ff">v1&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">kind&lt;/span>: &lt;span style="color:#ae81ff">ConfigMap&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">metadata&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">name&lt;/span>: &lt;span style="color:#ae81ff">app-config&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">data&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">APP_MODE&lt;/span>: &lt;span style="color:#e6db74">&amp;#34;production&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">APP_PORT&lt;/span>: &lt;span style="color:#e6db74">&amp;#34;8080&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;hr>
&lt;h3 id="-secretyaml">ğŸ”¹ &lt;code>secret.yaml&lt;/code>&lt;/h3>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-yaml" data-lang="yaml">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">apiVersion&lt;/span>: &lt;span style="color:#ae81ff">v1&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">kind&lt;/span>: &lt;span style="color:#ae81ff">Secret&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">metadata&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">name&lt;/span>: &lt;span style="color:#ae81ff">app-secret&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">type&lt;/span>: &lt;span style="color:#ae81ff">Opaque&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">data&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">DB_PASSWORD&lt;/span>: &lt;span style="color:#ae81ff">c3VwZXJzZWNyZXQ= &lt;/span> &lt;span style="color:#75715e"># base64 â†’ &amp;#34;supersecret&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;blockquote>
&lt;p>âœ… ì¸ì½”ë”© ë°©ë²•: echo -n &amp;ldquo;supersecret&amp;rdquo; | base64&lt;/p></description></item><item><title>[Kubernetes - 1ë‹¨ê³„ : Deployment &amp; Service]</title><link>https://keonhoban.github.io/mlops-journey/posts/kubernetes/01/</link><pubDate>Thu, 05 Jun 2025 20:06:36 +0900</pubDate><guid>https://keonhoban.github.io/mlops-journey/posts/kubernetes/01/</guid><description>&lt;blockquote>
&lt;p>ëª©í‘œ: ë¡œì»¬ Minikube í´ëŸ¬ìŠ¤í„° êµ¬ì„± â†’ Nginx Deployment &amp;amp; Service ìƒì„± â†’ kubectl ëª…ë ¹ì–´ ì²´ë“&lt;/p>&lt;/blockquote>
&lt;p>ğŸ‘‰ ì‹¤ìŠµ ì½”ë“œëŠ” &lt;a href="https://github.com/keonhoban/mlops-infra-labs/tree/main/k8s-basic/01_Deployment_and_Service">ğŸ”— GitHub (Deployment_and_Service)&lt;/a> ì—ì„œ í™•ì¸ ê°€ëŠ¥&lt;/p>
&lt;hr>
&lt;h2 id="-ì „ì²´-íë¦„-ìš”ì•½">ğŸ§­ ì „ì²´ íë¦„ ìš”ì•½&lt;/h2>
&lt;pre tabindex="0">&lt;code>â‘  Minikube ì„¤ì¹˜ ë° í´ëŸ¬ìŠ¤í„° ì‹œì‘
â‘¡ kubectl ëª…ë ¹ì–´ ì‹¤ìŠµ
â‘¢ Nginx Deployment + Service ë°°í¬
â‘£ ìƒíƒœ í™•ì¸ / íŒŒë“œ ì ‘ì† / ë¡œê·¸ í™•ì¸ / ìˆ˜í‰ í™•ì¥
â‘¤ ë¸”ë¡œê·¸ ì •ë¦¬
&lt;/code>&lt;/pre>&lt;hr>
&lt;h2 id="-1ë‹¨ê³„--minikube--kubectl-ì„¤ì¹˜">âš™ï¸ 1ë‹¨ê³„ â€“ Minikube &amp;amp; kubectl ì„¤ì¹˜&lt;/h2>
&lt;h3 id="-docker-ì„¤ì¹˜--ê¶Œí•œ-ë¶€ì—¬">ğŸ”¹ Docker ì„¤ì¹˜ &amp;amp; ê¶Œí•œ ë¶€ì—¬&lt;/h3>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>sudo apt update &lt;span style="color:#f92672">&amp;amp;&amp;amp;&lt;/span> sudo apt install -y docker.io
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>sudo usermod -aG docker $USER
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;blockquote>
&lt;p>âš ï¸ ì„¤ì¹˜ í›„ logout â†’ login ë˜ëŠ” newgrp docker ì‹¤í–‰ í•„ìš”&lt;/p></description></item></channel></rss>